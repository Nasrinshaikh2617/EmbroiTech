<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Premium Embroidery Marketplace</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      color: #1a202c;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }
    
    /* Authentication Screens */
    .auth-container {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .auth-box {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 480px;
      width: 100%;
      overflow: hidden;
    }
    
    .auth-header {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 40px 32px;
      text-align: center;
    }
    
    .auth-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .auth-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .auth-header p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .auth-body {
      padding: 40px 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2d3748;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s;
      background: #f7fafc;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #e94560;
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      width: 100%;
      padding: 16px;
      font-size: 16px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(233, 69, 96, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .auth-footer {
      text-align: center;
      padding: 24px 32px;
      background: #f7fafc;
      border-top: 1px solid #e2e8f0;
    }
    
    .auth-footer p {
      color: #718096;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #e94560;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .notification {
      position: fixed;
      top: 28px;
      right: 28px;
      background: #48bb78;
      color: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease;
      max-width: 420px;
      font-weight: 500;
    }
    
    .notification.active {
      display: block;
    }
    
    .notification.error {
      background: #f56565;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Authentication Screen -->
  <div id="authScreen" class="auth-container"><!-- Login Form -->
   <div id="loginForm" class="auth-box">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>EmbroiTech</h1>
     <p>Discover Beautiful Embroidery Designs</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleLogin(event)">
      <div class="form-group"><label for="loginEmail">Email Address</label> <input type="email" id="loginEmail" required placeholder="admin@embroitech.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="loginPassword">Password</label> <input type="password" id="loginPassword" required placeholder="admin123" autocomplete="current-password">
      </div><button type="submit" class="btn btn-primary" id="loginBtn"> üîê Sign In </button>
     </form>
     <p style="margin-top: 20px; font-size: 13px; color: #718096; text-align: center;">Demo: admin@embroitech.com / admin123</p>
    </div>
    <div class="auth-footer">
     <p>Don't have an account? <a onclick="showSignup()">Create Account</a></p>
    </div>
   </div><!-- Signup Form -->
   <div id="signupForm" class="auth-box" style="display: none;">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>Create Account</h1>
     <p>Join EmbroiTech Today</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleSignup(event)">
      <div class="form-group"><label for="signupFullName">Full Name</label> <input type="text" id="signupFullName" required placeholder="John Doe" autocomplete="name">
      </div>
      <div class="form-group"><label for="signupEmail">Email Address</label> <input type="email" id="signupEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" required placeholder="Create a strong password" autocomplete="new-password">
      </div><button type="submit" class="btn btn-primary" id="signupBtn"> ‚ú® Create Account </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Already have an account? <a onclick="showLogin()">Sign In</a></p>
    </div>
   </div>
  </div><!-- Main Application (Hidden initially) -->
  <div id="mainApp" class="container" style="display: none;"><!-- Header -->
   <header style="background: white; padding: 24px 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); margin-bottom: 28px;">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
     <div style="display: flex; align-items: center; gap: 16px;">
      <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);">
       ‚ú®
      </div>
      <div>
       <h1 style="font-size: 26px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 2px; font-weight: 800; letter-spacing: -0.5px;">EmbroiTech</h1>
       <p style="font-size: 13px; color: #718096; font-weight: 500;">Premium Embroidery Designs</p>
      </div>
     </div>
     <div style="flex: 1; max-width: 500px; min-width: 250px;">
      <div style="display: flex; align-items: center; background: #f7fafc; border-radius: 14px; padding: 14px 20px; gap: 12px; border: 2px solid #e2e8f0;"><span style="font-size: 20px;">üîç</span> <input type="text" id="searchInput" placeholder="Search designs..." style="border: none; background: transparent; outline: none; flex: 1; font-size: 15px;" oninput="filterProducts()">
      </div>
     </div>
     <div style="display: flex; gap: 12px; align-items: center;"><button class="btn" style="background: white; color: #e94560; border: 2px solid #e94560; position: relative;" onclick="showCart()"> üõí Cart <span id="cartBadge" style="position: absolute; top: -8px; right: -8px; background: #e94560; color: white; border-radius: 50%; width: 22px; height: 22px; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold;">0</span> </button> <button class="btn btn-primary" onclick="handleLogout()"> üö™ Logout </button>
     </div>
    </div>
    <nav style="display: flex; gap: 8px; overflow-x: auto;"><button class="btn" style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); color: white;" onclick="showAllProducts()">üè† All Designs</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Mirror Work')">ü™û Mirror Work</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Hand Embroidery')">‚úã Hand Embroidery</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Zari Work')">‚ú® Zari Work</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Thread Work')">üßµ Thread Work</button>
    </nav>
   </header><!-- Main Content -->
   <main style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.08); min-height: 600px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; flex-wrap: wrap; gap: 20px;">
     <h2 style="font-size: 28px; color: #2d3748; font-weight: 800;"><span id="viewTitle">All Designs</span> <span id="productCount" style="font-size: 16px; color: #718096; font-weight: 400; margin-left: 10px;">(0 items)</span></h2><button class="btn" style="background: #48bb78; color: white;" onclick="showAddProductForm()" id="addProductBtn"> ‚ûï Add Design </button>
    </div>
    <div id="productsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px;"><!-- Products will be rendered here -->
    </div>
    <div id="cartView" style="display: none;">
     <h2 style="font-size: 28px; color: #2d3748; font-weight: 800; margin-bottom: 32px;">üõí Shopping Cart</h2>
     <div id="cartItems"></div>
    </div>
   </main><!-- Footer -->
   <footer style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.08); margin-top: 28px; text-align: center;">
    <div style="display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 20px;">
     <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 28px;">
      ‚ú®
     </div>
     <h2 style="font-size: 24px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800;">EmbroiTech</h2>
    </div>
    <p style="color: #718096; font-size: 14px; margin-bottom: 16px;">Your premier destination for exquisite embroidery designs</p>
    <p style="color: #a0aec0; font-size: 13px;">¬© 2024 EmbroiTech. All rights reserved. Crafted with ‚ù§Ô∏è for embroidery enthusiasts.</p>
    <div style="display: flex; justify-content: center; gap: 14px; margin-top: 24px;">
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üìò
     </div>
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üì∑
     </div>
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üê¶
     </div>
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üí¨
     </div>
    </div>
   </footer>
  </div><!-- Add Product Modal -->
  <div id="addProductModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.75); z-index: 1000; align-items: center; justify-content: center; padding: 20px; overflow-y: auto;">
   <div style="background: white; border-radius: 24px; padding: 40px; max-width: 600px; width: 100%; position: relative; margin: auto;"><button onclick="closeAddProductForm()" style="position: absolute; top: 20px; right: 20px; background: #f56565; color: white; border: none; width: 44px; height: 44px; border-radius: 50%; cursor: pointer; font-size: 24px; display: flex; align-items: center; justify-content: center;">√ó</button>
    <h2 style="margin-bottom: 28px; color: #2d3748; font-weight: 800;">Add New Design</h2>
    <form onsubmit="addProduct(event)">
     <div class="form-group"><label for="productName">Design Name</label> <input type="text" id="productName" required placeholder="e.g., Royal Mirror Work Pattern">
     </div>
     <div class="form-group"><label for="productCategory">Category</label> <select id="productCategory" required> <option value="">Select Category</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
     </div>
     <div class="form-group"><label for="productPrice">Price (‚Çπ)</label> <input type="number" id="productPrice" required min="0" step="0.01" placeholder="e.g., 1299">
     </div>
     <div class="form-group"><label for="productDescription">Description</label> <textarea id="productDescription" placeholder="Describe the design..."></textarea>
     </div><button type="submit" class="btn btn-primary">Add Design</button>
    </form>
   </div>
  </div>
  <div id="notification" class="notification"></div>
  <script>
    let products = [];
    let cart = [];
    let currentFilter = 'all';
    let currentUser = null;
    
    // Initialize with demo account and sample products
    function init() {
      // Create demo admin account
      const demoAdmin = {
        email: 'admin@embroitech.com',
        password: 'admin123',
        fullName: 'Admin User',
        isAdmin: true
      };
      
      localStorage.setItem('embroitech_demo_admin', JSON.stringify(demoAdmin));
      
      // Load products from localStorage or create sample products
      const savedProducts = localStorage.getItem('embroitech_products');
      if (savedProducts) {
        products = JSON.parse(savedProducts);
      } else {
        // Create sample products
        products = [
          {
            id: 1,
            name: 'Royal Bridal Mirror Work',
            category: 'Mirror Work',
            price: 2499,
            description: 'Exquisite mirror work design perfect for bridal lehengas',
            emoji: 'ü™û',
            rating: 4.9,
            reviews: 156
          },
          {
            id: 2,
            name: 'Elegant Hand Embroidery',
            category: 'Hand Embroidery',
            price: 899,
            description: 'Beautiful hand-embroidered floral pattern',
            emoji: '‚úã',
            rating: 4.7,
            reviews: 89
          },
          {
            id: 3,
            name: 'Premium Zari Work',
            category: 'Zari Work',
            price: 3299,
            description: 'Luxurious golden zari work for saree borders',
            emoji: '‚ú®',
            rating: 4.8,
            reviews: 124
          },
          {
            id: 4,
            name: 'Colorful Thread Work',
            category: 'Thread Work',
            price: 1299,
            description: 'Vibrant multi-colored thread work design',
            emoji: 'üßµ',
            rating: 4.6,
            reviews: 67
          }
        ];
        saveProducts();
      }
      
      // Load cart
      const savedCart = localStorage.getItem('embroitech_cart');
      if (savedCart) {
        cart = JSON.parse(savedCart);
        updateCartBadge();
      }
      
      // Check if user is already logged in
      const savedUser = localStorage.getItem('embroitech_current_user');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showMainApp(currentUser);
      }
    }

    function saveProducts() {
      localStorage.setItem('embroitech_products', JSON.stringify(products));
    }

    function saveCart() {
      localStorage.setItem('embroitech_cart', JSON.stringify(cart));
      updateCartBadge();
    }

    function showLogin() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    }

    function showSignup() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value.trim().toLowerCase();
      const password = document.getElementById('loginPassword').value;
      
      const loginBtn = document.getElementById('loginBtn');
      loginBtn.disabled = true;
      loginBtn.textContent = 'üîÑ Signing in...';
      
      setTimeout(() => {
        const demoAdmin = JSON.parse(localStorage.getItem('embroitech_demo_admin'));
        
        if (email === demoAdmin.email && password === demoAdmin.password) {
          currentUser = demoAdmin;
          localStorage.setItem('embroitech_current_user', JSON.stringify(demoAdmin));
          showNotification('‚úÖ Welcome back, ' + demoAdmin.fullName + '!');
          showMainApp(demoAdmin);
        } else {
          showNotification('‚ùå Invalid email or password', 'error');
          loginBtn.disabled = false;
          loginBtn.textContent = 'üîê Sign In';
        }
      }, 500);
    }

    function handleSignup(event) {
      event.preventDefault();
      
      const fullName = document.getElementById('signupFullName').value.trim();
      const email = document.getElementById('signupEmail').value.trim().toLowerCase();
      const password = document.getElementById('signupPassword').value;
      
      const signupBtn = document.getElementById('signupBtn');
      signupBtn.disabled = true;
      signupBtn.textContent = 'üîÑ Creating account...';
      
      setTimeout(() => {
        const newUser = {
          email: email,
          password: password,
          fullName: fullName,
          isAdmin: false
        };
        
        currentUser = newUser;
        localStorage.setItem('embroitech_current_user', JSON.stringify(newUser));
        showNotification('‚úÖ Account created successfully!');
        showMainApp(newUser);
      }, 500);
    }

    function showMainApp(user) {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      // Show/hide add product button based on admin status
      if (user.isAdmin) {
        document.getElementById('addProductBtn').style.display = 'flex';
      } else {
        document.getElementById('addProductBtn').style.display = 'none';
      }
      
      renderProducts();
    }

    function handleLogout() {
      localStorage.removeItem('embroitech_current_user');
      currentUser = null;
      showNotification('üëã Logged out successfully');
      document.getElementById('authScreen').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
      showLogin();
    }

    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      let filteredProducts = products;
      
      // Apply category filter
      if (currentFilter !== 'all') {
        filteredProducts = filteredProducts.filter(p => p.category === currentFilter);
      }
      
      // Apply search filter
      if (searchTerm) {
        filteredProducts = filteredProducts.filter(p => 
          p.name.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm) ||
          p.description.toLowerCase().includes(searchTerm)
        );
      }
      
      document.getElementById('productCount').textContent = `(${filteredProducts.length} items)`;
      
      if (filteredProducts.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
            <div style="font-size: 80px; margin-bottom: 20px;">üîç</div>
            <h3 style="font-size: 24px; color: #2d3748; margin-bottom: 12px;">No designs found</h3>
            <p style="color: #718096;">Try adjusting your search or filters</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = filteredProducts.map(product => `
        <div style="background: white; border: 2px solid #f7fafc; border-radius: 20px; overflow: hidden; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 16px 40px rgba(233, 69, 96, 0.15)'; this.style.borderColor='#e94560'" onmouseout="this.style.transform=''; this.style.boxShadow=''; this.style.borderColor='#f7fafc'">
          <div style="width: 100%; height: 200px; background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%); display: flex; align-items: center; justify-content: center; font-size: 80px;">
            ${product.emoji}
          </div>
          <div style="padding: 24px;">
            <span style="font-size: 11px; color: #e94560; background: #fff5f7; padding: 6px 14px; border-radius: 14px; display: inline-block; margin-bottom: 12px; font-weight: 700; text-transform: uppercase;">${product.category}</span>
            <div style="font-size: 18px; font-weight: 700; color: #2d3748; margin-bottom: 12px; line-height: 1.4;">${product.name}</div>
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; font-size: 14px;">
              <span style="color: #fbbf24;">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span style="font-weight: 600; color: #2d3748;">${product.rating}</span>
              <span style="color: #a0aec0; font-size: 13px;">(${product.reviews} reviews)</span>
            </div>
            <p style="font-size: 13px; color: #718096; margin-bottom: 14px; line-height: 1.6;">${product.description}</p>
            <div style="font-size: 26px; font-weight: 800; background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 20px;">‚Çπ${product.price.toFixed(2)}</div>
            <div style="display: flex; gap: 10px;">
              <button class="btn btn-primary" style="flex: 1; font-size: 14px; padding: 12px;" onclick="addToCart(${product.id})">
                üõí Add to Cart
              </button>
              ${currentUser && currentUser.isAdmin ? `
                <button class="btn" style="background: #f56565; color: white; padding: 12px 16px;" onclick="deleteProduct(${product.id})">
                  üóëÔ∏è
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `).join('');
    }

    function filterProducts() {
      renderProducts();
    }

    function showAllProducts() {
      currentFilter = 'all';
      document.getElementById('viewTitle').textContent = 'All Designs';
      document.getElementById('cartView').style.display = 'none';
      document.getElementById('productsGrid').style.display = 'grid';
      renderProducts();
    }

    function filterByCategory(category) {
      currentFilter = category;
      document.getElementById('viewTitle').textContent = category;
      document.getElementById('cartView').style.display = 'none';
      document.getElementById('productsGrid').style.display = 'grid';
      renderProducts();
    }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      // Check if already in cart
      if (cart.find(item => item.id === productId)) {
        showNotification('‚ÑπÔ∏è Item already in cart!', 'error');
        return;
      }
      
      cart.push(product);
      saveCart();
      showNotification('‚úÖ Added to cart!');
    }

    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      saveCart();
      renderCart();
      showNotification('üóëÔ∏è Removed from cart');
    }

    function updateCartBadge() {
      document.getElementById('cartBadge').textContent = cart.length;
    }

    function showCart() {
      document.getElementById('productsGrid').style.display = 'none';
      document.getElementById('cartView').style.display = 'block';
      document.getElementById('viewTitle').textContent = 'Shopping Cart';
      renderCart();
    }

    function renderCart() {
      const container = document.getElementById('cartItems');
      
      if (cart.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 60px 20px;">
            <div style="font-size: 80px; margin-bottom: 20px;">üõí</div>
            <h3 style="font-size: 24px; color: #2d3748; margin-bottom: 12px;">Your cart is empty</h3>
            <p style="color: #718096; margin-bottom: 24px;">Add some beautiful designs to get started</p>
            <button class="btn btn-primary" onclick="showAllProducts()">Start Shopping</button>
          </div>
        `;
        return;
      }
      
      const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      container.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 24px;">
          ${cart.map(item => `
            <div style="display: flex; gap: 24px; padding: 24px; border: 2px solid #f7fafc; border-radius: 20px; align-items: center;">
              <div style="width: 100px; height: 100px; background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 48px; flex-shrink: 0;">
                ${item.emoji}
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 18px; margin-bottom: 6px;">${item.name}</div>
                <div style="font-size: 13px; color: #718096; margin-bottom: 10px;">${item.category}</div>
                <div style="color: #e94560; font-weight: 800; font-size: 20px;">‚Çπ${item.price.toFixed(2)}</div>
              </div>
              <button class="btn" style="background: #f56565; color: white;" onclick="removeFromCart(${item.id})">
                Remove
              </button>
            </div>
          `).join('')}
          
          <div style="background: #f7fafc; padding: 32px; border-radius: 20px; margin-top: 24px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 17px;">
              <span>Subtotal:</span>
              <span style="font-weight: 600;">‚Çπ${subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 17px;">
              <span>Shipping:</span>
              <span style="font-weight: 600;">${shipping === 0 ? 'FREE' : '‚Çπ' + shipping.toFixed(2)}</span>
            </div>
            ${shipping === 0 ? '<p style="font-size: 13px; color: #48bb78; margin-bottom: 16px;">üéâ You got free shipping!</p>' : '<p style="font-size: 13px; color: #718096; margin-bottom: 16px;">Free shipping on orders above ‚Çπ2000</p>'}
            <div style="display: flex; justify-content: space-between; font-size: 24px; font-weight: 800; color: #2d3748; padding-top: 20px; border-top: 2px solid #e2e8f0; margin-top: 16px;">
              <span>Total:</span>
              <span style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">‚Çπ${total.toFixed(2)}</span>
            </div>
          </div>
          
          <button class="btn btn-primary" style="width: 100%; font-size: 18px; padding: 18px;" onclick="checkout()">
            üí≥ Proceed to Checkout
          </button>
        </div>
      `;
    }

    function checkout() {
      showNotification('‚úÖ Order placed successfully! Thank you for shopping with us.');
      cart = [];
      saveCart();
      showAllProducts();
    }

    function showAddProductForm() {
      document.getElementById('addProductModal').style.display = 'flex';
    }

    function closeAddProductForm() {
      document.getElementById('addProductModal').style.display = 'none';
      document.getElementById('productName').value = '';
      document.getElementById('productCategory').value = '';
      document.getElementById('productPrice').value = '';
      document.getElementById('productDescription').value = '';
    }

    function addProduct(event) {
      event.preventDefault();
      
      const name = document.getElementById('productName').value.trim();
      const category = document.getElementById('productCategory').value;
      const price = parseFloat(document.getElementById('productPrice').value);
      const description = document.getElementById('productDescription').value.trim();
      
      const categoryEmojis = {
        'Mirror Work': 'ü™û',
        'Hand Embroidery': '‚úã',
        'Zari Work': '‚ú®',
        'Thread Work': 'üßµ',
        'Sequin Work': 'üíé'
      };
      
      const newProduct = {
        id: Date.now(),
        name: name,
        category: category,
        price: price,
        description: description,
        emoji: categoryEmojis[category] || 'üé®',
        rating: 4.5,
        reviews: 0
      };
      
      products.push(newProduct);
      saveProducts();
      closeAddProductForm();
      showNotification('‚úÖ Design added successfully!');
      renderProducts();
    }

    function deleteProduct(productId) {
      if (confirm('Are you sure you want to delete this design?')) {
        products = products.filter(p => p.id !== productId);
        saveProducts();
        showNotification('üóëÔ∏è Design deleted');
        renderProducts();
      }
    }

    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = 'notification active';
      if (type === 'error') {
        notification.classList.add('error');
      }
      
      setTimeout(() => {
        notification.classList.remove('active');
      }, 3000);
    }

    // Initialize on page load
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b870b1a2a08b0b',t:'MTc2MjY0MDI0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html><!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Premium Embroidery Marketplace</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      color: #1a202c;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }
    
    /* Authentication Screens */
    .auth-container {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .auth-box {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 480px;
      width: 100%;
      overflow: hidden;
    }
    
    .auth-header {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 40px 32px;
      text-align: center;
    }
    
    .auth-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .auth-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .auth-header p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .auth-body {
      padding: 40px 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2d3748;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s;
      background: #f7fafc;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #e94560;
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      width: 100%;
      padding: 16px;
      font-size: 16px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(233, 69, 96, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .auth-footer {
      text-align: center;
      padding: 24px 32px;
      background: #f7fafc;
      border-top: 1px solid #e2e8f0;
    }
    
    .auth-footer p {
      color: #718096;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #e94560;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .notification {
      position: fixed;
      top: 28px;
      right: 28px;
      background: #48bb78;
      color: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease;
      max-width: 420px;
      font-weight: 500;
    }
    
    .notification.active {
      display: block;
    }
    
    .notification.error {
      background: #f56565;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Authentication Screen -->
  <div id="authScreen" class="auth-container"><!-- Login Form -->
   <div id="loginForm" class="auth-box">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>EmbroiTech</h1>
     <p>Discover Beautiful Embroidery Designs</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleLogin(event)">
      <div class="form-group"><label for="loginEmail">Email Address</label> <input type="email" id="loginEmail" required placeholder="admin@embroitech.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="loginPassword">Password</label> <input type="password" id="loginPassword" required placeholder="admin123" autocomplete="current-password">
      </div><button type="submit" class="btn btn-primary" id="loginBtn"> üîê Sign In </button>
     </form>
     <p style="margin-top: 20px; font-size: 13px; color: #718096; text-align: center;">Demo: admin@embroitech.com / admin123</p>
    </div>
    <div class="auth-footer">
     <p>Don't have an account? <a onclick="showSignup()">Create Account</a></p>
    </div>
   </div><!-- Signup Form -->
   <div id="signupForm" class="auth-box" style="display: none;">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>Create Account</h1>
     <p>Join EmbroiTech Today</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleSignup(event)">
      <div class="form-group"><label for="signupFullName">Full Name</label> <input type="text" id="signupFullName" required placeholder="John Doe" autocomplete="name">
      </div>
      <div class="form-group"><label for="signupEmail">Email Address</label> <input type="email" id="signupEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" required placeholder="Create a strong password" autocomplete="new-password">
      </div><button type="submit" class="btn btn-primary" id="signupBtn"> ‚ú® Create Account </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Already have an account? <a onclick="showLogin()">Sign In</a></p>
    </div>
   </div>
  </div><!-- Main Application (Hidden initially) -->
  <div id="mainApp" class="container" style="display: none;"><!-- Header -->
   <header style="background: white; padding: 24px 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.12); margin-bottom: 28px;">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
     <div style="display: flex; align-items: center; gap: 16px;">
      <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);">
       ‚ú®
      </div>
      <div>
       <h1 style="font-size: 26px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 2px; font-weight: 800; letter-spacing: -0.5px;">EmbroiTech</h1>
       <p style="font-size: 13px; color: #718096; font-weight: 500;">Premium Embroidery Designs</p>
      </div>
     </div>
     <div style="flex: 1; max-width: 500px; min-width: 250px;">
      <div style="display: flex; align-items: center; background: #f7fafc; border-radius: 14px; padding: 14px 20px; gap: 12px; border: 2px solid #e2e8f0;"><span style="font-size: 20px;">üîç</span> <input type="text" id="searchInput" placeholder="Search designs..." style="border: none; background: transparent; outline: none; flex: 1; font-size: 15px;" oninput="filterProducts()">
      </div>
     </div>
     <div style="display: flex; gap: 12px; align-items: center;"><button class="btn" style="background: white; color: #e94560; border: 2px solid #e94560; position: relative;" onclick="showCart()"> üõí Cart <span id="cartBadge" style="position: absolute; top: -8px; right: -8px; background: #e94560; color: white; border-radius: 50%; width: 22px; height: 22px; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold;">0</span> </button> <button class="btn btn-primary" onclick="handleLogout()"> üö™ Logout </button>
     </div>
    </div>
    <nav style="display: flex; gap: 8px; overflow-x: auto;"><button class="btn" style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); color: white;" onclick="showAllProducts()">üè† All Designs</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Mirror Work')">ü™û Mirror Work</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Hand Embroidery')">‚úã Hand Embroidery</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Zari Work')">‚ú® Zari Work</button> <button class="btn" style="background: transparent; color: #718096;" onclick="filterByCategory('Thread Work')">üßµ Thread Work</button>
    </nav>
   </header><!-- Main Content -->
   <main style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.08); min-height: 600px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; flex-wrap: wrap; gap: 20px;">
     <h2 style="font-size: 28px; color: #2d3748; font-weight: 800;"><span id="viewTitle">All Designs</span> <span id="productCount" style="font-size: 16px; color: #718096; font-weight: 400; margin-left: 10px;">(0 items)</span></h2><button class="btn" style="background: #48bb78; color: white;" onclick="showAddProductForm()" id="addProductBtn"> ‚ûï Add Design </button>
    </div>
    <div id="productsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px;"><!-- Products will be rendered here -->
    </div>
    <div id="cartView" style="display: none;">
     <h2 style="font-size: 28px; color: #2d3748; font-weight: 800; margin-bottom: 32px;">üõí Shopping Cart</h2>
     <div id="cartItems"></div>
    </div>
   </main><!-- Footer -->
   <footer style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.08); margin-top: 28px; text-align: center;">
    <div style="display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 20px;">
     <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 28px;">
      ‚ú®
     </div>
     <h2 style="font-size: 24px; background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 800;">EmbroiTech</h2>
    </div>
    <p style="color: #718096; font-size: 14px; margin-bottom: 16px;">Your premier destination for exquisite embroidery designs</p>
    <p style="color: #a0aec0; font-size: 13px;">¬© 2024 EmbroiTech. All rights reserved. Crafted with ‚ù§Ô∏è for embroidery enthusiasts.</p>
    <div style="display: flex; justify-content: center; gap: 14px; margin-top: 24px;">
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üìò
     </div>
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üì∑
     </div>
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üê¶
     </div>
     <div style="width: 44px; height: 44px; background: #f7fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='linear-gradient(135deg, #e94560 0%, #533483 100%)'" onmouseout="this.style.background='#f7fafc'">
      üí¨
     </div>
    </div>
   </footer>
  </div><!-- Add Product Modal -->
  <div id="addProductModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.75); z-index: 1000; align-items: center; justify-content: center; padding: 20px; overflow-y: auto;">
   <div style="background: white; border-radius: 24px; padding: 40px; max-width: 600px; width: 100%; position: relative; margin: auto;"><button onclick="closeAddProductForm()" style="position: absolute; top: 20px; right: 20px; background: #f56565; color: white; border: none; width: 44px; height: 44px; border-radius: 50%; cursor: pointer; font-size: 24px; display: flex; align-items: center; justify-content: center;">√ó</button>
    <h2 style="margin-bottom: 28px; color: #2d3748; font-weight: 800;">Add New Design</h2>
    <form onsubmit="addProduct(event)">
     <div class="form-group"><label for="productName">Design Name</label> <input type="text" id="productName" required placeholder="e.g., Royal Mirror Work Pattern">
     </div>
     <div class="form-group"><label for="productCategory">Category</label> <select id="productCategory" required> <option value="">Select Category</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
     </div>
     <div class="form-group"><label for="productPrice">Price (‚Çπ)</label> <input type="number" id="productPrice" required min="0" step="0.01" placeholder="e.g., 1299">
     </div>
     <div class="form-group"><label for="productDescription">Description</label> <textarea id="productDescription" placeholder="Describe the design..."></textarea>
     </div><button type="submit" class="btn btn-primary">Add Design</button>
    </form>
   </div>
  </div>
  <div id="notification" class="notification"></div>
  <script>
    let products = [];
    let cart = [];
    let currentFilter = 'all';
    let currentUser = null;
    
    // Initialize with demo account and sample products
    function init() {
      // Create demo admin account
      const demoAdmin = {
        email: 'admin@embroitech.com',
        password: 'admin123',
        fullName: 'Admin User',
        isAdmin: true
      };
      
      localStorage.setItem('embroitech_demo_admin', JSON.stringify(demoAdmin));
      
      // Load products from localStorage or create sample products
      const savedProducts = localStorage.getItem('embroitech_products');
      if (savedProducts) {
        products = JSON.parse(savedProducts);
      } else {
        // Create sample products
        products = [
          {
            id: 1,
            name: 'Royal Bridal Mirror Work',
            category: 'Mirror Work',
            price: 2499,
            description: 'Exquisite mirror work design perfect for bridal lehengas',
            emoji: 'ü™û',
            rating: 4.9,
            reviews: 156
          },
          {
            id: 2,
            name: 'Elegant Hand Embroidery',
            category: 'Hand Embroidery',
            price: 899,
            description: 'Beautiful hand-embroidered floral pattern',
            emoji: '‚úã',
            rating: 4.7,
            reviews: 89
          },
          {
            id: 3,
            name: 'Premium Zari Work',
            category: 'Zari Work',
            price: 3299,
            description: 'Luxurious golden zari work for saree borders',
            emoji: '‚ú®',
            rating: 4.8,
            reviews: 124
          },
          {
            id: 4,
            name: 'Colorful Thread Work',
            category: 'Thread Work',
            price: 1299,
            description: 'Vibrant multi-colored thread work design',
            emoji: 'üßµ',
            rating: 4.6,
            reviews: 67
          }
        ];
        saveProducts();
      }
      
      // Load cart
      const savedCart = localStorage.getItem('embroitech_cart');
      if (savedCart) {
        cart = JSON.parse(savedCart);
        updateCartBadge();
      }
      
      // Check if user is already logged in
      const savedUser = localStorage.getItem('embroitech_current_user');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        showMainApp(currentUser);
      }
    }

    function saveProducts() {
      localStorage.setItem('embroitech_products', JSON.stringify(products));
    }

    function saveCart() {
      localStorage.setItem('embroitech_cart', JSON.stringify(cart));
      updateCartBadge();
    }

    function showLogin() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    }

    function showSignup() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value.trim().toLowerCase();
      const password = document.getElementById('loginPassword').value;
      
      const loginBtn = document.getElementById('loginBtn');
      loginBtn.disabled = true;
      loginBtn.textContent = 'üîÑ Signing in...';
      
      setTimeout(() => {
        const demoAdmin = JSON.parse(localStorage.getItem('embroitech_demo_admin'));
        
        if (email === demoAdmin.email && password === demoAdmin.password) {
          currentUser = demoAdmin;
          localStorage.setItem('embroitech_current_user', JSON.stringify(demoAdmin));
          showNotification('‚úÖ Welcome back, ' + demoAdmin.fullName + '!');
          showMainApp(demoAdmin);
        } else {
          showNotification('‚ùå Invalid email or password', 'error');
          loginBtn.disabled = false;
          loginBtn.textContent = 'üîê Sign In';
        }
      }, 500);
    }

    function handleSignup(event) {
      event.preventDefault();
      
      const fullName = document.getElementById('signupFullName').value.trim();
      const email = document.getElementById('signupEmail').value.trim().toLowerCase();
      const password = document.getElementById('signupPassword').value;
      
      const signupBtn = document.getElementById('signupBtn');
      signupBtn.disabled = true;
      signupBtn.textContent = 'üîÑ Creating account...';
      
      setTimeout(() => {
        const newUser = {
          email: email,
          password: password,
          fullName: fullName,
          isAdmin: false
        };
        
        currentUser = newUser;
        localStorage.setItem('embroitech_current_user', JSON.stringify(newUser));
        showNotification('‚úÖ Account created successfully!');
        showMainApp(newUser);
      }, 500);
    }

    function showMainApp(user) {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      // Show/hide add product button based on admin status
      if (user.isAdmin) {
        document.getElementById('addProductBtn').style.display = 'flex';
      } else {
        document.getElementById('addProductBtn').style.display = 'none';
      }
      
      renderProducts();
    }

    function handleLogout() {
      localStorage.removeItem('embroitech_current_user');
      currentUser = null;
      showNotification('üëã Logged out successfully');
      document.getElementById('authScreen').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
      showLogin();
    }

    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      let filteredProducts = products;
      
      // Apply category filter
      if (currentFilter !== 'all') {
        filteredProducts = filteredProducts.filter(p => p.category === currentFilter);
      }
      
      // Apply search filter
      if (searchTerm) {
        filteredProducts = filteredProducts.filter(p => 
          p.name.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm) ||
          p.description.toLowerCase().includes(searchTerm)
        );
      }
      
      document.getElementById('productCount').textContent = `(${filteredProducts.length} items)`;
      
      if (filteredProducts.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
            <div style="font-size: 80px; margin-bottom: 20px;">üîç</div>
            <h3 style="font-size: 24px; color: #2d3748; margin-bottom: 12px;">No designs found</h3>
            <p style="color: #718096;">Try adjusting your search or filters</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = filteredProducts.map(product => `
        <div style="background: white; border: 2px solid #f7fafc; border-radius: 20px; overflow: hidden; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='0 16px 40px rgba(233, 69, 96, 0.15)'; this.style.borderColor='#e94560'" onmouseout="this.style.transform=''; this.style.boxShadow=''; this.style.borderColor='#f7fafc'">
          <div style="width: 100%; height: 200px; background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%); display: flex; align-items: center; justify-content: center; font-size: 80px;">
            ${product.emoji}
          </div>
          <div style="padding: 24px;">
            <span style="font-size: 11px; color: #e94560; background: #fff5f7; padding: 6px 14px; border-radius: 14px; display: inline-block; margin-bottom: 12px; font-weight: 700; text-transform: uppercase;">${product.category}</span>
            <div style="font-size: 18px; font-weight: 700; color: #2d3748; margin-bottom: 12px; line-height: 1.4;">${product.name}</div>
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px; font-size: 14px;">
              <span style="color: #fbbf24;">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span style="font-weight: 600; color: #2d3748;">${product.rating}</span>
              <span style="color: #a0aec0; font-size: 13px;">(${product.reviews} reviews)</span>
            </div>
            <p style="font-size: 13px; color: #718096; margin-bottom: 14px; line-height: 1.6;">${product.description}</p>
            <div style="font-size: 26px; font-weight: 800; background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 20px;">‚Çπ${product.price.toFixed(2)}</div>
            <div style="display: flex; gap: 10px;">
              <button class="btn btn-primary" style="flex: 1; font-size: 14px; padding: 12px;" onclick="addToCart(${product.id})">
                üõí Add to Cart
              </button>
              ${currentUser && currentUser.isAdmin ? `
                <button class="btn" style="background: #f56565; color: white; padding: 12px 16px;" onclick="deleteProduct(${product.id})">
                  üóëÔ∏è
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `).join('');
    }

    function filterProducts() {
      renderProducts();
    }

    function showAllProducts() {
      currentFilter = 'all';
      document.getElementById('viewTitle').textContent = 'All Designs';
      document.getElementById('cartView').style.display = 'none';
      document.getElementById('productsGrid').style.display = 'grid';
      renderProducts();
    }

    function filterByCategory(category) {
      currentFilter = category;
      document.getElementById('viewTitle').textContent = category;
      document.getElementById('cartView').style.display = 'none';
      document.getElementById('productsGrid').style.display = 'grid';
      renderProducts();
    }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (!product) return;
      
      // Check if already in cart
      if (cart.find(item => item.id === productId)) {
        showNotification('‚ÑπÔ∏è Item already in cart!', 'error');
        return;
      }
      
      cart.push(product);
      saveCart();
      showNotification('‚úÖ Added to cart!');
    }

    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      saveCart();
      renderCart();
      showNotification('üóëÔ∏è Removed from cart');
    }

    function updateCartBadge() {
      document.getElementById('cartBadge').textContent = cart.length;
    }

    function showCart() {
      document.getElementById('productsGrid').style.display = 'none';
      document.getElementById('cartView').style.display = 'block';
      document.getElementById('viewTitle').textContent = 'Shopping Cart';
      renderCart();
    }

    function renderCart() {
      const container = document.getElementById('cartItems');
      
      if (cart.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 60px 20px;">
            <div style="font-size: 80px; margin-bottom: 20px;">üõí</div>
            <h3 style="font-size: 24px; color: #2d3748; margin-bottom: 12px;">Your cart is empty</h3>
            <p style="color: #718096; margin-bottom: 24px;">Add some beautiful designs to get started</p>
            <button class="btn btn-primary" onclick="showAllProducts()">Start Shopping</button>
          </div>
        `;
        return;
      }
      
      const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      container.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 24px;">
          ${cart.map(item => `
            <div style="display: flex; gap: 24px; padding: 24px; border: 2px solid #f7fafc; border-radius: 20px; align-items: center;">
              <div style="width: 100px; height: 100px; background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 48px; flex-shrink: 0;">
                ${item.emoji}
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 18px; margin-bottom: 6px;">${item.name}</div>
                <div style="font-size: 13px; color: #718096; margin-bottom: 10px;">${item.category}</div>
                <div style="color: #e94560; font-weight: 800; font-size: 20px;">‚Çπ${item.price.toFixed(2)}</div>
              </div>
              <button class="btn" style="background: #f56565; color: white;" onclick="removeFromCart(${item.id})">
                Remove
              </button>
            </div>
          `).join('')}
          
          <div style="background: #f7fafc; padding: 32px; border-radius: 20px; margin-top: 24px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 17px;">
              <span>Subtotal:</span>
              <span style="font-weight: 600;">‚Çπ${subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 17px;">
              <span>Shipping:</span>
              <span style="font-weight: 600;">${shipping === 0 ? 'FREE' : '‚Çπ' + shipping.toFixed(2)}</span>
            </div>
            ${shipping === 0 ? '<p style="font-size: 13px; color: #48bb78; margin-bottom: 16px;">üéâ You got free shipping!</p>' : '<p style="font-size: 13px; color: #718096; margin-bottom: 16px;">Free shipping on orders above ‚Çπ2000</p>'}
            <div style="display: flex; justify-content: space-between; font-size: 24px; font-weight: 800; color: #2d3748; padding-top: 20px; border-top: 2px solid #e2e8f0; margin-top: 16px;">
              <span>Total:</span>
              <span style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">‚Çπ${total.toFixed(2)}</span>
            </div>
          </div>
          
          <button class="btn btn-primary" style="width: 100%; font-size: 18px; padding: 18px;" onclick="checkout()">
            üí≥ Proceed to Checkout
          </button>
        </div>
      `;
    }

    function checkout() {
      showNotification('‚úÖ Order placed successfully! Thank you for shopping with us.');
      cart = [];
      saveCart();
      showAllProducts();
    }

    function showAddProductForm() {
      document.getElementById('addProductModal').style.display = 'flex';
    }

    function closeAddProductForm() {
      document.getElementById('addProductModal').style.display = 'none';
      document.getElementById('productName').value = '';
      document.getElementById('productCategory').value = '';
      document.getElementById('productPrice').value = '';
      document.getElementById('productDescription').value = '';
    }

    function addProduct(event) {
      event.preventDefault();
      
      const name = document.getElementById('productName').value.trim();
      const category = document.getElementById('productCategory').value;
      const price = parseFloat(document.getElementById('productPrice').value);
      const description = document.getElementById('productDescription').value.trim();
      
      const categoryEmojis = {
        'Mirror Work': 'ü™û',
        'Hand Embroidery': '‚úã',
        'Zari Work': '‚ú®',
        'Thread Work': 'üßµ',
        'Sequin Work': 'üíé'
      };
      
      const newProduct = {
        id: Date.now(),
        name: name,
        category: category,
        price: price,
        description: description,
        emoji: categoryEmojis[category] || 'üé®',
        rating: 4.5,
        reviews: 0
      };
      
      products.push(newProduct);
      saveProducts();
      closeAddProductForm();
      showNotification('‚úÖ Design added successfully!');
      renderProducts();
    }

    function deleteProduct(productId) {
      if (confirm('Are you sure you want to delete this design?')) {
        products = products.filter(p => p.id !== productId);
        saveProducts();
        showNotification('üóëÔ∏è Design deleted');
        renderProducts();
      }
    }

    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = 'notification active';
      if (type === 'error') {
        notification.classList.add('error');
      }
      
      setTimeout(() => {
        notification.classList.remove('active');
      }, 3000);
    }

    // Initialize on page load
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b870b1a2a08b0b',t:'MTc2MjY0MDI0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </html>
