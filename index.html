<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Premium Embroidery Marketplace</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #1a202c;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }
    
    /* Authentication Screens */
    .auth-container {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .auth-box {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 480px;
      width: 100%;
      overflow: hidden;
    }
    
    .auth-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 32px;
      text-align: center;
    }
    
    .auth-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .auth-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .auth-header p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .auth-body {
      padding: 40px 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2d3748;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s;
      background: #f7fafc;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      width: 100%;
      padding: 16px;
      font-size: 16px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: #48bb78;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #38a169;
      transform: translateY(-2px);
    }
    
    .btn-outline {
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
    }
    
    .btn-outline:hover {
      background: #667eea;
      color: white;
    }
    
    .btn-danger {
      background: #f56565;
      color: white;
    }
    
    .btn-danger:hover {
      background: #e53e3e;
    }
    
    .btn-small {
      padding: 10px 16px;
      font-size: 13px;
    }
    
    .btn-icon {
      position: relative;
    }
    
    .auth-footer {
      text-align: center;
      padding: 24px 32px;
      background: #f7fafc;
      border-top: 1px solid #e2e8f0;
    }
    
    .auth-footer p {
      color: #718096;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .password-strength {
      height: 4px;
      background: #e2e8f0;
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.3s;
      border-radius: 2px;
    }
    
    .password-strength-bar.weak {
      width: 33%;
      background: #f56565;
    }
    
    .password-strength-bar.medium {
      width: 66%;
      background: #f6ad55;
    }
    
    .password-strength-bar.strong {
      width: 100%;
      background: #48bb78;
    }
    
    /* Header Styles */
    header {
      background: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      margin-bottom: 24px;
      position: sticky;
      top: 20px;
      z-index: 100;
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 900;
      color: white;
      letter-spacing: -2px;
      position: relative;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .logo::before {
      content: 'N';
      position: absolute;
      left: 8px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .logo::after {
      content: 'S';
      position: absolute;
      right: 8px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .brand-info h1 {
      font-size: 24px;
      color: #667eea;
      margin-bottom: 2px;
    }
    
    .brand-info p {
      font-size: 13px;
      color: #718096;
    }
    
    .search-bar {
      display: flex;
      align-items: center;
      background: #f7fafc;
      border-radius: 12px;
      padding: 12px 20px;
      gap: 12px;
      width: 100%;
      border: 2px solid #e2e8f0;
      transition: all 0.3s;
    }
    
    .search-bar:focus-within {
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .search-bar input {
      border: none;
      background: transparent;
      outline: none;
      flex: 1;
      font-size: 15px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .user-menu {
      position: relative;
    }
    
    .user-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }
    
    .user-avatar:hover {
      transform: scale(1.1);
    }
    
    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      margin-top: 8px;
      min-width: 220px;
      display: none;
      z-index: 1000;
    }
    
    .user-dropdown.active {
      display: block;
    }
    
    .user-dropdown-header {
      padding: 16px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .user-dropdown-header strong {
      display: block;
      color: #2d3748;
      margin-bottom: 4px;
    }
    
    .user-dropdown-header span {
      font-size: 13px;
      color: #718096;
    }
    
    .user-dropdown-item {
      padding: 12px 16px;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #2d3748;
      font-size: 14px;
    }
    
    .user-dropdown-item:hover {
      background: #f7fafc;
    }
    
    .user-dropdown-item:last-child {
      border-top: 1px solid #e2e8f0;
      color: #f56565;
    }
    
    .badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #f56565;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      border: 2px solid white;
    }
    
    .nav-tabs {
      display: flex;
      gap: 8px;
      border-bottom: 2px solid #e2e8f0;
      padding-bottom: 8px;
      overflow-x: auto;
    }
    
    .nav-tab {
      padding: 10px 20px;
      background: transparent;
      border: none;
      font-size: 14px;
      font-weight: 600;
      color: #718096;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s;
      white-space: nowrap;
    }
    
    .nav-tab:hover {
      background: #f7fafc;
      color: #667eea;
    }
    
    .nav-tab.active {
      background: #667eea;
      color: white;
    }
    
    /* Main Layout */
    .main-layout {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 24px;
      margin-bottom: 24px;
    }
    
    .sidebar {
      background: white;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      height: fit-content;
      position: sticky;
      top: 140px;
    }
    
    .sidebar h3 {
      font-size: 18px;
      margin-bottom: 20px;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .filter-section {
      margin-bottom: 28px;
    }
    
    .filter-section label {
      display: block;
      margin-bottom: 12px;
      font-size: 14px;
      font-weight: 600;
      color: #4a5568;
    }
    
    .filter-option {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .filter-option:hover {
      background: #f7fafc;
    }
    
    .filter-option input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: #667eea;
    }
    
    .filter-option label {
      margin: 0;
      cursor: pointer;
      font-weight: 400;
      font-size: 14px;
      flex: 1;
    }
    
    .filter-count {
      font-size: 12px;
      color: #a0aec0;
      background: #f7fafc;
      padding: 2px 8px;
      border-radius: 10px;
    }
    
    .price-range {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .price-input {
      width: 100%;
      padding: 10px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
    }
    
    /* Content Area */
    .content-area {
      background: white;
      padding: 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      min-height: 600px;
    }
    
    .view-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 28px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .view-header h2 {
      font-size: 28px;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .results-count {
      font-size: 15px;
      color: #718096;
      font-weight: 400;
    }
    
    .view-controls {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .sort-select {
      padding: 10px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      background: white;
    }
    
    .view-toggle {
      display: flex;
      gap: 4px;
      background: #f7fafc;
      padding: 4px;
      border-radius: 8px;
    }
    
    .view-toggle button {
      padding: 8px 12px;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 6px;
      font-size: 18px;
      transition: all 0.2s;
    }
    
    .view-toggle button.active {
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Product Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
    }
    
    .products-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .product-card {
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }
    
    .product-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 28px rgba(0,0,0,0.15);
      border-color: #667eea;
    }
    
    .product-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #48bb78;
      color: white;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      z-index: 10;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-badge.out-of-stock {
      background: #f56565;
    }
    
    .product-badge.new {
      background: #9f7aea;
    }
    
    .wishlist-btn {
      position: absolute;
      top: 12px;
      left: 12px;
      background: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      z-index: 10;
      transition: all 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .wishlist-btn:hover {
      transform: scale(1.15);
    }
    
    .wishlist-btn.active {
      color: #f56565;
      background: #fff5f5;
    }
    
    .product-image {
      width: 100%;
      height: 240px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 72px;
      position: relative;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.05);
    }
    
    .product-info {
      padding: 20px;
    }
    
    .product-category {
      font-size: 11px;
      color: #667eea;
      background: #edf2f7;
      padding: 5px 12px;
      border-radius: 12px;
      display: inline-block;
      margin-bottom: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }
    
    .product-tag {
      font-size: 10px;
      color: #718096;
      background: #f7fafc;
      padding: 4px 10px;
      border-radius: 10px;
      font-weight: 600;
    }
    
    .product-name {
      font-size: 17px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 10px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .product-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      font-size: 14px;
    }
    
    .stars {
      color: #f6ad55;
      letter-spacing: 2px;
    }
    
    .rating-value {
      font-weight: 600;
      color: #2d3748;
    }
    
    .review-count {
      color: #a0aec0;
      font-size: 13px;
    }
    
    .product-price {
      font-size: 24px;
      font-weight: 700;
      color: #48bb78;
      margin-bottom: 16px;
    }
    
    .product-actions {
      display: flex;
      gap: 10px;
    }
    
    .product-actions .btn {
      flex: 1;
    }
    
    /* List View */
    .product-card-list {
      display: flex;
      gap: 20px;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      padding: 20px;
      transition: all 0.3s;
      background: white;
    }
    
    .product-card-list:hover {
      border-color: #667eea;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .product-card-list .product-image {
      width: 200px;
      height: 200px;
      flex-shrink: 0;
      border-radius: 12px;
    }
    
    .product-card-list .product-info {
      flex: 1;
      padding: 0;
    }
    
    /* Admin Panel */
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 28px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
    }
    
    .stat-card h3 {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .stat-card .stat-value {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    
    .stat-card .stat-label {
      font-size: 13px;
      opacity: 0.8;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 32px;
      max-width: 600px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      position: relative;
      margin: auto;
    }
    
    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #f56565;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    
    .modal-close:hover {
      transform: rotate(90deg);
      background: #e53e3e;
    }
    
    .image-upload-area {
      border: 3px dashed #cbd5e0;
      border-radius: 16px;
      padding: 48px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 20px;
      background: #f7fafc;
    }
    
    .image-upload-area:hover {
      border-color: #667eea;
      background: #edf2f7;
    }
    
    .image-upload-area.has-image {
      padding: 0;
      border: none;
      background: transparent;
    }
    
    .upload-icon {
      font-size: 56px;
      margin-bottom: 16px;
    }
    
    .image-preview {
      width: 100%;
      max-height: 350px;
      object-fit: cover;
      border-radius: 16px;
      display: none;
    }
    
    .image-preview.active {
      display: block;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 100px 20px;
      color: #718096;
    }
    
    .empty-state-icon {
      font-size: 96px;
      margin-bottom: 24px;
      opacity: 0.5;
    }
    
    .empty-state h3 {
      font-size: 24px;
      margin-bottom: 12px;
      color: #2d3748;
    }
    
    .empty-state p {
      font-size: 16px;
      margin-bottom: 24px;
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 24px;
      right: 24px;
      background: #48bb78;
      color: white;
      padding: 18px 28px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease;
      max-width: 400px;
      font-weight: 500;
    }
    
    .notification.active {
      display: block;
    }
    
    .notification.error {
      background: #f56565;
    }
    
    .notification.info {
      background: #4299e1;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 24px;
      color: #667eea;
      font-size: 16px;
      font-weight: 600;
    }
    
    .loading-spinner.active {
      display: block;
    }
    
    /* Cost Calculator */
    .calculator-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 32px;
      border-radius: 16px;
      margin-bottom: 32px;
    }
    
    .calculator-section h3 {
      font-size: 24px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }
    
    .calculator-input {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 12px;
      padding: 16px;
    }
    
    .calculator-input label {
      display: block;
      font-size: 13px;
      margin-bottom: 8px;
      opacity: 0.9;
      font-weight: 600;
    }
    
    .calculator-input input,
    .calculator-input select {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      background: white;
      color: #2d3748;
    }
    
    .cost-result {
      background: rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
    }
    
    .cost-result h4 {
      font-size: 16px;
      margin-bottom: 12px;
      opacity: 0.9;
    }
    
    .cost-result .cost-value {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .cost-breakdown {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-top: 20px;
      font-size: 14px;
    }
    
    .cost-breakdown-item {
      background: rgba(255,255,255,0.1);
      padding: 12px;
      border-radius: 8px;
    }
    
    .cost-breakdown-item strong {
      display: block;
      margin-bottom: 4px;
      font-size: 12px;
      opacity: 0.8;
    }
    
    .cost-breakdown-item span {
      font-size: 18px;
      font-weight: 700;
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        position: static;
      }
    }
    
    @media (max-width: 768px) {
      .header-top {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-bar {
        width: 100%;
        min-width: auto;
      }
      
      .header-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      
      .view-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .view-controls {
        justify-content: space-between;
      }
      
      .calculator-grid {
        grid-template-columns: 1fr;
      }
      
      .cost-breakdown {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-stats {
        grid-template-columns: 1fr;
      }
      
      .auth-box {
        margin: 0;
      }
    }
    
    /* Footer */
    footer {
      background: white;
      padding: 48px 32px 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      margin-top: 40px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 40px;
      margin-bottom: 32px;
    }
    
    .footer-brand {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .footer-logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .footer-logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 900;
      color: white;
      letter-spacing: -2px;
      position: relative;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .footer-logo::before {
      content: 'N';
      position: absolute;
      left: 10px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .footer-logo::after {
      content: 'S';
      position: absolute;
      right: 10px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .footer-brand h2 {
      font-size: 28px;
      color: #667eea;
      margin: 0;
    }
    
    .footer-brand p {
      color: #718096;
      line-height: 1.7;
      font-size: 14px;
    }
    
    .footer-section h3 {
      font-size: 16px;
      color: #2d3748;
      margin-bottom: 16px;
      font-weight: 700;
    }
    
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .footer-links a {
      color: #718096;
      text-decoration: none;
      font-size: 14px;
      transition: color 0.3s;
    }
    
    .footer-links a:hover {
      color: #667eea;
    }
    
    .footer-contact {
      display: flex;
      flex-direction: column;
      gap: 12px;
      font-size: 14px;
      color: #718096;
    }
    
    .footer-contact-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .footer-bottom {
      border-top: 2px solid #e2e8f0;
      padding-top: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .footer-bottom p {
      color: #718096;
      font-size: 14px;
      margin: 0;
    }
    
    .footer-social {
      display: flex;
      gap: 12px;
    }
    
    .social-icon {
      width: 40px;
      height: 40px;
      background: #f7fafc;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .social-icon:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transform: translateY(-3px);
    }
    
    @media (max-width: 768px) {
      .footer-content {
        grid-template-columns: 1fr;
        gap: 32px;
      }
      
      .footer-bottom {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Authentication Screen -->
  <div id="authScreen" class="auth-container"><!-- Login Form -->
   <div id="loginForm" class="auth-box">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>EmbroiTech</h1>
     <p>Discover Beautiful Embroidery Designs</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleLogin(event)">
      <div class="form-group"><label for="loginEmail">Email Address</label> <input type="email" id="loginEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="loginPassword">Password</label> <input type="password" id="loginPassword" required placeholder="Enter your password" autocomplete="current-password">
      </div><button type="submit" class="btn btn-primary" id="loginBtn"> üîê Sign In </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Don't have an account? <a onclick="showSignup()">Create Account</a></p>
    </div>
   </div><!-- Signup Form -->
   <div id="signupForm" class="auth-box" style="display: none;">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>Create Account</h1>
     <p>Join EmbroiTech Today</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleSignup(event)">
      <div class="form-group"><label for="signupFullName">Full Name</label> <input type="text" id="signupFullName" required placeholder="John Doe" autocomplete="name">
      </div>
      <div class="form-group"><label for="signupEmail">Email Address</label> <input type="email" id="signupEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="signupPhone">Phone Number</label> <input type="tel" id="signupPhone" required placeholder="+91 98765 43210" autocomplete="tel">
      </div>
      <div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" required placeholder="Create a strong password" autocomplete="new-password" oninput="checkPasswordStrength()">
       <div class="password-strength">
        <div class="password-strength-bar" id="passwordStrengthBar"></div>
       </div>
      </div>
      <div class="form-group"><label for="signupAddress">Address (Optional)</label> <textarea id="signupAddress" placeholder="Your delivery address" autocomplete="street-address"></textarea>
      </div><button type="submit" class="btn btn-primary" id="signupBtn"> ‚ú® Create Account </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Already have an account? <a onclick="showLogin()">Sign In</a></p>
    </div>
   </div>
  </div><!-- Main Application -->
  <div id="mainApp" class="container" style="display: none;"><!-- Header -->
   <header>
    <div class="header-top">
     <div class="logo-section">
      <div class="logo"></div>
      <div class="brand-info">
       <h1>EmbroiTech</h1>
       <p>Premium Embroidery Designs</p>
      </div>
     </div>
     <div class="header-actions"><button class="btn btn-outline btn-icon" onclick="showView('wishlist')"> <span>‚ù§Ô∏è</span> <span class="badge" id="wishlistCount">0</span> </button> <button class="btn btn-primary btn-icon" onclick="showView('cart')"> <span>üõí</span> <span class="badge" id="cartCount">0</span> </button>
      <div class="user-menu">
       <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">
        U
       </div>
       <div class="user-dropdown" id="userDropdown">
        <div class="user-dropdown-header"><strong id="userDisplayName">User</strong> <span id="userDisplayEmail">user@email.com</span>
        </div>
        <div class="user-dropdown-item" onclick="showView('profile')">
         üë§ My Profile
        </div>
        <div class="user-dropdown-item" onclick="showView('orders')">
         üì¶ My Orders
        </div>
        <div class="user-dropdown-item" onclick="showView('calculator')">
         üßÆ Cost Calculator
        </div>
        <div class="user-dropdown-item" onclick="showView('admin')" id="adminMenuItem" style="display: none;">
         ‚öôÔ∏è Admin Dashboard
        </div>
        <div class="user-dropdown-item" onclick="handleLogout()">
         üö™ Logout
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="position: relative; width: 100%; margin-bottom: 16px;">
     <div class="search-bar"><span style="font-size: 20px;">üîç</span> <input type="text" id="mainSearch" placeholder="Search designs: mirror work, kurti, choli, ghagra, bridal..." oninput="handleSearch()">
     </div>
    </div>
    <nav class="nav-tabs"><button class="nav-tab active" onclick="showView('browse')">üè† Home</button> <button class="nav-tab" onclick="showView('calculator')">üßÆ Cost Calculator</button> <button class="nav-tab" onclick="showView('categories')">üìÇ Categories</button> <button class="nav-tab" onclick="showView('trending')">üî• Trending</button> <button class="nav-tab" onclick="showView('new')">‚ú® New Arrivals</button>
    </nav>
   </header><!-- Main Layout -->
   <div class="main-layout"><!-- Sidebar Filters -->
    <aside class="sidebar" id="filterSidebar">
     <h3>üéØ Filters</h3>
     <div class="filter-section"><label>Category</label>
      <div class="filter-option"><input type="checkbox" id="filterMirror" value="Mirror Work" onchange="applyFilters()"> <label for="filterMirror">Mirror Work</label> <span class="filter-count" id="countMirror">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterHand" value="Hand Embroidery" onchange="applyFilters()"> <label for="filterHand">Hand Embroidery</label> <span class="filter-count" id="countHand">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterZari" value="Zari Work" onchange="applyFilters()"> <label for="filterZari">Zari Work</label> <span class="filter-count" id="countZari">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterThread" value="Thread Work" onchange="applyFilters()"> <label for="filterThread">Thread Work</label> <span class="filter-count" id="countThread">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterSequin" value="Sequin Work" onchange="applyFilters()"> <label for="filterSequin">Sequin Work</label> <span class="filter-count" id="countSequin">0</span>
      </div>
     </div>
     <div class="filter-section"><label>Price Range (‚Çπ)</label>
      <div class="price-range"><input type="number" class="price-input" id="minPrice" placeholder="Min" oninput="applyFilters()"> <span>-</span> <input type="number" class="price-input" id="maxPrice" placeholder="Max" oninput="applyFilters()">
      </div>
     </div>
     <div class="filter-section"><label>Rating</label>
      <div class="filter-option"><input type="checkbox" id="rating5" value="5" onchange="applyFilters()"> <label for="rating5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 Stars</label>
      </div>
      <div class="filter-option"><input type="checkbox" id="rating4" value="4" onchange="applyFilters()"> <label for="rating4">‚≠ê‚≠ê‚≠ê‚≠ê 4+ Stars</label>
      </div>
      <div class="filter-option"><input type="checkbox" id="rating3" value="3" onchange="applyFilters()"> <label for="rating3">‚≠ê‚≠ê‚≠ê 3+ Stars</label>
      </div>
     </div>
     <div class="filter-section"><label>Availability</label>
      <div class="filter-option"><input type="checkbox" id="inStockOnly" onchange="applyFilters()"> <label for="inStockOnly">In Stock Only</label>
      </div>
     </div><button class="btn btn-outline" style="width: 100%; margin-top: 16px;" onclick="clearFilters()"> Clear All Filters </button>
    </aside><!-- Main Content Area -->
    <main class="content-area"><!-- Browse View -->
     <div id="browseView" class="view-content">
      <div class="view-header">
       <div>
        <h2>‚ú® All Designs <span class="results-count" id="resultsCount">(0 items)</span></h2>
       </div>
       <div class="view-controls"><select class="sort-select" id="sortSelect" onchange="applyFilters()"> <option value="newest">Newest First</option> <option value="price-low">Price: Low to High</option> <option value="price-high">Price: High to Low</option> <option value="rating">Highest Rated</option> <option value="popular">Most Popular</option> </select>
        <div class="view-toggle"><button class="active" onclick="setViewMode('grid')" id="gridViewBtn">‚äû</button> <button onclick="setViewMode('list')" id="listViewBtn">‚ò∞</button>
        </div>
       </div>
      </div>
      <div class="products-grid" id="productsGrid">
       <div class="empty-state">
        <div class="empty-state-icon">
         üé®
        </div>
        <h3>No designs available yet</h3>
        <p>Be the first to upload beautiful embroidery designs!</p>
       </div>
      </div>
     </div><!-- Cost Calculator View -->
     <div id="calculatorView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üßÆ Design Cost Calculator</h2>
      </div>
      <div class="calculator-section">
       <h3>üí∞ Calculate Your Design Cost</h3>
       <p style="opacity: 0.9; margin-bottom: 24px;">Enter the details of your embroidery design to estimate the cost and time required.</p>
       <div class="calculator-grid">
        <div class="calculator-input"><label>Design Type</label> <select id="calcDesignType" onchange="calculateCost()"> <option value="mirror">Mirror Work</option> <option value="hand">Hand Embroidery</option> <option value="zari">Zari Work</option> <option value="thread">Thread Work</option> <option value="sequin">Sequin Work</option> </select>
        </div>
        <div class="calculator-input"><label>Design Size (sq. inches)</label> <input type="number" id="calcSize" value="100" min="1" oninput="calculateCost()" placeholder="e.g., 100">
        </div>
        <div class="calculator-input"><label>Complexity Level</label> <select id="calcComplexity" onchange="calculateCost()"> <option value="simple">Simple</option> <option value="medium">Medium</option> <option value="complex">Complex</option> <option value="intricate">Intricate</option> </select>
        </div>
        <div class="calculator-input"><label>Number of Colors</label> <input type="number" id="calcColors" value="3" min="1" max="20" oninput="calculateCost()" placeholder="e.g., 3">
        </div>
        <div class="calculator-input"><label>Material Quality</label> <select id="calcMaterial" onchange="calculateCost()"> <option value="standard">Standard</option> <option value="premium">Premium</option> <option value="luxury">Luxury</option> </select>
        </div>
        <div class="calculator-input"><label>Quantity</label> <input type="number" id="calcQuantity" value="1" min="1" oninput="calculateCost()" placeholder="e.g., 1">
        </div>
       </div>
       <div class="cost-result">
        <h4>Estimated Total Cost</h4>
        <div class="cost-value">
         ‚Çπ<span id="totalCost">0</span>
        </div>
        <p style="opacity: 0.9; font-size: 14px;">Per piece: ‚Çπ<span id="perPieceCost">0</span></p>
        <div class="cost-breakdown">
         <div class="cost-breakdown-item"><strong>‚è±Ô∏è Time Required</strong> <span id="timeRequired">0 hrs</span>
         </div>
         <div class="cost-breakdown-item"><strong>üßµ Material Cost</strong> <span>‚Çπ<span id="materialCost">0</span></span>
         </div>
         <div class="cost-breakdown-item"><strong>üë®‚Äçüé® Labor Cost</strong> <span>‚Çπ<span id="laborCost">0</span></span>
         </div>
        </div>
       </div>
      </div>
      <div style="background: #f7fafc; padding: 24px; border-radius: 16px; margin-top: 24px;">
       <h3 style="color: #2d3748; margin-bottom: 16px; font-size: 20px;">üìä Cost Breakdown Details</h3>
       <div style="display: grid; gap: 12px; color: #4a5568; font-size: 15px; line-height: 1.8;">
        <p><strong>Design Type:</strong> Different embroidery types have varying complexity and material costs.</p>
        <p><strong>Size:</strong> Larger designs require more materials and time.</p>
        <p><strong>Complexity:</strong> Intricate patterns take longer and require skilled artisans.</p>
        <p><strong>Colors:</strong> More colors mean more thread changes and precision work.</p>
        <p><strong>Material Quality:</strong> Premium materials increase the overall cost but ensure better durability.</p>
        <p><strong>Quantity:</strong> Bulk orders may qualify for discounts (applied automatically).</p>
       </div>
      </div>
     </div><!-- Categories View -->
     <div id="categoriesView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üìÇ Browse by Category</h2>
      </div>
      <div class="products-grid" id="categoriesGrid"></div>
     </div><!-- Trending View -->
     <div id="trendingView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üî• Trending Designs</h2>
      </div>
      <div class="products-grid" id="trendingGrid"></div>
     </div><!-- New Arrivals View -->
     <div id="newView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>‚ú® New Arrivals</h2>
      </div>
      <div class="products-grid" id="newGrid"></div>
     </div><!-- Wishlist View -->
     <div id="wishlistView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>‚ù§Ô∏è My Wishlist</h2>
      </div>
      <div class="products-grid" id="wishlistGrid"></div>
     </div><!-- Cart View -->
     <div id="cartView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üõí Shopping Cart</h2>
      </div>
      <div id="cartContent"></div>
     </div><!-- Profile View -->
     <div id="profileView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üë§ My Profile</h2>
      </div>
      <div style="max-width: 600px;">
       <form onsubmit="updateProfile(event)">
        <div class="form-group"><label for="profileName">Full Name</label> <input type="text" id="profileName" required>
        </div>
        <div class="form-group"><label for="profileEmail">Email</label> <input type="email" id="profileEmail" disabled>
        </div>
        <div class="form-group"><label for="profilePhone">Phone</label> <input type="tel" id="profilePhone" required>
        </div>
        <div class="form-group"><label for="profileAddress">Address</label> <textarea id="profileAddress"></textarea>
        </div><button type="submit" class="btn btn-primary">Update Profile</button>
       </form>
      </div>
     </div><!-- Orders View -->
     <div id="ordersView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üì¶ My Orders</h2>
      </div>
      <div id="ordersContent"></div>
     </div><!-- Admin View -->
     <div id="adminView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>‚öôÔ∏è Admin Dashboard</h2><button class="btn btn-secondary" onclick="openUploadModal()"> ‚ûï Upload Design </button>
      </div>
      <div class="admin-stats">
       <div class="stat-card">
        <h3>Total Designs</h3>
        <div class="stat-value" id="totalDesigns">
         0
        </div>
        <div class="stat-label">
         Uploaded designs
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
        <h3>In Stock</h3>
        <div class="stat-value" id="inStockCount">
         0
        </div>
        <div class="stat-label">
         Available items
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
        <h3>Categories</h3>
        <div class="stat-value" id="categoriesCount">
         5
        </div>
        <div class="stat-label">
         Design types
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);">
        <h3>Total Users</h3>
        <div class="stat-value" id="totalUsers">
         0
        </div>
        <div class="stat-label">
         Registered users
        </div>
       </div>
      </div><!-- Analytics Section -->
      <div style="background: white; padding: 32px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 24px;">
       <h3 style="font-size: 24px; color: #2d3748; margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">üìä Website Analytics</h3>
       <div class="admin-stats" style="margin-bottom: 32px;">
        <div class="stat-card" style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);">
         <h3>Total Searches</h3>
         <div class="stat-value" id="totalSearches">
          0
         </div>
         <div class="stat-label">
          Search queries
         </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
         <h3>Total Purchases</h3>
         <div class="stat-value" id="totalPurchases">
          0
         </div>
         <div class="stat-label">
          Completed orders
         </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
         <h3>Items in Carts</h3>
         <div class="stat-value" id="totalCartItems">
          0
         </div>
         <div class="stat-label">
          Across all users
         </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);">
         <h3>Revenue</h3>
         <div class="stat-value">
          ‚Çπ<span id="totalRevenue">0</span>
         </div>
         <div class="stat-label">
          Total earnings
         </div>
        </div>
       </div><!-- Top Searches -->
       <div style="margin-bottom: 32px;">
        <h4 style="font-size: 18px; color: #2d3748; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">üîç Top Search Terms</h4>
        <div id="topSearches" style="background: #f7fafc; padding: 20px; border-radius: 12px;"></div>
       </div><!-- Popular Products -->
       <div style="margin-bottom: 32px;">
        <h4 style="font-size: 18px; color: #2d3748; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">üî• Most Added to Cart</h4>
        <div id="popularProducts" style="background: #f7fafc; padding: 20px; border-radius: 12px;"></div>
       </div><!-- Recent Activity -->
       <div>
        <h4 style="font-size: 18px; color: #2d3748; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">üìà Recent Activity</h4>
        <div id="recentActivity" style="background: #f7fafc; padding: 20px; border-radius: 12px; max-height: 400px; overflow-y: auto;"></div>
       </div>
      </div>
      <h3 style="font-size: 20px; color: #2d3748; margin-bottom: 20px;">All Products</h3>
      <div class="products-grid" id="adminProductsGrid"></div>
     </div>
    </main>
   </div><!-- Footer -->
   <footer>
    <div class="footer-content">
     <div class="footer-brand">
      <div class="footer-logo-section">
       <div class="footer-logo"></div>
       <h2>EmbroiTech</h2>
      </div>
      <p>Your premier destination for exquisite embroidery designs. We bring together traditional craftsmanship and modern technology to deliver stunning patterns for all your creative needs.</p>
      <p style="margin-top: 8px;"><strong>üé® Design. Create. Inspire.</strong></p>
     </div>
     <div class="footer-section">
      <h3>Quick Links</h3>
      <div class="footer-links"><a href="#" onclick="showView('browse'); return false;">Browse Designs</a> <a href="#" onclick="showView('categories'); return false;">Categories</a> <a href="#" onclick="showView('trending'); return false;">Trending</a> <a href="#" onclick="showView('new'); return false;">New Arrivals</a> <a href="#" onclick="showView('calculator'); return false;">Cost Calculator</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Customer Care</h3>
      <div class="footer-links"><a href="#" onclick="showView('profile'); return false;">My Account</a> <a href="#" onclick="showView('orders'); return false;">Order History</a> <a href="#" onclick="showView('wishlist'); return false;">Wishlist</a> <a href="#" onclick="showView('cart'); return false;">Shopping Cart</a> <a href="#">Help &amp; Support</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Contact Us</h3>
      <div class="footer-contact">
       <div class="footer-contact-item"><span>üìß</span> <span>info@embroitech.com</span>
       </div>
       <div class="footer-contact-item"><span>üìû</span> <span>+91 98765 43210</span>
       </div>
       <div class="footer-contact-item"><span>üìç</span> <span>Mumbai, India</span>
       </div>
       <div class="footer-contact-item"><span>‚è∞</span> <span>Mon-Sat: 9AM-6PM</span>
       </div>
      </div>
     </div>
    </div>
    <div class="footer-bottom">
     <p>¬© 2024 EmbroiTech. All rights reserved. Crafted with ‚ù§Ô∏è for embroidery enthusiasts.</p>
     <div class="footer-social">
      <div class="social-icon" title="Facebook">
       üìò
      </div>
      <div class="social-icon" title="Instagram">
       üì∑
      </div>
      <div class="social-icon" title="Twitter">
       üê¶
      </div>
      <div class="social-icon" title="Pinterest">
       üìå
      </div>
      <div class="social-icon" title="WhatsApp">
       üí¨
      </div>
     </div>
    </div>
   </footer>
  </div><!-- Upload Product Modal -->
  <div id="uploadModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closeUploadModal()">√ó</button>
    <h2 style="margin-bottom: 24px; color: #2d3748;">Upload New Design</h2>
    <div class="loading-spinner" id="uploadLoading">
     ‚è≥ Uploading...
    </div>
    <form id="uploadForm" onsubmit="handleUpload(event)">
     <div class="form-group"><label>Upload Image *</label>
      <div class="image-upload-area" id="uploadArea" onclick="document.getElementById('productImage').click()">
       <div class="upload-icon">
        üì∏
       </div>
       <p style="color: #718096; font-size: 15px; font-weight: 600;">Click to select image</p>
       <p style="color: #a0aec0; font-size: 13px; margin-top: 8px;">JPG, PNG, GIF (Max 5MB)</p>
      </div><input type="file" id="productImage" accept="image/*" style="display: none;" onchange="previewImage(event)" required> <img id="imagePreview" class="image-preview" alt="Preview">
     </div>
     <div class="form-group"><label for="productName">Design Name *</label> <input type="text" id="productName" required placeholder="e.g., Royal Mirror Work Pattern">
     </div>
     <div class="form-group"><label for="productCategory">Category *</label> <select id="productCategory" required> <option value="">Select Category</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
     </div>
     <div class="form-group"><label for="productTags">Search Tags (comma separated) *</label> <input type="text" id="productTags" required placeholder="e.g., mirror, bridal, traditional, golden, kurti, choli">
      <p style="font-size: 12px; color: #718096; margin-top: 4px;">Add keywords like: mirror work, hand design, kurti, choli, ghagra, bridal, traditional</p>
     </div>
     <div class="form-group"><label for="productPrice">Price (‚Çπ) *</label> <input type="number" id="productPrice" required min="0" step="0.01" placeholder="e.g., 1299">
     </div>
     <div class="form-group"><label for="productDescription">Description</label> <textarea id="productDescription" placeholder="Describe the design, materials, and special features..."></textarea>
     </div>
     <div class="form-group"><label for="productRating">Rating (1-5)</label> <input type="number" id="productRating" min="1" max="5" step="0.1" value="4.5">
     </div>
     <div class="form-group"><label for="productReviews">Number of Reviews</label> <input type="number" id="productReviews" min="0" value="0">
     </div>
     <div class="form-group"><label style="display: flex; align-items: center; gap: 10px; cursor: pointer;"> <input type="checkbox" id="productInStock" checked style="width: 22px; height: 22px; accent-color: #667eea;"> <span>In Stock</span> </label>
     </div><button type="submit" class="btn btn-primary"> Upload Design </button>
    </form>
   </div>
  </div><!-- Payment Modal -->
  <div id="paymentModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closePaymentModal()">√ó</button>
    <h2 style="margin-bottom: 24px; color: #2d3748;">üí≥ Payment Details</h2>
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 24px; border-radius: 16px; margin-bottom: 24px; text-align: center;">
     <p style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Total Amount</p>
     <p style="font-size: 36px; font-weight: 700;">‚Çπ<span id="paymentAmount">0.00</span></p>
    </div>
    <form id="paymentForm" onsubmit="processPayment(event)">
     <div class="form-group"><label for="cardNumber">Card Number *</label> <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
     </div>
     <div class="form-group"><label for="cardName">Cardholder Name *</label> <input type="text" id="cardName" required placeholder="John Doe">
     </div>
     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
      <div class="form-group"><label for="expiryDate">Expiry Date *</label> <input type="text" id="expiryDate" required placeholder="MM/YY" maxlength="5" oninput="formatExpiryDate(this)">
      </div>
      <div class="form-group"><label for="cvv">CVV *</label> <input type="text" id="cvv" required placeholder="123" maxlength="4" pattern="\d{3,4}">
      </div>
     </div><button type="submit" class="btn btn-primary" id="paymentBtn"> üí≥ Pay Now </button>
    </form>
    <div style="background: #f7fafc; padding: 16px; border-radius: 8px; margin-top: 20px;">
     <p style="font-size: 12px; color: #718096; text-align: center;">üîí Secure payment processing. Your card details are encrypted.</p>
    </div>
   </div>
  </div>
  <div id="notification" class="notification"></div>
  <script>
    // State
    let allRecords = [];
    let currentUser = null;
    let cartItems = [];
    let wishlistItems = [];
    let currentView = 'browse';
    let viewMode = 'grid';
    let searchTimeout = null;
    
    // Activity Tracking
    function trackActivity(activityType, data) {
      const activity = {
        __backendId: 'local_' + Date.now() + '_' + Math.random(),
        id: Date.now().toString() + '_' + Math.random(),
        type: 'activity',
        activityType: activityType,
        userId: currentUser ? currentUser.email : 'guest',
        timestamp: new Date().toISOString(),
        ...data
      };
      
      allRecords.push(activity);
      saveToLocalStorage();
    }

    // Initialize
    function init() {
      loadFromLocalStorage();
      checkAuth();
      calculateCost();
    }
    
    function loadFromLocalStorage() {
      const stored = localStorage.getItem('embroitech_data');
      if (stored) {
        try {
          allRecords = JSON.parse(stored);
        } catch (error) {
          console.error("Error loading data:", error);
          allRecords = [];
        }
      }
      updateUI();
    }
    
    function saveToLocalStorage() {
      try {
        localStorage.setItem('embroitech_data', JSON.stringify(allRecords));
      } catch (error) {
        console.error("Error saving data:", error);
      }
    }

    // Authentication
    function checkAuth() {
      const savedUser = localStorage.getItem('embroitech_user');
      const rememberMe = localStorage.getItem('embroitech_remember');
      
      if (savedUser && rememberMe === 'true') {
        currentUser = JSON.parse(savedUser);
        showMainApp();
      } else {
        showAuthScreen();
      }
    }

    function showAuthScreen() {
      document.getElementById('authScreen').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
    }

    function showMainApp() {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      const initials = currentUser.fullName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
      document.getElementById('userAvatar').textContent = initials;
      document.getElementById('userDisplayName').textContent = currentUser.fullName;
      document.getElementById('userDisplayEmail').textContent = currentUser.email;
      
      if (currentUser.isAdmin) {
        document.getElementById('adminMenuItem').style.display = 'flex';
      }
      
      loadUserProfile();
      updateUI();
    }

    function showLogin() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    }

    function showSignup() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value.trim().toLowerCase();
      const password = document.getElementById('loginPassword').value;
      
      const loginBtn = document.getElementById('loginBtn');
      loginBtn.disabled = true;
      loginBtn.textContent = 'üîÑ Signing in...';
      
      const users = allRecords.filter(r => r.type === 'user');
      const user = users.find(u => u.email === email && u.password === password);
      
      setTimeout(() => {
        if (user) {
          currentUser = user;
          localStorage.setItem('embroitech_user', JSON.stringify(user));
          localStorage.setItem('embroitech_remember', 'true');
          
          // Track login
          trackActivity('login', { userId: user.email, timestamp: new Date().toISOString() });
          
          showNotification('‚úÖ Welcome back, ' + user.fullName + '!');
          showMainApp();
        } else {
          showNotification('‚ùå Invalid email or password', 'error');
          loginBtn.disabled = false;
          loginBtn.textContent = 'üîê Sign In';
        }
      }, 500);
    }

    function handleSignup(event) {
      event.preventDefault();
      
      const fullName = document.getElementById('signupFullName').value.trim();
      const email = document.getElementById('signupEmail').value.trim().toLowerCase();
      const phone = document.getElementById('signupPhone').value.trim();
      const password = document.getElementById('signupPassword').value;
      const address = document.getElementById('signupAddress').value.trim();
      
      const users = allRecords.filter(r => r.type === 'user');
      if (users.find(u => u.email === email)) {
        showNotification('‚ùå Email already registered', 'error');
        return;
      }
      
      const signupBtn = document.getElementById('signupBtn');
      signupBtn.disabled = true;
      signupBtn.textContent = 'üîÑ Creating account...';
      
      const isFirstUser = users.length === 0;
      
      const newUser = {
        __backendId: 'local_' + Date.now(),
        id: Date.now().toString(),
        type: 'user',
        username: email.split('@')[0],
        email: email,
        password: password,
        fullName: fullName,
        phone: phone,
        address: address,
        isAdmin: isFirstUser,
        createdAt: new Date().toISOString()
      };
      
      setTimeout(() => {
        allRecords.push(newUser);
        saveToLocalStorage();
        showNotification('‚úÖ Account created! ' + (isFirstUser ? 'You are the admin!' : ''));
        showLogin();
        document.getElementById('loginEmail').value = email;
        signupBtn.disabled = false;
        signupBtn.textContent = '‚ú® Create Account';
      }, 500);
    }

    function handleLogout() {
      localStorage.removeItem('embroitech_user');
      localStorage.removeItem('embroitech_remember');
      currentUser = null;
      cartItems = [];
      wishlistItems = [];
      showNotification('üëã Logged out successfully');
      showAuthScreen();
      showLogin();
    }

    function checkPasswordStrength() {
      const password = document.getElementById('signupPassword').value;
      const bar = document.getElementById('passwordStrengthBar');
      
      let strength = 0;
      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
      if (/\d/.test(password)) strength++;
      if (/[^a-zA-Z\d]/.test(password)) strength++;
      
      bar.className = 'password-strength-bar';
      if (strength <= 1) bar.classList.add('weak');
      else if (strength <= 2) bar.classList.add('medium');
      else bar.classList.add('strong');
    }

    // UI Updates
    function updateUI() {
      updateStats();
      updateCategoryCounts();
      renderProducts();
      renderCategories();
      renderTrending();
      renderNewArrivals();
      renderWishlist();
      renderCart();
      renderAdminProducts();
      renderOrders();
    }

    function updateStats() {
      const products = allRecords.filter(r => r.type === 'product');
      const users = allRecords.filter(r => r.type === 'user');
      const activities = allRecords.filter(r => r.type === 'activity');
      const orders = allRecords.filter(r => r.type === 'order');
      
      document.getElementById('totalDesigns').textContent = products.length;
      document.getElementById('inStockCount').textContent = products.filter(p => p.inStock).length;
      document.getElementById('totalUsers').textContent = users.length;
      
      // Analytics stats
      const searches = activities.filter(a => a.activityType === 'search');
      const purchases = activities.filter(a => a.activityType === 'purchase');
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      
      document.getElementById('totalSearches').textContent = searches.length;
      document.getElementById('totalPurchases').textContent = purchases.length;
      document.getElementById('totalCartItems').textContent = cartAdditions.length;
      
      const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
      document.getElementById('totalRevenue').textContent = Math.round(totalRevenue).toLocaleString('en-IN');
      
      renderAnalytics();
    }
    
    function renderAnalytics() {
      const activities = allRecords.filter(r => r.type === 'activity');
      
      // Top Searches
      const searches = activities.filter(a => a.activityType === 'search');
      const searchTerms = {};
      searches.forEach(s => {
        const term = s.searchTerm.toLowerCase();
        searchTerms[term] = (searchTerms[term] || 0) + 1;
      });
      
      const topSearches = Object.entries(searchTerms)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      const topSearchesEl = document.getElementById('topSearches');
      if (topSearches.length === 0) {
        topSearchesEl.innerHTML = '<p style="color: #718096; text-align: center;">No search data yet</p>';
      } else {
        topSearchesEl.innerHTML = topSearches.map(([term, count]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px;">
            <span style="font-weight: 600; color: #2d3748;">"${term}"</span>
            <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 12px; font-size: 13px; font-weight: 700;">${count} searches</span>
          </div>
        `).join('');
      }
      
      // Popular Products (Most Added to Cart)
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      const productCounts = {};
      cartAdditions.forEach(a => {
        const name = a.productName;
        if (!productCounts[name]) {
          productCounts[name] = { count: 0, price: a.price, category: a.category };
        }
        productCounts[name].count++;
      });
      
      const popularProducts = Object.entries(productCounts)
        .sort((a, b) => b[1].count - a[1].count)
        .slice(0, 10);
      
      const popularProductsEl = document.getElementById('popularProducts');
      if (popularProducts.length === 0) {
        popularProductsEl.innerHTML = '<p style="color: #718096; text-align: center;">No cart data yet</p>';
      } else {
        popularProductsEl.innerHTML = popularProducts.map(([name, data]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px;">
            <div>
              <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${name}</div>
              <div style="font-size: 13px; color: #718096;">${data.category} ‚Ä¢ ‚Çπ${data.price}</div>
            </div>
            <span style="background: #48bb78; color: white; padding: 4px 12px; border-radius: 12px; font-size: 13px; font-weight: 700;">${data.count} times</span>
          </div>
        `).join('');
      }
      
      // Recent Activity
      const recentActivities = activities
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .slice(0, 20);
      
      const recentActivityEl = document.getElementById('recentActivity');
      if (recentActivities.length === 0) {
        recentActivityEl.innerHTML = '<p style="color: #718096; text-align: center;">No activity yet</p>';
      } else {
        recentActivityEl.innerHTML = recentActivities.map(activity => {
          const date = new Date(activity.timestamp);
          const timeStr = date.toLocaleString('en-IN', { 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit' 
          });
          
          let icon = 'üìä';
          let text = '';
          let color = '#718096';
          
          if (activity.activityType === 'search') {
            icon = 'üîç';
            text = `Searched for "${activity.searchTerm}" (${activity.resultsCount} results)`;
            color = '#4299e1';
          } else if (activity.activityType === 'add_to_cart') {
            icon = 'üõí';
            text = `Added "${activity.productName}" to cart`;
            color = '#f6ad55';
          } else if (activity.activityType === 'purchase') {
            icon = 'üí≥';
            text = `Purchased ${activity.itemCount} items for ‚Çπ${activity.total}`;
            color = '#48bb78';
          } else if (activity.activityType === 'login') {
            icon = 'üîê';
            text = `User logged in`;
            color = '#9f7aea';
          }
          
          return `
            <div style="display: flex; gap: 12px; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px; border-left: 4px solid ${color};">
              <span style="font-size: 24px;">${icon}</span>
              <div style="flex: 1;">
                <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${text}</div>
                <div style="font-size: 12px; color: #718096;">
                  ${activity.userId} ‚Ä¢ ${timeStr}
                </div>
              </div>
            </div>
          `;
        }).join('');
      }
    }

    function updateCategoryCounts() {
      const products = allRecords.filter(r => r.type === 'product');
      const categories = ['Mirror Work', 'Hand Embroidery', 'Zari Work', 'Thread Work', 'Sequin Work'];
      
      categories.forEach(cat => {
        const count = products.filter(p => p.category === cat).length;
        const id = 'count' + cat.replace(/\s+/g, '');
        const el = document.getElementById(id);
        if (el) el.textContent = count;
      });
    }

    // Search
    function handleSearch() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const searchTerm = document.getElementById('mainSearch').value.trim();
        if (searchTerm && currentUser) {
          trackActivity('search', { 
            searchTerm: searchTerm,
            resultsCount: getFilteredProducts().length
          });
        }
        applyFilters();
      }, 300);
    }

    // Filters
    function getFilteredProducts() {
      let products = allRecords.filter(r => r.type === 'product');
      
      const searchTerm = document.getElementById('mainSearch').value.toLowerCase().trim();
      if (searchTerm) {
        products = products.filter(p => 
          p.productName.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm) ||
          (p.tags && p.tags.toLowerCase().includes(searchTerm)) ||
          (p.description && p.description.toLowerCase().includes(searchTerm))
        );
      }
      
      const categoryFilters = [];
      if (document.getElementById('filterMirror').checked) categoryFilters.push('Mirror Work');
      if (document.getElementById('filterHand').checked) categoryFilters.push('Hand Embroidery');
      if (document.getElementById('filterZari').checked) categoryFilters.push('Zari Work');
      if (document.getElementById('filterThread').checked) categoryFilters.push('Thread Work');
      if (document.getElementById('filterSequin').checked) categoryFilters.push('Sequin Work');
      
      if (categoryFilters.length > 0) {
        products = products.filter(p => categoryFilters.includes(p.category));
      }
      
      const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
      products = products.filter(p => p.price >= minPrice && p.price <= maxPrice);
      
      if (document.getElementById('rating5').checked) {
        products = products.filter(p => p.rating >= 5);
      } else if (document.getElementById('rating4').checked) {
        products = products.filter(p => p.rating >= 4);
      } else if (document.getElementById('rating3').checked) {
        products = products.filter(p => p.rating >= 3);
      }
      
      if (document.getElementById('inStockOnly').checked) {
        products = products.filter(p => p.inStock);
      }
      
      const sortBy = document.getElementById('sortSelect').value;
      if (sortBy === 'price-low') {
        products.sort((a, b) => a.price - b.price);
      } else if (sortBy === 'price-high') {
        products.sort((a, b) => b.price - a.price);
      } else if (sortBy === 'rating') {
        products.sort((a, b) => b.rating - a.rating);
      } else if (sortBy === 'popular') {
        products.sort((a, b) => b.reviews - a.reviews);
      } else {
        products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      }
      
      return products;
    }

    function applyFilters() {
      renderProducts();
    }

    function clearFilters() {
      document.getElementById('mainSearch').value = '';
      document.getElementById('filterMirror').checked = false;
      document.getElementById('filterHand').checked = false;
      document.getElementById('filterZari').checked = false;
      document.getElementById('filterThread').checked = false;
      document.getElementById('filterSequin').checked = false;
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('rating5').checked = false;
      document.getElementById('rating4').checked = false;
      document.getElementById('rating3').checked = false;
      document.getElementById('inStockOnly').checked = false;
      document.getElementById('sortSelect').value = 'newest';
      applyFilters();
    }

    // Rendering
    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const products = getFilteredProducts();
      
      document.getElementById('resultsCount').textContent = `(${products.length} items)`;
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <h3>No designs found</h3>
            <p>Try adjusting your filters or search terms</p>
            <button class="btn btn-primary" onclick="clearFilters()" style="margin-top: 20px;">Clear Filters</button>
          </div>
        `;
        return;
      }
      
      grid.className = viewMode === 'grid' ? 'products-grid' : 'products-list';
      
      grid.innerHTML = products.map(p => renderProductCard(p, viewMode === 'list')).join('');
    }

    function renderProductCard(product, isList = false) {
      const isNew = (Date.now() - new Date(product.createdAt).getTime()) < 7 * 24 * 60 * 60 * 1000;
      const tags = product.tags ? product.tags.split(',').map(t => t.trim()).slice(0, 3) : [];
      
      const cardClass = isList ? 'product-card-list' : 'product-card';
      
      return `
        <div class="${cardClass}" data-product-id="${product.__backendId}">
          ${product.inStock ? 
            (isNew ? '<div class="product-badge new">New</div>' : '<div class="product-badge">In Stock</div>') : 
            '<div class="product-badge out-of-stock">Out of Stock</div>'}
          <button class="wishlist-btn ${isInWishlist(product.__backendId) ? 'active' : ''}" onclick="toggleWishlist('${product.__backendId}')">
            ${isInWishlist(product.__backendId) ? '‚ù§Ô∏è' : 'ü§ç'}
          </button>
          <div class="product-image">
            ${product.imageData ? `<img src="${product.imageData}" alt="${product.productName}">` : getEmojiForCategory(product.category)}
          </div>
          <div class="product-info">
            <span class="product-category">${product.category}</span>
            ${tags.length > 0 ? `
              <div class="product-tags">
                ${tags.map(tag => `<span class="product-tag">#${tag}</span>`).join('')}
              </div>
            ` : ''}
            <div class="product-name">${product.productName}</div>
            <div class="product-rating">
              <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span class="rating-value">${product.rating}</span>
              <span class="review-count">(${product.reviews} reviews)</span>
            </div>
            <div class="product-price">‚Çπ${product.price.toFixed(2)}</div>
            ${product.description ? `<p style="font-size: 13px; color: #718096; margin-bottom: 12px; line-height: 1.5;">${product.description.substring(0, 100)}${product.description.length > 100 ? '...' : ''}</p>` : ''}
            <div class="product-actions">
              <button class="btn btn-primary btn-small" onclick="addToCart('${product.__backendId}')" ${!product.inStock ? 'disabled' : ''}>
                ${product.inStock ? 'üõí Add to Cart' : 'Out of Stock'}
              </button>
              ${currentUser && currentUser.isAdmin ? `
                <button class="btn btn-danger btn-small" onclick="deleteProduct('${product.__backendId}')">
                  üóëÔ∏è
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `;
    }

    function renderCategories() {
      const grid = document.getElementById('categoriesGrid');
      const categories = [
        { name: 'Mirror Work', emoji: 'ü™û', desc: 'Traditional mirror embroidery' },
        { name: 'Hand Embroidery', emoji: '‚úã', desc: 'Handcrafted designs' },
        { name: 'Zari Work', emoji: '‚ú®', desc: 'Golden zari patterns' },
        { name: 'Thread Work', emoji: 'üßµ', desc: 'Colorful thread art' },
        { name: 'Sequin Work', emoji: 'üíé', desc: 'Sparkling sequin designs' }
      ];
      
      grid.innerHTML = categories.map(cat => {
        const count = allRecords.filter(r => r.type === 'product' && r.category === cat.name).length;
        return `
          <div class="product-card" onclick="filterByCategory('${cat.name}')">
            <div class="product-image" style="font-size: 96px;">${cat.emoji}</div>
            <div class="product-info">
              <div class="product-name">${cat.name}</div>
              <p style="color: #718096; font-size: 14px; margin-bottom: 8px;">${cat.desc}</p>
              <p style="color: #667eea; font-weight: 600;">${count} designs available</p>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderTrending() {
      const grid = document.getElementById('trendingGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => b.reviews - a.reviews)
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üî•</div>
            <h3>No trending designs yet</h3>
            <p>Check back soon for popular items</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderNewArrivals() {
      const grid = document.getElementById('newGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ú®</div>
            <h3>No new arrivals yet</h3>
            <p>Be the first to upload designs</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderWishlist() {
      const grid = document.getElementById('wishlistGrid');
      const products = allRecords.filter(r => r.type === 'product' && isInWishlist(r.__backendId));
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ù§Ô∏è</div>
            <h3>Your wishlist is empty</h3>
            <p>Add designs you love to your wishlist</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 20px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderCart() {
      const container = document.getElementById('cartContent');
      
      if (cartItems.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üõí</div>
            <h3>Your cart is empty</h3>
            <p>Add some beautiful designs to get started</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 20px;">Start Shopping</button>
          </div>
        `;
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      container.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 20px;">
          ${cartItems.map(item => `
            <div style="display: flex; gap: 20px; padding: 20px; border: 2px solid #e2e8f0; border-radius: 16px; align-items: center;">
              <div style="width: 120px; height: 120px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 48px; flex-shrink: 0; overflow: hidden;">
                ${item.imageData ? `<img src="${item.imageData}" alt="${item.productName}" style="width: 100%; height: 100%; object-fit: cover;">` : getEmojiForCategory(item.category)}
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 18px; margin-bottom: 4px;">${item.productName}</div>
                <div style="font-size: 13px; color: #718096; margin-bottom: 8px;">${item.category}</div>
                <div style="color: #48bb78; font-weight: 700; font-size: 20px;">‚Çπ${item.price.toFixed(2)}</div>
              </div>
              <button class="btn btn-danger btn-small" onclick="removeFromCart('${item.__backendId}')">
                Remove
              </button>
            </div>
          `).join('')}
          
          <div style="background: #f7fafc; padding: 28px; border-radius: 16px; margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 16px;">
              <span>Subtotal:</span>
              <span style="font-weight: 600;">‚Çπ${subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 16px;">
              <span>Shipping:</span>
              <span style="font-weight: 600;">${shipping === 0 ? 'FREE' : '‚Çπ' + shipping.toFixed(2)}</span>
            </div>
            ${shipping === 0 ? '<p style="font-size: 13px; color: #48bb78; margin-bottom: 16px;">üéâ You got free shipping!</p>' : '<p style="font-size: 13px; color: #718096; margin-bottom: 16px;">Free shipping on orders above ‚Çπ2000</p>'}
            <div style="display: flex; justify-content: space-between; font-size: 24px; font-weight: 700; color: #2d3748; padding-top: 20px; border-top: 2px solid #e2e8f0; margin-top: 12px;">
              <span>Total:</span>
              <span style="color: #48bb78;">‚Çπ${total.toFixed(2)}</span>
            </div>
          </div>
          
          <button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; font-size: 18px; padding: 18px;">
            üí≥ Proceed to Checkout
          </button>
        </div>
      `;
    }

    function renderOrders() {
      const container = document.getElementById('ordersContent');
      const orders = allRecords.filter(r => r.type === 'order' && r.userId === currentUser.email);
      
      if (orders.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No orders yet</h3>
            <p>Start shopping to see your orders here</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 20px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      orders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
      
      container.innerHTML = orders.map(order => {
        let orderItems = order.items;
        if (typeof orderItems === 'string') {
          try {
            orderItems = JSON.parse(orderItems);
          } catch (e) {
            orderItems = [];
          }
        }
        
        return `
        <div style="border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 12px;">
            <div>
              <h3 style="font-size: 18px; color: #2d3748; margin-bottom: 4px;">Order #${order.id}</h3>
              <p style="font-size: 14px; color: #718096;">${new Date(order.orderDate).toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
            </div>
            <div style="background: #48bb78; color: white; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 700;">
              ‚úÖ ${order.status}
            </div>
          </div>
          
          <div style="background: #f7fafc; padding: 20px; border-radius: 12px; margin-bottom: 16px;">
            ${orderItems.map(item => `
              <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                <span style="color: #2d3748;">${item.productName}</span>
                <span style="font-weight: 600; color: #48bb78;">‚Çπ${item.price.toFixed(2)}</span>
              </div>
            `).join('')}
            <div style="border-top: 2px solid #e2e8f0; margin-top: 16px; padding-top: 16px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: #718096;">Subtotal:</span>
                <span style="font-weight: 600;">‚Çπ${order.subtotal.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: #718096;">Shipping:</span>
                <span style="font-weight: 600;">${order.shipping === 0 ? 'FREE' : '‚Çπ' + order.shipping.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 700; color: #2d3748;">
                <span>Total:</span>
                <span style="color: #48bb78;">‚Çπ${order.total.toFixed(2)}</span>
              </div>
            </div>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center; font-size: 14px; color: #718096;">
            <span>üí≥ ${order.paymentMethod}</span>
            <span>üìß Confirmation sent to ${currentUser.email}</span>
          </div>
        </div>
      `;
      }).join('');
    }

    function renderAdminProducts() {
      const grid = document.getElementById('adminProductsGrid');
      const products = allRecords.filter(r => r.type === 'product');
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No designs uploaded yet</h3>
            <p>Click "Upload Design" to add your first design</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    // View Management
    function showView(view) {
      currentView = view;
      document.querySelectorAll('.view-content').forEach(v => v.style.display = 'none');
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      
      const viewMap = {
        'browse': 'browseView',
        'calculator': 'calculatorView',
        'categories': 'categoriesView',
        'trending': 'trendingView',
        'new': 'newView',
        'wishlist': 'wishlistView',
        'cart': 'cartView',
        'profile': 'profileView',
        'orders': 'ordersView',
        'admin': 'adminView'
      };
      
      const viewId = viewMap[view];
      if (viewId) {
        document.getElementById(viewId).style.display = 'block';
      }
      
      closeUserMenu();
    }

    function setViewMode(mode) {
      viewMode = mode;
      document.getElementById('gridViewBtn').classList.toggle('active', mode === 'grid');
      document.getElementById('listViewBtn').classList.toggle('active', mode === 'list');
      renderProducts();
    }

    function filterByCategory(category) {
      clearFilters();
      const checkboxId = 'filter' + category.replace(/\s+/g, '');
      const checkbox = document.getElementById(checkboxId);
      if (checkbox) checkbox.checked = true;
      showView('browse');
      applyFilters();
    }

    // Cart & Wishlist
    function addToCart(backendId) {
      const product = allRecords.find(r => r.__backendId === backendId);
      if (!product || !product.inStock) return;
      
      if (cartItems.find(item => item.__backendId === backendId)) {
        showNotification('‚ÑπÔ∏è Item already in cart!', 'info');
        return;
      }
      
      cartItems.push(product);
      updateCartCount();
      
      // Track cart addition
      if (currentUser) {
        trackActivity('add_to_cart', {
          productId: product.id,
          productName: product.productName,
          price: product.price,
          category: product.category
        });
      }
      
      showNotification('‚úÖ Added to cart!');
    }

    function removeFromCart(backendId) {
      cartItems = cartItems.filter(item => item.__backendId !== backendId);
      updateCartCount();
      renderCart();
      showNotification('üóëÔ∏è Removed from cart');
    }

    function updateCartCount() {
      document.getElementById('cartCount').textContent = cartItems.length;
    }

    function toggleWishlist(backendId) {
      const index = wishlistItems.indexOf(backendId);
      if (index > -1) {
        wishlistItems.splice(index, 1);
        showNotification('üíî Removed from wishlist');
      } else {
        wishlistItems.push(backendId);
        showNotification('‚ù§Ô∏è Added to wishlist');
      }
      updateWishlistCount();
      renderProducts();
      renderWishlist();
    }

    function isInWishlist(backendId) {
      return wishlistItems.includes(backendId);
    }

    function updateWishlistCount() {
      document.getElementById('wishlistCount').textContent = wishlistItems.length;
    }

    // Payment Functions
    function proceedToCheckout() {
      if (cartItems.length === 0) {
        showNotification('‚ùå Your cart is empty!', 'error');
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      openPaymentModal(total);
    }
    
    function openPaymentModal(amount) {
      document.getElementById('paymentModal').classList.add('active');
      document.getElementById('paymentAmount').textContent = amount.toFixed(2);
      document.getElementById('paymentForm').reset();
    }
    
    function closePaymentModal() {
      document.getElementById('paymentModal').classList.remove('active');
    }
    
    function processPayment(event) {
      event.preventDefault();
      
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardName = document.getElementById('cardName').value;
      const expiryDate = document.getElementById('expiryDate').value;
      const cvv = document.getElementById('cvv').value;
      
      if (!validateCardNumber(cardNumber)) {
        showNotification('‚ùå Invalid card number', 'error');
        return;
      }
      
      if (!validateExpiryDate(expiryDate)) {
        showNotification('‚ùå Invalid or expired card', 'error');
        return;
      }
      
      if (cvv.length < 3) {
        showNotification('‚ùå Invalid CVV', 'error');
        return;
      }
      
      const payBtn = document.getElementById('paymentBtn');
      payBtn.disabled = true;
      payBtn.textContent = 'üîÑ Processing Payment...';
      
      setTimeout(() => {
        const orderItems = [...cartItems];
        const subtotal = orderItems.reduce((sum, item) => sum + item.price, 0);
        const shipping = subtotal > 2000 ? 0 : 50;
        const total = subtotal + shipping;
        
        const order = {
          __backendId: 'local_' + Date.now(),
          id: Date.now().toString(),
          type: 'order',
          userId: currentUser.email,
          items: orderItems.map(item => ({
            productId: item.id,
            productName: item.productName,
            price: item.price,
            category: item.category
          })),
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          paymentMethod: 'Card ending in ' + cardNumber.slice(-4),
          status: 'Confirmed',
          orderDate: new Date().toISOString()
        };
        
        allRecords.push(order);
        
        // Track purchase
        trackActivity('purchase', {
          orderId: order.id,
          itemCount: orderItems.length,
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          products: orderItems.map(item => item.productName).join(', ')
        });
        
        saveToLocalStorage();
        updateUI();
        
        payBtn.disabled = false;
        payBtn.textContent = 'üí≥ Pay Now';
        
        showNotification('‚úÖ Payment successful! Order confirmed.');
        cartItems = [];
        updateCartCount();
        closePaymentModal();
        showView('orders');
      }, 2000);
    }
    
    function validateCardNumber(cardNumber) {
      if (!/^\d{13,19}$/.test(cardNumber)) return false;
      
      let sum = 0;
      let isEven = false;
      
      for (let i = cardNumber.length - 1; i >= 0; i--) {
        let digit = parseInt(cardNumber[i]);
        
        if (isEven) {
          digit *= 2;
          if (digit > 9) digit -= 9;
        }
        
        sum += digit;
        isEven = !isEven;
      }
      
      return sum % 10 === 0;
    }
    
    function validateExpiryDate(expiry) {
      const [month, year] = expiry.split('/').map(v => parseInt(v));
      if (!month || !year || month < 1 || month > 12) return false;
      
      const now = new Date();
      const currentYear = now.getFullYear() % 100;
      const currentMonth = now.getMonth() + 1;
      
      if (year < currentYear) return false;
      if (year === currentYear && month < currentMonth) return false;
      
      return true;
    }
    
    function formatCardNumber(input) {
      let value = input.value.replace(/\s/g, '');
      let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
      input.value = formattedValue;
    }
    
    function formatExpiryDate(input) {
      let value = input.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.slice(0, 2) + '/' + value.slice(2, 4);
      }
      input.value = value;
    }

    // Cost Calculator
    function calculateCost() {
      const designType = document.getElementById('calcDesignType').value;
      const size = parseFloat(document.getElementById('calcSize').value) || 0;
      const complexity = document.getElementById('calcComplexity').value;
      const colors = parseInt(document.getElementById('calcColors').value) || 1;
      const material = document.getElementById('calcMaterial').value;
      const quantity = parseInt(document.getElementById('calcQuantity').value) || 1;
      
      // Base rates per sq inch
      const designRates = {
        mirror: 15,
        hand: 12,
        zari: 18,
        thread: 10,
        sequin: 14
      };
      
      const complexityMultiplier = {
        simple: 1,
        medium: 1.5,
        complex: 2,
        intricate: 2.5
      };
      
      const materialMultiplier = {
        standard: 1,
        premium: 1.5,
        luxury: 2
      };
      
      // Calculate base cost
      let baseCost = designRates[designType] * size;
      
      // Apply complexity
      baseCost *= complexityMultiplier[complexity];
      
      // Add color cost (‚Çπ50 per additional color)
      baseCost += (colors - 1) * 50;
      
      // Material cost (30% of base)
      const materialCost = baseCost * 0.3 * materialMultiplier[material];
      
      // Labor cost (70% of base)
      const laborCost = baseCost * 0.7;
      
      // Total per piece
      const perPieceCost = baseCost + materialCost;
      
      // Bulk discount
      let discount = 1;
      if (quantity >= 10) discount = 0.9;
      if (quantity >= 50) discount = 0.85;
      if (quantity >= 100) discount = 0.8;
      
      const totalCost = perPieceCost * quantity * discount;
      
      // Time calculation (hours)
      const baseTime = size / 20; // 20 sq inches per hour base
      const timeRequired = baseTime * complexityMultiplier[complexity] * quantity;
      
      // Update UI
      document.getElementById('totalCost').textContent = Math.round(totalCost).toLocaleString('en-IN');
      document.getElementById('perPieceCost').textContent = Math.round(perPieceCost).toLocaleString('en-IN');
      document.getElementById('materialCost').textContent = Math.round(materialCost * quantity).toLocaleString('en-IN');
      document.getElementById('laborCost').textContent = Math.round(laborCost * quantity).toLocaleString('en-IN');
      document.getElementById('timeRequired').textContent = Math.round(timeRequired) + ' hrs';
    }

    // User Menu
    function toggleUserMenu() {
      document.getElementById('userDropdown').classList.toggle('active');
    }

    function closeUserMenu() {
      document.getElementById('userDropdown').classList.remove('active');
    }

    // Profile
    function loadUserProfile() {
      if (!currentUser) return;
      
      document.getElementById('profileName').value = currentUser.fullName || '';
      document.getElementById('profileEmail').value = currentUser.email || '';
      document.getElementById('profilePhone').value = currentUser.phone || '';
      document.getElementById('profileAddress').value = currentUser.address || '';
    }

    function updateProfile(event) {
      event.preventDefault();
      
      const updatedUser = {
        ...currentUser,
        fullName: document.getElementById('profileName').value,
        phone: document.getElementById('profilePhone').value,
        address: document.getElementById('profileAddress').value
      };
      
      const index = allRecords.findIndex(r => r.__backendId === currentUser.__backendId);
      if (index !== -1) {
        allRecords[index] = updatedUser;
        saveToLocalStorage();
      }
      currentUser = updatedUser;
      localStorage.setItem('embroitech_user', JSON.stringify(updatedUser));
      document.getElementById('userDisplayName').textContent = updatedUser.fullName;
      showNotification('‚úÖ Profile updated successfully!');
    }

    // Admin Functions
    function openUploadModal() {
      document.getElementById('uploadModal').classList.add('active');
      document.getElementById('uploadForm').reset();
      document.getElementById('imagePreview').classList.remove('active');
      document.getElementById('uploadArea').classList.remove('has-image');
    }

    function closeUploadModal() {
      document.getElementById('uploadModal').classList.remove('active');
    }

    function previewImage(event) {
      const file = event.target.files[0];
      if (file) {
        if (file.size > 5 * 1024 * 1024) {
          showNotification('‚ùå Image size must be less than 5MB', 'error');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById('imagePreview');
          preview.src = e.target.result;
          preview.classList.add('active');
          document.getElementById('uploadArea').classList.add('has-image');
        };
        reader.readAsDataURL(file);
      }
    }

    function handleUpload(event) {
      event.preventDefault();
      
      const loading = document.getElementById('uploadLoading');
      loading.classList.add('active');
      
      setTimeout(() => {
        const imagePreview = document.getElementById('imagePreview');
        const imageData = imagePreview.classList.contains('active') ? imagePreview.src : '';
        
        const product = {
          __backendId: 'local_' + Date.now(),
          id: Date.now().toString(),
          type: 'product',
          productName: document.getElementById('productName').value,
          category: document.getElementById('productCategory').value,
          tags: document.getElementById('productTags').value,
          price: parseFloat(document.getElementById('productPrice').value),
          description: document.getElementById('productDescription').value,
          imageData: imageData,
          rating: parseFloat(document.getElementById('productRating').value),
          reviews: parseInt(document.getElementById('productReviews').value),
          inStock: document.getElementById('productInStock').checked,
          uploadedBy: currentUser.email,
          createdAt: new Date().toISOString()
        };
        
        allRecords.push(product);
        saveToLocalStorage();
        updateUI();
        
        loading.classList.remove('active');
        showNotification('‚úÖ Design uploaded successfully!');
        closeUploadModal();
      }, 1000);
    }

    function deleteProduct(backendId) {
      if (confirm('Are you sure you want to delete this design?')) {
        allRecords = allRecords.filter(r => r.__backendId !== backendId);
        saveToLocalStorage();
        updateUI();
        showNotification('‚úÖ Design deleted successfully!');
      }
    }

    // Utility Functions
    function getEmojiForCategory(category) {
      const emojis = {
        'Mirror Work': 'ü™û',
        'Hand Embroidery': '‚úã',
        'Zari Work': '‚ú®',
        'Thread Work': 'üßµ',
        'Sequin Work': 'üíé'
      };
      return emojis[category] || 'üé®';
    }

    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = 'notification active';
      if (type === 'error') {
        notification.classList.add('error');
      } else if (type === 'info') {
        notification.classList.add('info');
      }
      
      setTimeout(() => {
        notification.classList.remove('active');
      }, 4000);
    }

    document.addEventListener('click', function(event) {
      if (!event.target.closest('.user-menu')) {
        closeUserMenu();
      }
    });

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b837f2b5f28b0b',t:'MTc2MjYzNzkxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html><!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Premium Embroidery Marketplace</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #1a202c;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }
    
    /* Authentication Screens */
    .auth-container {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .auth-box {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 480px;
      width: 100%;
      overflow: hidden;
    }
    
    .auth-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 32px;
      text-align: center;
    }
    
    .auth-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .auth-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .auth-header p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .auth-body {
      padding: 40px 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2d3748;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s;
      background: #f7fafc;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      width: 100%;
      padding: 16px;
      font-size: 16px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: #48bb78;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #38a169;
      transform: translateY(-2px);
    }
    
    .btn-outline {
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
    }
    
    .btn-outline:hover {
      background: #667eea;
      color: white;
    }
    
    .btn-danger {
      background: #f56565;
      color: white;
    }
    
    .btn-danger:hover {
      background: #e53e3e;
    }
    
    .btn-small {
      padding: 10px 16px;
      font-size: 13px;
    }
    
    .btn-icon {
      position: relative;
    }
    
    .auth-footer {
      text-align: center;
      padding: 24px 32px;
      background: #f7fafc;
      border-top: 1px solid #e2e8f0;
    }
    
    .auth-footer p {
      color: #718096;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .password-strength {
      height: 4px;
      background: #e2e8f0;
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.3s;
      border-radius: 2px;
    }
    
    .password-strength-bar.weak {
      width: 33%;
      background: #f56565;
    }
    
    .password-strength-bar.medium {
      width: 66%;
      background: #f6ad55;
    }
    
    .password-strength-bar.strong {
      width: 100%;
      background: #48bb78;
    }
    
    /* Header Styles */
    header {
      background: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      margin-bottom: 24px;
      position: sticky;
      top: 20px;
      z-index: 100;
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 900;
      color: white;
      letter-spacing: -2px;
      position: relative;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .logo::before {
      content: 'N';
      position: absolute;
      left: 8px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .logo::after {
      content: 'S';
      position: absolute;
      right: 8px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .brand-info h1 {
      font-size: 24px;
      color: #667eea;
      margin-bottom: 2px;
    }
    
    .brand-info p {
      font-size: 13px;
      color: #718096;
    }
    
    .search-bar {
      display: flex;
      align-items: center;
      background: #f7fafc;
      border-radius: 12px;
      padding: 12px 20px;
      gap: 12px;
      width: 100%;
      border: 2px solid #e2e8f0;
      transition: all 0.3s;
    }
    
    .search-bar:focus-within {
      border-color: #667eea;
      background: white;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .search-bar input {
      border: none;
      background: transparent;
      outline: none;
      flex: 1;
      font-size: 15px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .user-menu {
      position: relative;
    }
    
    .user-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
    }
    
    .user-avatar:hover {
      transform: scale(1.1);
    }
    
    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      margin-top: 8px;
      min-width: 220px;
      display: none;
      z-index: 1000;
    }
    
    .user-dropdown.active {
      display: block;
    }
    
    .user-dropdown-header {
      padding: 16px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .user-dropdown-header strong {
      display: block;
      color: #2d3748;
      margin-bottom: 4px;
    }
    
    .user-dropdown-header span {
      font-size: 13px;
      color: #718096;
    }
    
    .user-dropdown-item {
      padding: 12px 16px;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #2d3748;
      font-size: 14px;
    }
    
    .user-dropdown-item:hover {
      background: #f7fafc;
    }
    
    .user-dropdown-item:last-child {
      border-top: 1px solid #e2e8f0;
      color: #f56565;
    }
    
    .badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #f56565;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      border: 2px solid white;
    }
    
    .nav-tabs {
      display: flex;
      gap: 8px;
      border-bottom: 2px solid #e2e8f0;
      padding-bottom: 8px;
      overflow-x: auto;
    }
    
    .nav-tab {
      padding: 10px 20px;
      background: transparent;
      border: none;
      font-size: 14px;
      font-weight: 600;
      color: #718096;
      cursor: pointer;
      border-radius: 8px;
      transition: all 0.3s;
      white-space: nowrap;
    }
    
    .nav-tab:hover {
      background: #f7fafc;
      color: #667eea;
    }
    
    .nav-tab.active {
      background: #667eea;
      color: white;
    }
    
    /* Main Layout */
    .main-layout {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 24px;
      margin-bottom: 24px;
    }
    
    .sidebar {
      background: white;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      height: fit-content;
      position: sticky;
      top: 140px;
    }
    
    .sidebar h3 {
      font-size: 18px;
      margin-bottom: 20px;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .filter-section {
      margin-bottom: 28px;
    }
    
    .filter-section label {
      display: block;
      margin-bottom: 12px;
      font-size: 14px;
      font-weight: 600;
      color: #4a5568;
    }
    
    .filter-option {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .filter-option:hover {
      background: #f7fafc;
    }
    
    .filter-option input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: #667eea;
    }
    
    .filter-option label {
      margin: 0;
      cursor: pointer;
      font-weight: 400;
      font-size: 14px;
      flex: 1;
    }
    
    .filter-count {
      font-size: 12px;
      color: #a0aec0;
      background: #f7fafc;
      padding: 2px 8px;
      border-radius: 10px;
    }
    
    .price-range {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .price-input {
      width: 100%;
      padding: 10px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
    }
    
    /* Content Area */
    .content-area {
      background: white;
      padding: 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      min-height: 600px;
    }
    
    .view-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 28px;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .view-header h2 {
      font-size: 28px;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .results-count {
      font-size: 15px;
      color: #718096;
      font-weight: 400;
    }
    
    .view-controls {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .sort-select {
      padding: 10px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      background: white;
    }
    
    .view-toggle {
      display: flex;
      gap: 4px;
      background: #f7fafc;
      padding: 4px;
      border-radius: 8px;
    }
    
    .view-toggle button {
      padding: 8px 12px;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 6px;
      font-size: 18px;
      transition: all 0.2s;
    }
    
    .view-toggle button.active {
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* Product Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
    }
    
    .products-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .product-card {
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }
    
    .product-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 28px rgba(0,0,0,0.15);
      border-color: #667eea;
    }
    
    .product-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: #48bb78;
      color: white;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      z-index: 10;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-badge.out-of-stock {
      background: #f56565;
    }
    
    .product-badge.new {
      background: #9f7aea;
    }
    
    .wishlist-btn {
      position: absolute;
      top: 12px;
      left: 12px;
      background: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      z-index: 10;
      transition: all 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .wishlist-btn:hover {
      transform: scale(1.15);
    }
    
    .wishlist-btn.active {
      color: #f56565;
      background: #fff5f5;
    }
    
    .product-image {
      width: 100%;
      height: 240px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 72px;
      position: relative;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.05);
    }
    
    .product-info {
      padding: 20px;
    }
    
    .product-category {
      font-size: 11px;
      color: #667eea;
      background: #edf2f7;
      padding: 5px 12px;
      border-radius: 12px;
      display: inline-block;
      margin-bottom: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }
    
    .product-tag {
      font-size: 10px;
      color: #718096;
      background: #f7fafc;
      padding: 4px 10px;
      border-radius: 10px;
      font-weight: 600;
    }
    
    .product-name {
      font-size: 17px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 10px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .product-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      font-size: 14px;
    }
    
    .stars {
      color: #f6ad55;
      letter-spacing: 2px;
    }
    
    .rating-value {
      font-weight: 600;
      color: #2d3748;
    }
    
    .review-count {
      color: #a0aec0;
      font-size: 13px;
    }
    
    .product-price {
      font-size: 24px;
      font-weight: 700;
      color: #48bb78;
      margin-bottom: 16px;
    }
    
    .product-actions {
      display: flex;
      gap: 10px;
    }
    
    .product-actions .btn {
      flex: 1;
    }
    
    /* List View */
    .product-card-list {
      display: flex;
      gap: 20px;
      border: 2px solid #e2e8f0;
      border-radius: 16px;
      padding: 20px;
      transition: all 0.3s;
      background: white;
    }
    
    .product-card-list:hover {
      border-color: #667eea;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .product-card-list .product-image {
      width: 200px;
      height: 200px;
      flex-shrink: 0;
      border-radius: 12px;
    }
    
    .product-card-list .product-info {
      flex: 1;
      padding: 0;
    }
    
    /* Admin Panel */
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 28px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-4px);
    }
    
    .stat-card h3 {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .stat-card .stat-value {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    
    .stat-card .stat-label {
      font-size: 13px;
      opacity: 0.8;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 32px;
      max-width: 600px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      position: relative;
      margin: auto;
    }
    
    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #f56565;
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    
    .modal-close:hover {
      transform: rotate(90deg);
      background: #e53e3e;
    }
    
    .image-upload-area {
      border: 3px dashed #cbd5e0;
      border-radius: 16px;
      padding: 48px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 20px;
      background: #f7fafc;
    }
    
    .image-upload-area:hover {
      border-color: #667eea;
      background: #edf2f7;
    }
    
    .image-upload-area.has-image {
      padding: 0;
      border: none;
      background: transparent;
    }
    
    .upload-icon {
      font-size: 56px;
      margin-bottom: 16px;
    }
    
    .image-preview {
      width: 100%;
      max-height: 350px;
      object-fit: cover;
      border-radius: 16px;
      display: none;
    }
    
    .image-preview.active {
      display: block;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 100px 20px;
      color: #718096;
    }
    
    .empty-state-icon {
      font-size: 96px;
      margin-bottom: 24px;
      opacity: 0.5;
    }
    
    .empty-state h3 {
      font-size: 24px;
      margin-bottom: 12px;
      color: #2d3748;
    }
    
    .empty-state p {
      font-size: 16px;
      margin-bottom: 24px;
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 24px;
      right: 24px;
      background: #48bb78;
      color: white;
      padding: 18px 28px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease;
      max-width: 400px;
      font-weight: 500;
    }
    
    .notification.active {
      display: block;
    }
    
    .notification.error {
      background: #f56565;
    }
    
    .notification.info {
      background: #4299e1;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 24px;
      color: #667eea;
      font-size: 16px;
      font-weight: 600;
    }
    
    .loading-spinner.active {
      display: block;
    }
    
    /* Cost Calculator */
    .calculator-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 32px;
      border-radius: 16px;
      margin-bottom: 32px;
    }
    
    .calculator-section h3 {
      font-size: 24px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }
    
    .calculator-input {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 12px;
      padding: 16px;
    }
    
    .calculator-input label {
      display: block;
      font-size: 13px;
      margin-bottom: 8px;
      opacity: 0.9;
      font-weight: 600;
    }
    
    .calculator-input input,
    .calculator-input select {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      background: white;
      color: #2d3748;
    }
    
    .cost-result {
      background: rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 24px;
      text-align: center;
    }
    
    .cost-result h4 {
      font-size: 16px;
      margin-bottom: 12px;
      opacity: 0.9;
    }
    
    .cost-result .cost-value {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .cost-breakdown {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-top: 20px;
      font-size: 14px;
    }
    
    .cost-breakdown-item {
      background: rgba(255,255,255,0.1);
      padding: 12px;
      border-radius: 8px;
    }
    
    .cost-breakdown-item strong {
      display: block;
      margin-bottom: 4px;
      font-size: 12px;
      opacity: 0.8;
    }
    
    .cost-breakdown-item span {
      font-size: 18px;
      font-weight: 700;
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .main-layout {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        position: static;
      }
    }
    
    @media (max-width: 768px) {
      .header-top {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-bar {
        width: 100%;
        min-width: auto;
      }
      
      .header-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      }
      
      .view-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .view-controls {
        justify-content: space-between;
      }
      
      .calculator-grid {
        grid-template-columns: 1fr;
      }
      
      .cost-breakdown {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-stats {
        grid-template-columns: 1fr;
      }
      
      .auth-box {
        margin: 0;
      }
    }
    
    /* Footer */
    footer {
      background: white;
      padding: 48px 32px 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      margin-top: 40px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 40px;
      margin-bottom: 32px;
    }
    
    .footer-brand {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    
    .footer-logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .footer-logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 900;
      color: white;
      letter-spacing: -2px;
      position: relative;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .footer-logo::before {
      content: 'N';
      position: absolute;
      left: 10px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .footer-logo::after {
      content: 'S';
      position: absolute;
      right: 10px;
      font-family: 'Georgia', serif;
      font-style: italic;
    }
    
    .footer-brand h2 {
      font-size: 28px;
      color: #667eea;
      margin: 0;
    }
    
    .footer-brand p {
      color: #718096;
      line-height: 1.7;
      font-size: 14px;
    }
    
    .footer-section h3 {
      font-size: 16px;
      color: #2d3748;
      margin-bottom: 16px;
      font-weight: 700;
    }
    
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .footer-links a {
      color: #718096;
      text-decoration: none;
      font-size: 14px;
      transition: color 0.3s;
    }
    
    .footer-links a:hover {
      color: #667eea;
    }
    
    .footer-contact {
      display: flex;
      flex-direction: column;
      gap: 12px;
      font-size: 14px;
      color: #718096;
    }
    
    .footer-contact-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .footer-bottom {
      border-top: 2px solid #e2e8f0;
      padding-top: 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 16px;
    }
    
    .footer-bottom p {
      color: #718096;
      font-size: 14px;
      margin: 0;
    }
    
    .footer-social {
      display: flex;
      gap: 12px;
    }
    
    .social-icon {
      width: 40px;
      height: 40px;
      background: #f7fafc;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .social-icon:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transform: translateY(-3px);
    }
    
    @media (max-width: 768px) {
      .footer-content {
        grid-template-columns: 1fr;
        gap: 32px;
      }
      
      .footer-bottom {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Authentication Screen -->
  <div id="authScreen" class="auth-container"><!-- Login Form -->
   <div id="loginForm" class="auth-box">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>EmbroiTech</h1>
     <p>Discover Beautiful Embroidery Designs</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleLogin(event)">
      <div class="form-group"><label for="loginEmail">Email Address</label> <input type="email" id="loginEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="loginPassword">Password</label> <input type="password" id="loginPassword" required placeholder="Enter your password" autocomplete="current-password">
      </div><button type="submit" class="btn btn-primary" id="loginBtn"> üîê Sign In </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Don't have an account? <a onclick="showSignup()">Create Account</a></p>
    </div>
   </div><!-- Signup Form -->
   <div id="signupForm" class="auth-box" style="display: none;">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>Create Account</h1>
     <p>Join EmbroiTech Today</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleSignup(event)">
      <div class="form-group"><label for="signupFullName">Full Name</label> <input type="text" id="signupFullName" required placeholder="John Doe" autocomplete="name">
      </div>
      <div class="form-group"><label for="signupEmail">Email Address</label> <input type="email" id="signupEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="signupPhone">Phone Number</label> <input type="tel" id="signupPhone" required placeholder="+91 98765 43210" autocomplete="tel">
      </div>
      <div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" required placeholder="Create a strong password" autocomplete="new-password" oninput="checkPasswordStrength()">
       <div class="password-strength">
        <div class="password-strength-bar" id="passwordStrengthBar"></div>
       </div>
      </div>
      <div class="form-group"><label for="signupAddress">Address (Optional)</label> <textarea id="signupAddress" placeholder="Your delivery address" autocomplete="street-address"></textarea>
      </div><button type="submit" class="btn btn-primary" id="signupBtn"> ‚ú® Create Account </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Already have an account? <a onclick="showLogin()">Sign In</a></p>
    </div>
   </div>
  </div><!-- Main Application -->
  <div id="mainApp" class="container" style="display: none;"><!-- Header -->
   <header>
    <div class="header-top">
     <div class="logo-section">
      <div class="logo"></div>
      <div class="brand-info">
       <h1>EmbroiTech</h1>
       <p>Premium Embroidery Designs</p>
      </div>
     </div>
     <div class="header-actions"><button class="btn btn-outline btn-icon" onclick="showView('wishlist')"> <span>‚ù§Ô∏è</span> <span class="badge" id="wishlistCount">0</span> </button> <button class="btn btn-primary btn-icon" onclick="showView('cart')"> <span>üõí</span> <span class="badge" id="cartCount">0</span> </button>
      <div class="user-menu">
       <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">
        U
       </div>
       <div class="user-dropdown" id="userDropdown">
        <div class="user-dropdown-header"><strong id="userDisplayName">User</strong> <span id="userDisplayEmail">user@email.com</span>
        </div>
        <div class="user-dropdown-item" onclick="showView('profile')">
         üë§ My Profile
        </div>
        <div class="user-dropdown-item" onclick="showView('orders')">
         üì¶ My Orders
        </div>
        <div class="user-dropdown-item" onclick="showView('calculator')">
         üßÆ Cost Calculator
        </div>
        <div class="user-dropdown-item" onclick="showView('admin')" id="adminMenuItem" style="display: none;">
         ‚öôÔ∏è Admin Dashboard
        </div>
        <div class="user-dropdown-item" onclick="handleLogout()">
         üö™ Logout
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="position: relative; width: 100%; margin-bottom: 16px;">
     <div class="search-bar"><span style="font-size: 20px;">üîç</span> <input type="text" id="mainSearch" placeholder="Search designs: mirror work, kurti, choli, ghagra, bridal..." oninput="handleSearch()">
     </div>
    </div>
    <nav class="nav-tabs"><button class="nav-tab active" onclick="showView('browse')">üè† Home</button> <button class="nav-tab" onclick="showView('calculator')">üßÆ Cost Calculator</button> <button class="nav-tab" onclick="showView('categories')">üìÇ Categories</button> <button class="nav-tab" onclick="showView('trending')">üî• Trending</button> <button class="nav-tab" onclick="showView('new')">‚ú® New Arrivals</button>
    </nav>
   </header><!-- Main Layout -->
   <div class="main-layout"><!-- Sidebar Filters -->
    <aside class="sidebar" id="filterSidebar">
     <h3>üéØ Filters</h3>
     <div class="filter-section"><label>Category</label>
      <div class="filter-option"><input type="checkbox" id="filterMirror" value="Mirror Work" onchange="applyFilters()"> <label for="filterMirror">Mirror Work</label> <span class="filter-count" id="countMirror">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterHand" value="Hand Embroidery" onchange="applyFilters()"> <label for="filterHand">Hand Embroidery</label> <span class="filter-count" id="countHand">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterZari" value="Zari Work" onchange="applyFilters()"> <label for="filterZari">Zari Work</label> <span class="filter-count" id="countZari">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterThread" value="Thread Work" onchange="applyFilters()"> <label for="filterThread">Thread Work</label> <span class="filter-count" id="countThread">0</span>
      </div>
      <div class="filter-option"><input type="checkbox" id="filterSequin" value="Sequin Work" onchange="applyFilters()"> <label for="filterSequin">Sequin Work</label> <span class="filter-count" id="countSequin">0</span>
      </div>
     </div>
     <div class="filter-section"><label>Price Range (‚Çπ)</label>
      <div class="price-range"><input type="number" class="price-input" id="minPrice" placeholder="Min" oninput="applyFilters()"> <span>-</span> <input type="number" class="price-input" id="maxPrice" placeholder="Max" oninput="applyFilters()">
      </div>
     </div>
     <div class="filter-section"><label>Rating</label>
      <div class="filter-option"><input type="checkbox" id="rating5" value="5" onchange="applyFilters()"> <label for="rating5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 Stars</label>
      </div>
      <div class="filter-option"><input type="checkbox" id="rating4" value="4" onchange="applyFilters()"> <label for="rating4">‚≠ê‚≠ê‚≠ê‚≠ê 4+ Stars</label>
      </div>
      <div class="filter-option"><input type="checkbox" id="rating3" value="3" onchange="applyFilters()"> <label for="rating3">‚≠ê‚≠ê‚≠ê 3+ Stars</label>
      </div>
     </div>
     <div class="filter-section"><label>Availability</label>
      <div class="filter-option"><input type="checkbox" id="inStockOnly" onchange="applyFilters()"> <label for="inStockOnly">In Stock Only</label>
      </div>
     </div><button class="btn btn-outline" style="width: 100%; margin-top: 16px;" onclick="clearFilters()"> Clear All Filters </button>
    </aside><!-- Main Content Area -->
    <main class="content-area"><!-- Browse View -->
     <div id="browseView" class="view-content">
      <div class="view-header">
       <div>
        <h2>‚ú® All Designs <span class="results-count" id="resultsCount">(0 items)</span></h2>
       </div>
       <div class="view-controls"><select class="sort-select" id="sortSelect" onchange="applyFilters()"> <option value="newest">Newest First</option> <option value="price-low">Price: Low to High</option> <option value="price-high">Price: High to Low</option> <option value="rating">Highest Rated</option> <option value="popular">Most Popular</option> </select>
        <div class="view-toggle"><button class="active" onclick="setViewMode('grid')" id="gridViewBtn">‚äû</button> <button onclick="setViewMode('list')" id="listViewBtn">‚ò∞</button>
        </div>
       </div>
      </div>
      <div class="products-grid" id="productsGrid">
       <div class="empty-state">
        <div class="empty-state-icon">
         üé®
        </div>
        <h3>No designs available yet</h3>
        <p>Be the first to upload beautiful embroidery designs!</p>
       </div>
      </div>
     </div><!-- Cost Calculator View -->
     <div id="calculatorView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üßÆ Design Cost Calculator</h2>
      </div>
      <div class="calculator-section">
       <h3>üí∞ Calculate Your Design Cost</h3>
       <p style="opacity: 0.9; margin-bottom: 24px;">Enter the details of your embroidery design to estimate the cost and time required.</p>
       <div class="calculator-grid">
        <div class="calculator-input"><label>Design Type</label> <select id="calcDesignType" onchange="calculateCost()"> <option value="mirror">Mirror Work</option> <option value="hand">Hand Embroidery</option> <option value="zari">Zari Work</option> <option value="thread">Thread Work</option> <option value="sequin">Sequin Work</option> </select>
        </div>
        <div class="calculator-input"><label>Design Size (sq. inches)</label> <input type="number" id="calcSize" value="100" min="1" oninput="calculateCost()" placeholder="e.g., 100">
        </div>
        <div class="calculator-input"><label>Complexity Level</label> <select id="calcComplexity" onchange="calculateCost()"> <option value="simple">Simple</option> <option value="medium">Medium</option> <option value="complex">Complex</option> <option value="intricate">Intricate</option> </select>
        </div>
        <div class="calculator-input"><label>Number of Colors</label> <input type="number" id="calcColors" value="3" min="1" max="20" oninput="calculateCost()" placeholder="e.g., 3">
        </div>
        <div class="calculator-input"><label>Material Quality</label> <select id="calcMaterial" onchange="calculateCost()"> <option value="standard">Standard</option> <option value="premium">Premium</option> <option value="luxury">Luxury</option> </select>
        </div>
        <div class="calculator-input"><label>Quantity</label> <input type="number" id="calcQuantity" value="1" min="1" oninput="calculateCost()" placeholder="e.g., 1">
        </div>
       </div>
       <div class="cost-result">
        <h4>Estimated Total Cost</h4>
        <div class="cost-value">
         ‚Çπ<span id="totalCost">0</span>
        </div>
        <p style="opacity: 0.9; font-size: 14px;">Per piece: ‚Çπ<span id="perPieceCost">0</span></p>
        <div class="cost-breakdown">
         <div class="cost-breakdown-item"><strong>‚è±Ô∏è Time Required</strong> <span id="timeRequired">0 hrs</span>
         </div>
         <div class="cost-breakdown-item"><strong>üßµ Material Cost</strong> <span>‚Çπ<span id="materialCost">0</span></span>
         </div>
         <div class="cost-breakdown-item"><strong>üë®‚Äçüé® Labor Cost</strong> <span>‚Çπ<span id="laborCost">0</span></span>
         </div>
        </div>
       </div>
      </div>
      <div style="background: #f7fafc; padding: 24px; border-radius: 16px; margin-top: 24px;">
       <h3 style="color: #2d3748; margin-bottom: 16px; font-size: 20px;">üìä Cost Breakdown Details</h3>
       <div style="display: grid; gap: 12px; color: #4a5568; font-size: 15px; line-height: 1.8;">
        <p><strong>Design Type:</strong> Different embroidery types have varying complexity and material costs.</p>
        <p><strong>Size:</strong> Larger designs require more materials and time.</p>
        <p><strong>Complexity:</strong> Intricate patterns take longer and require skilled artisans.</p>
        <p><strong>Colors:</strong> More colors mean more thread changes and precision work.</p>
        <p><strong>Material Quality:</strong> Premium materials increase the overall cost but ensure better durability.</p>
        <p><strong>Quantity:</strong> Bulk orders may qualify for discounts (applied automatically).</p>
       </div>
      </div>
     </div><!-- Categories View -->
     <div id="categoriesView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üìÇ Browse by Category</h2>
      </div>
      <div class="products-grid" id="categoriesGrid"></div>
     </div><!-- Trending View -->
     <div id="trendingView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üî• Trending Designs</h2>
      </div>
      <div class="products-grid" id="trendingGrid"></div>
     </div><!-- New Arrivals View -->
     <div id="newView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>‚ú® New Arrivals</h2>
      </div>
      <div class="products-grid" id="newGrid"></div>
     </div><!-- Wishlist View -->
     <div id="wishlistView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>‚ù§Ô∏è My Wishlist</h2>
      </div>
      <div class="products-grid" id="wishlistGrid"></div>
     </div><!-- Cart View -->
     <div id="cartView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üõí Shopping Cart</h2>
      </div>
      <div id="cartContent"></div>
     </div><!-- Profile View -->
     <div id="profileView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üë§ My Profile</h2>
      </div>
      <div style="max-width: 600px;">
       <form onsubmit="updateProfile(event)">
        <div class="form-group"><label for="profileName">Full Name</label> <input type="text" id="profileName" required>
        </div>
        <div class="form-group"><label for="profileEmail">Email</label> <input type="email" id="profileEmail" disabled>
        </div>
        <div class="form-group"><label for="profilePhone">Phone</label> <input type="tel" id="profilePhone" required>
        </div>
        <div class="form-group"><label for="profileAddress">Address</label> <textarea id="profileAddress"></textarea>
        </div><button type="submit" class="btn btn-primary">Update Profile</button>
       </form>
      </div>
     </div><!-- Orders View -->
     <div id="ordersView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>üì¶ My Orders</h2>
      </div>
      <div id="ordersContent"></div>
     </div><!-- Admin View -->
     <div id="adminView" class="view-content" style="display: none;">
      <div class="view-header">
       <h2>‚öôÔ∏è Admin Dashboard</h2><button class="btn btn-secondary" onclick="openUploadModal()"> ‚ûï Upload Design </button>
      </div>
      <div class="admin-stats">
       <div class="stat-card">
        <h3>Total Designs</h3>
        <div class="stat-value" id="totalDesigns">
         0
        </div>
        <div class="stat-label">
         Uploaded designs
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
        <h3>In Stock</h3>
        <div class="stat-value" id="inStockCount">
         0
        </div>
        <div class="stat-label">
         Available items
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
        <h3>Categories</h3>
        <div class="stat-value" id="categoriesCount">
         5
        </div>
        <div class="stat-label">
         Design types
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);">
        <h3>Total Users</h3>
        <div class="stat-value" id="totalUsers">
         0
        </div>
        <div class="stat-label">
         Registered users
        </div>
       </div>
      </div><!-- Analytics Section -->
      <div style="background: white; padding: 32px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); margin-bottom: 24px;">
       <h3 style="font-size: 24px; color: #2d3748; margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">üìä Website Analytics</h3>
       <div class="admin-stats" style="margin-bottom: 32px;">
        <div class="stat-card" style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);">
         <h3>Total Searches</h3>
         <div class="stat-value" id="totalSearches">
          0
         </div>
         <div class="stat-label">
          Search queries
         </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
         <h3>Total Purchases</h3>
         <div class="stat-value" id="totalPurchases">
          0
         </div>
         <div class="stat-label">
          Completed orders
         </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
         <h3>Items in Carts</h3>
         <div class="stat-value" id="totalCartItems">
          0
         </div>
         <div class="stat-label">
          Across all users
         </div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);">
         <h3>Revenue</h3>
         <div class="stat-value">
          ‚Çπ<span id="totalRevenue">0</span>
         </div>
         <div class="stat-label">
          Total earnings
         </div>
        </div>
       </div><!-- Top Searches -->
       <div style="margin-bottom: 32px;">
        <h4 style="font-size: 18px; color: #2d3748; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">üîç Top Search Terms</h4>
        <div id="topSearches" style="background: #f7fafc; padding: 20px; border-radius: 12px;"></div>
       </div><!-- Popular Products -->
       <div style="margin-bottom: 32px;">
        <h4 style="font-size: 18px; color: #2d3748; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">üî• Most Added to Cart</h4>
        <div id="popularProducts" style="background: #f7fafc; padding: 20px; border-radius: 12px;"></div>
       </div><!-- Recent Activity -->
       <div>
        <h4 style="font-size: 18px; color: #2d3748; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">üìà Recent Activity</h4>
        <div id="recentActivity" style="background: #f7fafc; padding: 20px; border-radius: 12px; max-height: 400px; overflow-y: auto;"></div>
       </div>
      </div>
      <h3 style="font-size: 20px; color: #2d3748; margin-bottom: 20px;">All Products</h3>
      <div class="products-grid" id="adminProductsGrid"></div>
     </div>
    </main>
   </div><!-- Footer -->
   <footer>
    <div class="footer-content">
     <div class="footer-brand">
      <div class="footer-logo-section">
       <div class="footer-logo"></div>
       <h2>EmbroiTech</h2>
      </div>
      <p>Your premier destination for exquisite embroidery designs. We bring together traditional craftsmanship and modern technology to deliver stunning patterns for all your creative needs.</p>
      <p style="margin-top: 8px;"><strong>üé® Design. Create. Inspire.</strong></p>
     </div>
     <div class="footer-section">
      <h3>Quick Links</h3>
      <div class="footer-links"><a href="#" onclick="showView('browse'); return false;">Browse Designs</a> <a href="#" onclick="showView('categories'); return false;">Categories</a> <a href="#" onclick="showView('trending'); return false;">Trending</a> <a href="#" onclick="showView('new'); return false;">New Arrivals</a> <a href="#" onclick="showView('calculator'); return false;">Cost Calculator</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Customer Care</h3>
      <div class="footer-links"><a href="#" onclick="showView('profile'); return false;">My Account</a> <a href="#" onclick="showView('orders'); return false;">Order History</a> <a href="#" onclick="showView('wishlist'); return false;">Wishlist</a> <a href="#" onclick="showView('cart'); return false;">Shopping Cart</a> <a href="#">Help &amp; Support</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Contact Us</h3>
      <div class="footer-contact">
       <div class="footer-contact-item"><span>üìß</span> <span>info@embroitech.com</span>
       </div>
       <div class="footer-contact-item"><span>üìû</span> <span>+91 98765 43210</span>
       </div>
       <div class="footer-contact-item"><span>üìç</span> <span>Mumbai, India</span>
       </div>
       <div class="footer-contact-item"><span>‚è∞</span> <span>Mon-Sat: 9AM-6PM</span>
       </div>
      </div>
     </div>
    </div>
    <div class="footer-bottom">
     <p>¬© 2024 EmbroiTech. All rights reserved. Crafted with ‚ù§Ô∏è for embroidery enthusiasts.</p>
     <div class="footer-social">
      <div class="social-icon" title="Facebook">
       üìò
      </div>
      <div class="social-icon" title="Instagram">
       üì∑
      </div>
      <div class="social-icon" title="Twitter">
       üê¶
      </div>
      <div class="social-icon" title="Pinterest">
       üìå
      </div>
      <div class="social-icon" title="WhatsApp">
       üí¨
      </div>
     </div>
    </div>
   </footer>
  </div><!-- Upload Product Modal -->
  <div id="uploadModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closeUploadModal()">√ó</button>
    <h2 style="margin-bottom: 24px; color: #2d3748;">Upload New Design</h2>
    <div class="loading-spinner" id="uploadLoading">
     ‚è≥ Uploading...
    </div>
    <form id="uploadForm" onsubmit="handleUpload(event)">
     <div class="form-group"><label>Upload Image *</label>
      <div class="image-upload-area" id="uploadArea" onclick="document.getElementById('productImage').click()">
       <div class="upload-icon">
        üì∏
       </div>
       <p style="color: #718096; font-size: 15px; font-weight: 600;">Click to select image</p>
       <p style="color: #a0aec0; font-size: 13px; margin-top: 8px;">JPG, PNG, GIF (Max 5MB)</p>
      </div><input type="file" id="productImage" accept="image/*" style="display: none;" onchange="previewImage(event)" required> <img id="imagePreview" class="image-preview" alt="Preview">
     </div>
     <div class="form-group"><label for="productName">Design Name *</label> <input type="text" id="productName" required placeholder="e.g., Royal Mirror Work Pattern">
     </div>
     <div class="form-group"><label for="productCategory">Category *</label> <select id="productCategory" required> <option value="">Select Category</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
     </div>
     <div class="form-group"><label for="productTags">Search Tags (comma separated) *</label> <input type="text" id="productTags" required placeholder="e.g., mirror, bridal, traditional, golden, kurti, choli">
      <p style="font-size: 12px; color: #718096; margin-top: 4px;">Add keywords like: mirror work, hand design, kurti, choli, ghagra, bridal, traditional</p>
     </div>
     <div class="form-group"><label for="productPrice">Price (‚Çπ) *</label> <input type="number" id="productPrice" required min="0" step="0.01" placeholder="e.g., 1299">
     </div>
     <div class="form-group"><label for="productDescription">Description</label> <textarea id="productDescription" placeholder="Describe the design, materials, and special features..."></textarea>
     </div>
     <div class="form-group"><label for="productRating">Rating (1-5)</label> <input type="number" id="productRating" min="1" max="5" step="0.1" value="4.5">
     </div>
     <div class="form-group"><label for="productReviews">Number of Reviews</label> <input type="number" id="productReviews" min="0" value="0">
     </div>
     <div class="form-group"><label style="display: flex; align-items: center; gap: 10px; cursor: pointer;"> <input type="checkbox" id="productInStock" checked style="width: 22px; height: 22px; accent-color: #667eea;"> <span>In Stock</span> </label>
     </div><button type="submit" class="btn btn-primary"> Upload Design </button>
    </form>
   </div>
  </div><!-- Payment Modal -->
  <div id="paymentModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closePaymentModal()">√ó</button>
    <h2 style="margin-bottom: 24px; color: #2d3748;">üí≥ Payment Details</h2>
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 24px; border-radius: 16px; margin-bottom: 24px; text-align: center;">
     <p style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">Total Amount</p>
     <p style="font-size: 36px; font-weight: 700;">‚Çπ<span id="paymentAmount">0.00</span></p>
    </div>
    <form id="paymentForm" onsubmit="processPayment(event)">
     <div class="form-group"><label for="cardNumber">Card Number *</label> <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
     </div>
     <div class="form-group"><label for="cardName">Cardholder Name *</label> <input type="text" id="cardName" required placeholder="John Doe">
     </div>
     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
      <div class="form-group"><label for="expiryDate">Expiry Date *</label> <input type="text" id="expiryDate" required placeholder="MM/YY" maxlength="5" oninput="formatExpiryDate(this)">
      </div>
      <div class="form-group"><label for="cvv">CVV *</label> <input type="text" id="cvv" required placeholder="123" maxlength="4" pattern="\d{3,4}">
      </div>
     </div><button type="submit" class="btn btn-primary" id="paymentBtn"> üí≥ Pay Now </button>
    </form>
    <div style="background: #f7fafc; padding: 16px; border-radius: 8px; margin-top: 20px;">
     <p style="font-size: 12px; color: #718096; text-align: center;">üîí Secure payment processing. Your card details are encrypted.</p>
    </div>
   </div>
  </div>
  <div id="notification" class="notification"></div>
  <script>
    // State
    let allRecords = [];
    let currentUser = null;
    let cartItems = [];
    let wishlistItems = [];
    let currentView = 'browse';
    let viewMode = 'grid';
    let searchTimeout = null;
    
    // Activity Tracking
    function trackActivity(activityType, data) {
      const activity = {
        __backendId: 'local_' + Date.now() + '_' + Math.random(),
        id: Date.now().toString() + '_' + Math.random(),
        type: 'activity',
        activityType: activityType,
        userId: currentUser ? currentUser.email : 'guest',
        timestamp: new Date().toISOString(),
        ...data
      };
      
      allRecords.push(activity);
      saveToLocalStorage();
    }

    // Initialize
    function init() {
      loadFromLocalStorage();
      checkAuth();
      calculateCost();
    }
    
    function loadFromLocalStorage() {
      const stored = localStorage.getItem('embroitech_data');
      if (stored) {
        try {
          allRecords = JSON.parse(stored);
        } catch (error) {
          console.error("Error loading data:", error);
          allRecords = [];
        }
      }
      updateUI();
    }
    
    function saveToLocalStorage() {
      try {
        localStorage.setItem('embroitech_data', JSON.stringify(allRecords));
      } catch (error) {
        console.error("Error saving data:", error);
      }
    }

    // Authentication
    function checkAuth() {
      const savedUser = localStorage.getItem('embroitech_user');
      const rememberMe = localStorage.getItem('embroitech_remember');
      
      if (savedUser && rememberMe === 'true') {
        currentUser = JSON.parse(savedUser);
        showMainApp();
      } else {
        showAuthScreen();
      }
    }

    function showAuthScreen() {
      document.getElementById('authScreen').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
    }

    function showMainApp() {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      const initials = currentUser.fullName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
      document.getElementById('userAvatar').textContent = initials;
      document.getElementById('userDisplayName').textContent = currentUser.fullName;
      document.getElementById('userDisplayEmail').textContent = currentUser.email;
      
      if (currentUser.isAdmin) {
        document.getElementById('adminMenuItem').style.display = 'flex';
      }
      
      loadUserProfile();
      updateUI();
    }

    function showLogin() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    }

    function showSignup() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value.trim().toLowerCase();
      const password = document.getElementById('loginPassword').value;
      
      const loginBtn = document.getElementById('loginBtn');
      loginBtn.disabled = true;
      loginBtn.textContent = 'üîÑ Signing in...';
      
      const users = allRecords.filter(r => r.type === 'user');
      const user = users.find(u => u.email === email && u.password === password);
      
      setTimeout(() => {
        if (user) {
          currentUser = user;
          localStorage.setItem('embroitech_user', JSON.stringify(user));
          localStorage.setItem('embroitech_remember', 'true');
          
          // Track login
          trackActivity('login', { userId: user.email, timestamp: new Date().toISOString() });
          
          showNotification('‚úÖ Welcome back, ' + user.fullName + '!');
          showMainApp();
        } else {
          showNotification('‚ùå Invalid email or password', 'error');
          loginBtn.disabled = false;
          loginBtn.textContent = 'üîê Sign In';
        }
      }, 500);
    }

    function handleSignup(event) {
      event.preventDefault();
      
      const fullName = document.getElementById('signupFullName').value.trim();
      const email = document.getElementById('signupEmail').value.trim().toLowerCase();
      const phone = document.getElementById('signupPhone').value.trim();
      const password = document.getElementById('signupPassword').value;
      const address = document.getElementById('signupAddress').value.trim();
      
      const users = allRecords.filter(r => r.type === 'user');
      if (users.find(u => u.email === email)) {
        showNotification('‚ùå Email already registered', 'error');
        return;
      }
      
      const signupBtn = document.getElementById('signupBtn');
      signupBtn.disabled = true;
      signupBtn.textContent = 'üîÑ Creating account...';
      
      const isFirstUser = users.length === 0;
      
      const newUser = {
        __backendId: 'local_' + Date.now(),
        id: Date.now().toString(),
        type: 'user',
        username: email.split('@')[0],
        email: email,
        password: password,
        fullName: fullName,
        phone: phone,
        address: address,
        isAdmin: isFirstUser,
        createdAt: new Date().toISOString()
      };
      
      setTimeout(() => {
        allRecords.push(newUser);
        saveToLocalStorage();
        showNotification('‚úÖ Account created! ' + (isFirstUser ? 'You are the admin!' : ''));
        showLogin();
        document.getElementById('loginEmail').value = email;
        signupBtn.disabled = false;
        signupBtn.textContent = '‚ú® Create Account';
      }, 500);
    }

    function handleLogout() {
      localStorage.removeItem('embroitech_user');
      localStorage.removeItem('embroitech_remember');
      currentUser = null;
      cartItems = [];
      wishlistItems = [];
      showNotification('üëã Logged out successfully');
      showAuthScreen();
      showLogin();
    }

    function checkPasswordStrength() {
      const password = document.getElementById('signupPassword').value;
      const bar = document.getElementById('passwordStrengthBar');
      
      let strength = 0;
      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
      if (/\d/.test(password)) strength++;
      if (/[^a-zA-Z\d]/.test(password)) strength++;
      
      bar.className = 'password-strength-bar';
      if (strength <= 1) bar.classList.add('weak');
      else if (strength <= 2) bar.classList.add('medium');
      else bar.classList.add('strong');
    }

    // UI Updates
    function updateUI() {
      updateStats();
      updateCategoryCounts();
      renderProducts();
      renderCategories();
      renderTrending();
      renderNewArrivals();
      renderWishlist();
      renderCart();
      renderAdminProducts();
      renderOrders();
    }

    function updateStats() {
      const products = allRecords.filter(r => r.type === 'product');
      const users = allRecords.filter(r => r.type === 'user');
      const activities = allRecords.filter(r => r.type === 'activity');
      const orders = allRecords.filter(r => r.type === 'order');
      
      document.getElementById('totalDesigns').textContent = products.length;
      document.getElementById('inStockCount').textContent = products.filter(p => p.inStock).length;
      document.getElementById('totalUsers').textContent = users.length;
      
      // Analytics stats
      const searches = activities.filter(a => a.activityType === 'search');
      const purchases = activities.filter(a => a.activityType === 'purchase');
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      
      document.getElementById('totalSearches').textContent = searches.length;
      document.getElementById('totalPurchases').textContent = purchases.length;
      document.getElementById('totalCartItems').textContent = cartAdditions.length;
      
      const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
      document.getElementById('totalRevenue').textContent = Math.round(totalRevenue).toLocaleString('en-IN');
      
      renderAnalytics();
    }
    
    function renderAnalytics() {
      const activities = allRecords.filter(r => r.type === 'activity');
      
      // Top Searches
      const searches = activities.filter(a => a.activityType === 'search');
      const searchTerms = {};
      searches.forEach(s => {
        const term = s.searchTerm.toLowerCase();
        searchTerms[term] = (searchTerms[term] || 0) + 1;
      });
      
      const topSearches = Object.entries(searchTerms)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      const topSearchesEl = document.getElementById('topSearches');
      if (topSearches.length === 0) {
        topSearchesEl.innerHTML = '<p style="color: #718096; text-align: center;">No search data yet</p>';
      } else {
        topSearchesEl.innerHTML = topSearches.map(([term, count]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px;">
            <span style="font-weight: 600; color: #2d3748;">"${term}"</span>
            <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 12px; font-size: 13px; font-weight: 700;">${count} searches</span>
          </div>
        `).join('');
      }
      
      // Popular Products (Most Added to Cart)
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      const productCounts = {};
      cartAdditions.forEach(a => {
        const name = a.productName;
        if (!productCounts[name]) {
          productCounts[name] = { count: 0, price: a.price, category: a.category };
        }
        productCounts[name].count++;
      });
      
      const popularProducts = Object.entries(productCounts)
        .sort((a, b) => b[1].count - a[1].count)
        .slice(0, 10);
      
      const popularProductsEl = document.getElementById('popularProducts');
      if (popularProducts.length === 0) {
        popularProductsEl.innerHTML = '<p style="color: #718096; text-align: center;">No cart data yet</p>';
      } else {
        popularProductsEl.innerHTML = popularProducts.map(([name, data]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px;">
            <div>
              <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${name}</div>
              <div style="font-size: 13px; color: #718096;">${data.category} ‚Ä¢ ‚Çπ${data.price}</div>
            </div>
            <span style="background: #48bb78; color: white; padding: 4px 12px; border-radius: 12px; font-size: 13px; font-weight: 700;">${data.count} times</span>
          </div>
        `).join('');
      }
      
      // Recent Activity
      const recentActivities = activities
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .slice(0, 20);
      
      const recentActivityEl = document.getElementById('recentActivity');
      if (recentActivities.length === 0) {
        recentActivityEl.innerHTML = '<p style="color: #718096; text-align: center;">No activity yet</p>';
      } else {
        recentActivityEl.innerHTML = recentActivities.map(activity => {
          const date = new Date(activity.timestamp);
          const timeStr = date.toLocaleString('en-IN', { 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit' 
          });
          
          let icon = 'üìä';
          let text = '';
          let color = '#718096';
          
          if (activity.activityType === 'search') {
            icon = 'üîç';
            text = `Searched for "${activity.searchTerm}" (${activity.resultsCount} results)`;
            color = '#4299e1';
          } else if (activity.activityType === 'add_to_cart') {
            icon = 'üõí';
            text = `Added "${activity.productName}" to cart`;
            color = '#f6ad55';
          } else if (activity.activityType === 'purchase') {
            icon = 'üí≥';
            text = `Purchased ${activity.itemCount} items for ‚Çπ${activity.total}`;
            color = '#48bb78';
          } else if (activity.activityType === 'login') {
            icon = 'üîê';
            text = `User logged in`;
            color = '#9f7aea';
          }
          
          return `
            <div style="display: flex; gap: 12px; padding: 12px; background: white; border-radius: 8px; margin-bottom: 8px; border-left: 4px solid ${color};">
              <span style="font-size: 24px;">${icon}</span>
              <div style="flex: 1;">
                <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${text}</div>
                <div style="font-size: 12px; color: #718096;">
                  ${activity.userId} ‚Ä¢ ${timeStr}
                </div>
              </div>
            </div>
          `;
        }).join('');
      }
    }

    function updateCategoryCounts() {
      const products = allRecords.filter(r => r.type === 'product');
      const categories = ['Mirror Work', 'Hand Embroidery', 'Zari Work', 'Thread Work', 'Sequin Work'];
      
      categories.forEach(cat => {
        const count = products.filter(p => p.category === cat).length;
        const id = 'count' + cat.replace(/\s+/g, '');
        const el = document.getElementById(id);
        if (el) el.textContent = count;
      });
    }

    // Search
    function handleSearch() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const searchTerm = document.getElementById('mainSearch').value.trim();
        if (searchTerm && currentUser) {
          trackActivity('search', { 
            searchTerm: searchTerm,
            resultsCount: getFilteredProducts().length
          });
        }
        applyFilters();
      }, 300);
    }

    // Filters
    function getFilteredProducts() {
      let products = allRecords.filter(r => r.type === 'product');
      
      const searchTerm = document.getElementById('mainSearch').value.toLowerCase().trim();
      if (searchTerm) {
        products = products.filter(p => 
          p.productName.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm) ||
          (p.tags && p.tags.toLowerCase().includes(searchTerm)) ||
          (p.description && p.description.toLowerCase().includes(searchTerm))
        );
      }
      
      const categoryFilters = [];
      if (document.getElementById('filterMirror').checked) categoryFilters.push('Mirror Work');
      if (document.getElementById('filterHand').checked) categoryFilters.push('Hand Embroidery');
      if (document.getElementById('filterZari').checked) categoryFilters.push('Zari Work');
      if (document.getElementById('filterThread').checked) categoryFilters.push('Thread Work');
      if (document.getElementById('filterSequin').checked) categoryFilters.push('Sequin Work');
      
      if (categoryFilters.length > 0) {
        products = products.filter(p => categoryFilters.includes(p.category));
      }
      
      const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
      products = products.filter(p => p.price >= minPrice && p.price <= maxPrice);
      
      if (document.getElementById('rating5').checked) {
        products = products.filter(p => p.rating >= 5);
      } else if (document.getElementById('rating4').checked) {
        products = products.filter(p => p.rating >= 4);
      } else if (document.getElementById('rating3').checked) {
        products = products.filter(p => p.rating >= 3);
      }
      
      if (document.getElementById('inStockOnly').checked) {
        products = products.filter(p => p.inStock);
      }
      
      const sortBy = document.getElementById('sortSelect').value;
      if (sortBy === 'price-low') {
        products.sort((a, b) => a.price - b.price);
      } else if (sortBy === 'price-high') {
        products.sort((a, b) => b.price - a.price);
      } else if (sortBy === 'rating') {
        products.sort((a, b) => b.rating - a.rating);
      } else if (sortBy === 'popular') {
        products.sort((a, b) => b.reviews - a.reviews);
      } else {
        products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      }
      
      return products;
    }

    function applyFilters() {
      renderProducts();
    }

    function clearFilters() {
      document.getElementById('mainSearch').value = '';
      document.getElementById('filterMirror').checked = false;
      document.getElementById('filterHand').checked = false;
      document.getElementById('filterZari').checked = false;
      document.getElementById('filterThread').checked = false;
      document.getElementById('filterSequin').checked = false;
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('rating5').checked = false;
      document.getElementById('rating4').checked = false;
      document.getElementById('rating3').checked = false;
      document.getElementById('inStockOnly').checked = false;
      document.getElementById('sortSelect').value = 'newest';
      applyFilters();
    }

    // Rendering
    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const products = getFilteredProducts();
      
      document.getElementById('resultsCount').textContent = `(${products.length} items)`;
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <h3>No designs found</h3>
            <p>Try adjusting your filters or search terms</p>
            <button class="btn btn-primary" onclick="clearFilters()" style="margin-top: 20px;">Clear Filters</button>
          </div>
        `;
        return;
      }
      
      grid.className = viewMode === 'grid' ? 'products-grid' : 'products-list';
      
      grid.innerHTML = products.map(p => renderProductCard(p, viewMode === 'list')).join('');
    }

    function renderProductCard(product, isList = false) {
      const isNew = (Date.now() - new Date(product.createdAt).getTime()) < 7 * 24 * 60 * 60 * 1000;
      const tags = product.tags ? product.tags.split(',').map(t => t.trim()).slice(0, 3) : [];
      
      const cardClass = isList ? 'product-card-list' : 'product-card';
      
      return `
        <div class="${cardClass}" data-product-id="${product.__backendId}">
          ${product.inStock ? 
            (isNew ? '<div class="product-badge new">New</div>' : '<div class="product-badge">In Stock</div>') : 
            '<div class="product-badge out-of-stock">Out of Stock</div>'}
          <button class="wishlist-btn ${isInWishlist(product.__backendId) ? 'active' : ''}" onclick="toggleWishlist('${product.__backendId}')">
            ${isInWishlist(product.__backendId) ? '‚ù§Ô∏è' : 'ü§ç'}
          </button>
          <div class="product-image">
            ${product.imageData ? `<img src="${product.imageData}" alt="${product.productName}">` : getEmojiForCategory(product.category)}
          </div>
          <div class="product-info">
            <span class="product-category">${product.category}</span>
            ${tags.length > 0 ? `
              <div class="product-tags">
                ${tags.map(tag => `<span class="product-tag">#${tag}</span>`).join('')}
              </div>
            ` : ''}
            <div class="product-name">${product.productName}</div>
            <div class="product-rating">
              <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span class="rating-value">${product.rating}</span>
              <span class="review-count">(${product.reviews} reviews)</span>
            </div>
            <div class="product-price">‚Çπ${product.price.toFixed(2)}</div>
            ${product.description ? `<p style="font-size: 13px; color: #718096; margin-bottom: 12px; line-height: 1.5;">${product.description.substring(0, 100)}${product.description.length > 100 ? '...' : ''}</p>` : ''}
            <div class="product-actions">
              <button class="btn btn-primary btn-small" onclick="addToCart('${product.__backendId}')" ${!product.inStock ? 'disabled' : ''}>
                ${product.inStock ? 'üõí Add to Cart' : 'Out of Stock'}
              </button>
              ${currentUser && currentUser.isAdmin ? `
                <button class="btn btn-danger btn-small" onclick="deleteProduct('${product.__backendId}')">
                  üóëÔ∏è
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `;
    }

    function renderCategories() {
      const grid = document.getElementById('categoriesGrid');
      const categories = [
        { name: 'Mirror Work', emoji: 'ü™û', desc: 'Traditional mirror embroidery' },
        { name: 'Hand Embroidery', emoji: '‚úã', desc: 'Handcrafted designs' },
        { name: 'Zari Work', emoji: '‚ú®', desc: 'Golden zari patterns' },
        { name: 'Thread Work', emoji: 'üßµ', desc: 'Colorful thread art' },
        { name: 'Sequin Work', emoji: 'üíé', desc: 'Sparkling sequin designs' }
      ];
      
      grid.innerHTML = categories.map(cat => {
        const count = allRecords.filter(r => r.type === 'product' && r.category === cat.name).length;
        return `
          <div class="product-card" onclick="filterByCategory('${cat.name}')">
            <div class="product-image" style="font-size: 96px;">${cat.emoji}</div>
            <div class="product-info">
              <div class="product-name">${cat.name}</div>
              <p style="color: #718096; font-size: 14px; margin-bottom: 8px;">${cat.desc}</p>
              <p style="color: #667eea; font-weight: 600;">${count} designs available</p>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderTrending() {
      const grid = document.getElementById('trendingGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => b.reviews - a.reviews)
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üî•</div>
            <h3>No trending designs yet</h3>
            <p>Check back soon for popular items</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderNewArrivals() {
      const grid = document.getElementById('newGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ú®</div>
            <h3>No new arrivals yet</h3>
            <p>Be the first to upload designs</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderWishlist() {
      const grid = document.getElementById('wishlistGrid');
      const products = allRecords.filter(r => r.type === 'product' && isInWishlist(r.__backendId));
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ù§Ô∏è</div>
            <h3>Your wishlist is empty</h3>
            <p>Add designs you love to your wishlist</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 20px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderCart() {
      const container = document.getElementById('cartContent');
      
      if (cartItems.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üõí</div>
            <h3>Your cart is empty</h3>
            <p>Add some beautiful designs to get started</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 20px;">Start Shopping</button>
          </div>
        `;
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      container.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 20px;">
          ${cartItems.map(item => `
            <div style="display: flex; gap: 20px; padding: 20px; border: 2px solid #e2e8f0; border-radius: 16px; align-items: center;">
              <div style="width: 120px; height: 120px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 48px; flex-shrink: 0; overflow: hidden;">
                ${item.imageData ? `<img src="${item.imageData}" alt="${item.productName}" style="width: 100%; height: 100%; object-fit: cover;">` : getEmojiForCategory(item.category)}
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 18px; margin-bottom: 4px;">${item.productName}</div>
                <div style="font-size: 13px; color: #718096; margin-bottom: 8px;">${item.category}</div>
                <div style="color: #48bb78; font-weight: 700; font-size: 20px;">‚Çπ${item.price.toFixed(2)}</div>
              </div>
              <button class="btn btn-danger btn-small" onclick="removeFromCart('${item.__backendId}')">
                Remove
              </button>
            </div>
          `).join('')}
          
          <div style="background: #f7fafc; padding: 28px; border-radius: 16px; margin-top: 20px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 16px;">
              <span>Subtotal:</span>
              <span style="font-weight: 600;">‚Çπ${subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 16px; font-size: 16px;">
              <span>Shipping:</span>
              <span style="font-weight: 600;">${shipping === 0 ? 'FREE' : '‚Çπ' + shipping.toFixed(2)}</span>
            </div>
            ${shipping === 0 ? '<p style="font-size: 13px; color: #48bb78; margin-bottom: 16px;">üéâ You got free shipping!</p>' : '<p style="font-size: 13px; color: #718096; margin-bottom: 16px;">Free shipping on orders above ‚Çπ2000</p>'}
            <div style="display: flex; justify-content: space-between; font-size: 24px; font-weight: 700; color: #2d3748; padding-top: 20px; border-top: 2px solid #e2e8f0; margin-top: 12px;">
              <span>Total:</span>
              <span style="color: #48bb78;">‚Çπ${total.toFixed(2)}</span>
            </div>
          </div>
          
          <button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; font-size: 18px; padding: 18px;">
            üí≥ Proceed to Checkout
          </button>
        </div>
      `;
    }

    function renderOrders() {
      const container = document.getElementById('ordersContent');
      const orders = allRecords.filter(r => r.type === 'order' && r.userId === currentUser.email);
      
      if (orders.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No orders yet</h3>
            <p>Start shopping to see your orders here</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 20px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      orders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
      
      container.innerHTML = orders.map(order => {
        let orderItems = order.items;
        if (typeof orderItems === 'string') {
          try {
            orderItems = JSON.parse(orderItems);
          } catch (e) {
            orderItems = [];
          }
        }
        
        return `
        <div style="border: 2px solid #e2e8f0; border-radius: 16px; padding: 24px; margin-bottom: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 12px;">
            <div>
              <h3 style="font-size: 18px; color: #2d3748; margin-bottom: 4px;">Order #${order.id}</h3>
              <p style="font-size: 14px; color: #718096;">${new Date(order.orderDate).toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
            </div>
            <div style="background: #48bb78; color: white; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: 700;">
              ‚úÖ ${order.status}
            </div>
          </div>
          
          <div style="background: #f7fafc; padding: 20px; border-radius: 12px; margin-bottom: 16px;">
            ${orderItems.map(item => `
              <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                <span style="color: #2d3748;">${item.productName}</span>
                <span style="font-weight: 600; color: #48bb78;">‚Çπ${item.price.toFixed(2)}</span>
              </div>
            `).join('')}
            <div style="border-top: 2px solid #e2e8f0; margin-top: 16px; padding-top: 16px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: #718096;">Subtotal:</span>
                <span style="font-weight: 600;">‚Çπ${order.subtotal.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: #718096;">Shipping:</span>
                <span style="font-weight: 600;">${order.shipping === 0 ? 'FREE' : '‚Çπ' + order.shipping.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; font-size: 18px; font-weight: 700; color: #2d3748;">
                <span>Total:</span>
                <span style="color: #48bb78;">‚Çπ${order.total.toFixed(2)}</span>
              </div>
            </div>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center; font-size: 14px; color: #718096;">
            <span>üí≥ ${order.paymentMethod}</span>
            <span>üìß Confirmation sent to ${currentUser.email}</span>
          </div>
        </div>
      `;
      }).join('');
    }

    function renderAdminProducts() {
      const grid = document.getElementById('adminProductsGrid');
      const products = allRecords.filter(r => r.type === 'product');
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No designs uploaded yet</h3>
            <p>Click "Upload Design" to add your first design</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    // View Management
    function showView(view) {
      currentView = view;
      document.querySelectorAll('.view-content').forEach(v => v.style.display = 'none');
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      
      const viewMap = {
        'browse': 'browseView',
        'calculator': 'calculatorView',
        'categories': 'categoriesView',
        'trending': 'trendingView',
        'new': 'newView',
        'wishlist': 'wishlistView',
        'cart': 'cartView',
        'profile': 'profileView',
        'orders': 'ordersView',
        'admin': 'adminView'
      };
      
      const viewId = viewMap[view];
      if (viewId) {
        document.getElementById(viewId).style.display = 'block';
      }
      
      closeUserMenu();
    }

    function setViewMode(mode) {
      viewMode = mode;
      document.getElementById('gridViewBtn').classList.toggle('active', mode === 'grid');
      document.getElementById('listViewBtn').classList.toggle('active', mode === 'list');
      renderProducts();
    }

    function filterByCategory(category) {
      clearFilters();
      const checkboxId = 'filter' + category.replace(/\s+/g, '');
      const checkbox = document.getElementById(checkboxId);
      if (checkbox) checkbox.checked = true;
      showView('browse');
      applyFilters();
    }

    // Cart & Wishlist
    function addToCart(backendId) {
      const product = allRecords.find(r => r.__backendId === backendId);
      if (!product || !product.inStock) return;
      
      if (cartItems.find(item => item.__backendId === backendId)) {
        showNotification('‚ÑπÔ∏è Item already in cart!', 'info');
        return;
      }
      
      cartItems.push(product);
      updateCartCount();
      
      // Track cart addition
      if (currentUser) {
        trackActivity('add_to_cart', {
          productId: product.id,
          productName: product.productName,
          price: product.price,
          category: product.category
        });
      }
      
      showNotification('‚úÖ Added to cart!');
    }

    function removeFromCart(backendId) {
      cartItems = cartItems.filter(item => item.__backendId !== backendId);
      updateCartCount();
      renderCart();
      showNotification('üóëÔ∏è Removed from cart');
    }

    function updateCartCount() {
      document.getElementById('cartCount').textContent = cartItems.length;
    }

    function toggleWishlist(backendId) {
      const index = wishlistItems.indexOf(backendId);
      if (index > -1) {
        wishlistItems.splice(index, 1);
        showNotification('üíî Removed from wishlist');
      } else {
        wishlistItems.push(backendId);
        showNotification('‚ù§Ô∏è Added to wishlist');
      }
      updateWishlistCount();
      renderProducts();
      renderWishlist();
    }

    function isInWishlist(backendId) {
      return wishlistItems.includes(backendId);
    }

    function updateWishlistCount() {
      document.getElementById('wishlistCount').textContent = wishlistItems.length;
    }

    // Payment Functions
    function proceedToCheckout() {
      if (cartItems.length === 0) {
        showNotification('‚ùå Your cart is empty!', 'error');
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      openPaymentModal(total);
    }
    
    function openPaymentModal(amount) {
      document.getElementById('paymentModal').classList.add('active');
      document.getElementById('paymentAmount').textContent = amount.toFixed(2);
      document.getElementById('paymentForm').reset();
    }
    
    function closePaymentModal() {
      document.getElementById('paymentModal').classList.remove('active');
    }
    
    function processPayment(event) {
      event.preventDefault();
      
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardName = document.getElementById('cardName').value;
      const expiryDate = document.getElementById('expiryDate').value;
      const cvv = document.getElementById('cvv').value;
      
      if (!validateCardNumber(cardNumber)) {
        showNotification('‚ùå Invalid card number', 'error');
        return;
      }
      
      if (!validateExpiryDate(expiryDate)) {
        showNotification('‚ùå Invalid or expired card', 'error');
        return;
      }
      
      if (cvv.length < 3) {
        showNotification('‚ùå Invalid CVV', 'error');
        return;
      }
      
      const payBtn = document.getElementById('paymentBtn');
      payBtn.disabled = true;
      payBtn.textContent = 'üîÑ Processing Payment...';
      
      setTimeout(() => {
        const orderItems = [...cartItems];
        const subtotal = orderItems.reduce((sum, item) => sum + item.price, 0);
        const shipping = subtotal > 2000 ? 0 : 50;
        const total = subtotal + shipping;
        
        const order = {
          __backendId: 'local_' + Date.now(),
          id: Date.now().toString(),
          type: 'order',
          userId: currentUser.email,
          items: orderItems.map(item => ({
            productId: item.id,
            productName: item.productName,
            price: item.price,
            category: item.category
          })),
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          paymentMethod: 'Card ending in ' + cardNumber.slice(-4),
          status: 'Confirmed',
          orderDate: new Date().toISOString()
        };
        
        allRecords.push(order);
        
        // Track purchase
        trackActivity('purchase', {
          orderId: order.id,
          itemCount: orderItems.length,
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          products: orderItems.map(item => item.productName).join(', ')
        });
        
        saveToLocalStorage();
        updateUI();
        
        payBtn.disabled = false;
        payBtn.textContent = 'üí≥ Pay Now';
        
        showNotification('‚úÖ Payment successful! Order confirmed.');
        cartItems = [];
        updateCartCount();
        closePaymentModal();
        showView('orders');
      }, 2000);
    }
    
    function validateCardNumber(cardNumber) {
      if (!/^\d{13,19}$/.test(cardNumber)) return false;
      
      let sum = 0;
      let isEven = false;
      
      for (let i = cardNumber.length - 1; i >= 0; i--) {
        let digit = parseInt(cardNumber[i]);
        
        if (isEven) {
          digit *= 2;
          if (digit > 9) digit -= 9;
        }
        
        sum += digit;
        isEven = !isEven;
      }
      
      return sum % 10 === 0;
    }
    
    function validateExpiryDate(expiry) {
      const [month, year] = expiry.split('/').map(v => parseInt(v));
      if (!month || !year || month < 1 || month > 12) return false;
      
      const now = new Date();
      const currentYear = now.getFullYear() % 100;
      const currentMonth = now.getMonth() + 1;
      
      if (year < currentYear) return false;
      if (year === currentYear && month < currentMonth) return false;
      
      return true;
    }
    
    function formatCardNumber(input) {
      let value = input.value.replace(/\s/g, '');
      let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
      input.value = formattedValue;
    }
    
    function formatExpiryDate(input) {
      let value = input.value.replace(/\D/g, '');
      if (value.length >= 2) {
        value = value.slice(0, 2) + '/' + value.slice(2, 4);
      }
      input.value = value;
    }

    // Cost Calculator
    function calculateCost() {
      const designType = document.getElementById('calcDesignType').value;
      const size = parseFloat(document.getElementById('calcSize').value) || 0;
      const complexity = document.getElementById('calcComplexity').value;
      const colors = parseInt(document.getElementById('calcColors').value) || 1;
      const material = document.getElementById('calcMaterial').value;
      const quantity = parseInt(document.getElementById('calcQuantity').value) || 1;
      
      // Base rates per sq inch
      const designRates = {
        mirror: 15,
        hand: 12,
        zari: 18,
        thread: 10,
        sequin: 14
      };
      
      const complexityMultiplier = {
        simple: 1,
        medium: 1.5,
        complex: 2,
        intricate: 2.5
      };
      
      const materialMultiplier = {
        standard: 1,
        premium: 1.5,
        luxury: 2
      };
      
      // Calculate base cost
      let baseCost = designRates[designType] * size;
      
      // Apply complexity
      baseCost *= complexityMultiplier[complexity];
      
      // Add color cost (‚Çπ50 per additional color)
      baseCost += (colors - 1) * 50;
      
      // Material cost (30% of base)
      const materialCost = baseCost * 0.3 * materialMultiplier[material];
      
      // Labor cost (70% of base)
      const laborCost = baseCost * 0.7;
      
      // Total per piece
      const perPieceCost = baseCost + materialCost;
      
      // Bulk discount
      let discount = 1;
      if (quantity >= 10) discount = 0.9;
      if (quantity >= 50) discount = 0.85;
      if (quantity >= 100) discount = 0.8;
      
      const totalCost = perPieceCost * quantity * discount;
      
      // Time calculation (hours)
      const baseTime = size / 20; // 20 sq inches per hour base
      const timeRequired = baseTime * complexityMultiplier[complexity] * quantity;
      
      // Update UI
      document.getElementById('totalCost').textContent = Math.round(totalCost).toLocaleString('en-IN');
      document.getElementById('perPieceCost').textContent = Math.round(perPieceCost).toLocaleString('en-IN');
      document.getElementById('materialCost').textContent = Math.round(materialCost * quantity).toLocaleString('en-IN');
      document.getElementById('laborCost').textContent = Math.round(laborCost * quantity).toLocaleString('en-IN');
      document.getElementById('timeRequired').textContent = Math.round(timeRequired) + ' hrs';
    }

    // User Menu
    function toggleUserMenu() {
      document.getElementById('userDropdown').classList.toggle('active');
    }

    function closeUserMenu() {
      document.getElementById('userDropdown').classList.remove('active');
    }

    // Profile
    function loadUserProfile() {
      if (!currentUser) return;
      
      document.getElementById('profileName').value = currentUser.fullName || '';
      document.getElementById('profileEmail').value = currentUser.email || '';
      document.getElementById('profilePhone').value = currentUser.phone || '';
      document.getElementById('profileAddress').value = currentUser.address || '';
    }

    function updateProfile(event) {
      event.preventDefault();
      
      const updatedUser = {
        ...currentUser,
        fullName: document.getElementById('profileName').value,
        phone: document.getElementById('profilePhone').value,
        address: document.getElementById('profileAddress').value
      };
      
      const index = allRecords.findIndex(r => r.__backendId === currentUser.__backendId);
      if (index !== -1) {
        allRecords[index] = updatedUser;
        saveToLocalStorage();
      }
      currentUser = updatedUser;
      localStorage.setItem('embroitech_user', JSON.stringify(updatedUser));
      document.getElementById('userDisplayName').textContent = updatedUser.fullName;
      showNotification('‚úÖ Profile updated successfully!');
    }

    // Admin Functions
    function openUploadModal() {
      document.getElementById('uploadModal').classList.add('active');
      document.getElementById('uploadForm').reset();
      document.getElementById('imagePreview').classList.remove('active');
      document.getElementById('uploadArea').classList.remove('has-image');
    }

    function closeUploadModal() {
      document.getElementById('uploadModal').classList.remove('active');
    }

    function previewImage(event) {
      const file = event.target.files[0];
      if (file) {
        if (file.size > 5 * 1024 * 1024) {
          showNotification('‚ùå Image size must be less than 5MB', 'error');
          return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById('imagePreview');
          preview.src = e.target.result;
          preview.classList.add('active');
          document.getElementById('uploadArea').classList.add('has-image');
        };
        reader.readAsDataURL(file);
      }
    }

    function handleUpload(event) {
      event.preventDefault();
      
      const loading = document.getElementById('uploadLoading');
      loading.classList.add('active');
      
      setTimeout(() => {
        const imagePreview = document.getElementById('imagePreview');
        const imageData = imagePreview.classList.contains('active') ? imagePreview.src : '';
        
        const product = {
          __backendId: 'local_' + Date.now(),
          id: Date.now().toString(),
          type: 'product',
          productName: document.getElementById('productName').value,
          category: document.getElementById('productCategory').value,
          tags: document.getElementById('productTags').value,
          price: parseFloat(document.getElementById('productPrice').value),
          description: document.getElementById('productDescription').value,
          imageData: imageData,
          rating: parseFloat(document.getElementById('productRating').value),
          reviews: parseInt(document.getElementById('productReviews').value),
          inStock: document.getElementById('productInStock').checked,
          uploadedBy: currentUser.email,
          createdAt: new Date().toISOString()
        };
        
        allRecords.push(product);
        saveToLocalStorage();
        updateUI();
        
        loading.classList.remove('active');
        showNotification('‚úÖ Design uploaded successfully!');
        closeUploadModal();
      }, 1000);
    }

    function deleteProduct(backendId) {
      if (confirm('Are you sure you want to delete this design?')) {
        allRecords = allRecords.filter(r => r.__backendId !== backendId);
        saveToLocalStorage();
        updateUI();
        showNotification('‚úÖ Design deleted successfully!');
      }
    }

    // Utility Functions
    function getEmojiForCategory(category) {
      const emojis = {
        'Mirror Work': 'ü™û',
        'Hand Embroidery': '‚úã',
        'Zari Work': '‚ú®',
        'Thread Work': 'üßµ',
        'Sequin Work': 'üíé'
      };
      return emojis[category] || 'üé®';
    }

    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = 'notification active';
      if (type === 'error') {
        notification.classList.add('error');
      } else if (type === 'info') {
        notification.classList.add('info');
      }
      
      setTimeout(() => {
        notification.classList.remove('active');
      }, 4000);
    }

    document.addEventListener('click', function(event) {
      if (!event.target.closest('.user-menu')) {
        closeUserMenu();
      }
    });

    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b837f2b5f28b0b',t:'MTc2MjYzNzkxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
  </html>
