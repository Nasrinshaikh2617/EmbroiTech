<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Premium Embroidery Marketplace</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      color: #1a202c;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }
    
    /* Authentication Screens */
    .auth-container {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .auth-box {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 480px;
      width: 100%;
      overflow: hidden;
    }
    
    .auth-header {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 40px 32px;
      text-align: center;
    }
    
    .auth-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .auth-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .auth-header p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .auth-body {
      padding: 40px 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2d3748;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s;
      background: #f7fafc;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #e94560;
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      width: 100%;
      padding: 16px;
      font-size: 16px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(233, 69, 96, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: #48bb78;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #38a169;
      transform: translateY(-2px);
    }
    
    .btn-outline {
      background: white;
      color: #e94560;
      border: 2px solid #e94560;
    }
    
    .btn-outline:hover {
      background: #e94560;
      color: white;
    }
    
    .btn-danger {
      background: #f56565;
      color: white;
    }
    
    .btn-danger:hover {
      background: #e53e3e;
    }
    
    .btn-small {
      padding: 10px 16px;
      font-size: 13px;
    }
    
    .btn-icon {
      position: relative;
    }
    
    .auth-footer {
      text-align: center;
      padding: 24px 32px;
      background: #f7fafc;
      border-top: 1px solid #e2e8f0;
    }
    
    .auth-footer p {
      color: #718096;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #e94560;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .password-strength {
      height: 4px;
      background: #e2e8f0;
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.3s;
      border-radius: 2px;
    }
    
    .password-strength-bar.weak {
      width: 33%;
      background: #f56565;
    }
    
    .password-strength-bar.medium {
      width: 66%;
      background: #f6ad55;
    }
    
    .password-strength-bar.strong {
      width: 100%;
      background: #48bb78;
    }
    
    /* Header Styles */
    header {
      background: white;
      padding: 24px 40px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      margin-bottom: 28px;
      position: sticky;
      top: 20px;
      z-index: 100;
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);
      overflow: hidden;
    }
    
    .logo::before {
      content: '';
      position: absolute;
      width: 30px;
      height: 30px;
      background: white;
      border-radius: 50%;
      top: 8px;
      left: 8px;
      opacity: 0.3;
    }
    
    .logo::after {
      content: '‚ú®';
      position: absolute;
      font-size: 32px;
      z-index: 1;
    }
    
    .brand-info h1 {
      font-size: 26px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 2px;
      font-weight: 800;
      letter-spacing: -0.5px;
    }
    
    .brand-info p {
      font-size: 13px;
      color: #718096;
      font-weight: 500;
    }
    
    .search-container {
      flex: 1;
      max-width: 600px;
      min-width: 300px;
    }
    
    .search-bar {
      display: flex;
      align-items: center;
      background: #f7fafc;
      border-radius: 14px;
      padding: 14px 20px;
      gap: 12px;
      width: 100%;
      border: 2px solid #e2e8f0;
      transition: all 0.3s;
    }
    
    .search-bar:focus-within {
      border-color: #e94560;
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .search-bar input {
      border: none;
      background: transparent;
      outline: none;
      flex: 1;
      font-size: 15px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .user-menu {
      position: relative;
    }
    
    .user-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(233, 69, 96, 0.3);
      transition: all 0.3s;
    }
    
    .user-avatar:hover {
      transform: scale(1.1);
    }
    
    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 16px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.15);
      margin-top: 12px;
      min-width: 240px;
      display: none;
      z-index: 1000;
    }
    
    .user-dropdown.active {
      display: block;
    }
    
    .user-dropdown-header {
      padding: 20px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .user-dropdown-header strong {
      display: block;
      color: #2d3748;
      margin-bottom: 4px;
      font-size: 15px;
    }
    
    .user-dropdown-header span {
      font-size: 13px;
      color: #718096;
    }
    
    .user-dropdown-item {
      padding: 14px 20px;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #2d3748;
      font-size: 14px;
      font-weight: 500;
    }
    
    .user-dropdown-item:hover {
      background: #f7fafc;
    }
    
    .user-dropdown-item:last-child {
      border-top: 1px solid #e2e8f0;
      color: #f56565;
    }
    
    .badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #e94560;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      border: 2px solid white;
    }
    
    .nav-tabs {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    
    .nav-tabs::-webkit-scrollbar {
      height: 4px;
    }
    
    .nav-tabs::-webkit-scrollbar-thumb {
      background: #e2e8f0;
      border-radius: 4px;
    }
    
    .nav-tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      font-size: 14px;
      font-weight: 600;
      color: #718096;
      cursor: pointer;
      border-radius: 12px;
      transition: all 0.3s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .nav-tab:hover {
      background: #f7fafc;
      color: #e94560;
    }
    
    .nav-tab.active {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(233, 69, 96, 0.3);
    }
    
    /* Filter Bar */
    .filter-bar {
      background: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 24px;
      display: flex;
      gap: 16px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .filter-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .filter-group label {
      font-size: 13px;
      font-weight: 600;
      color: #4a5568;
      white-space: nowrap;
    }
    
    .filter-group select,
    .filter-group input {
      padding: 10px 14px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 14px;
      background: white;
      cursor: pointer;
      transition: all 0.3s;
      min-width: 140px;
    }
    
    .filter-group select:focus,
    .filter-group input:focus {
      outline: none;
      border-color: #e94560;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .filter-group input[type="number"] {
      min-width: 100px;
    }
    
    .filter-actions {
      margin-left: auto;
      display: flex;
      gap: 10px;
    }
    
    /* Content Area */
    .content-area {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      min-height: 600px;
    }
    
    .view-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
      flex-wrap: wrap;
      gap: 20px;
      padding-bottom: 24px;
      border-bottom: 2px solid #f7fafc;
    }
    
    .view-header h2 {
      font-size: 32px;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
    }
    
    .results-count {
      font-size: 16px;
      color: #718096;
      font-weight: 400;
    }
    
    .view-controls {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .sort-select {
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 14px;
      cursor: pointer;
      background: white;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .sort-select:focus {
      outline: none;
      border-color: #e94560;
    }
    
    .view-toggle {
      display: flex;
      gap: 4px;
      background: #f7fafc;
      padding: 4px;
      border-radius: 10px;
    }
    
    .view-toggle button {
      padding: 10px 14px;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 8px;
      font-size: 18px;
      transition: all 0.2s;
    }
    
    .view-toggle button.active {
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    /* Product Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 28px;
    }
    
    .products-list {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    
    .product-card {
      background: white;
      border: 2px solid #f7fafc;
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }
    
    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 16px 40px rgba(233, 69, 96, 0.15);
      border-color: #e94560;
    }
    
    .product-badge {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #48bb78;
      color: white;
      padding: 8px 16px;
      border-radius: 24px;
      font-size: 11px;
      font-weight: 700;
      z-index: 10;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
    }
    
    .product-badge.out-of-stock {
      background: #f56565;
    }
    
    .product-badge.new {
      background: #9f7aea;
    }
    
    .wishlist-btn {
      position: absolute;
      top: 16px;
      left: 16px;
      background: white;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 22px;
      z-index: 10;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .wishlist-btn:hover {
      transform: scale(1.15);
    }
    
    .wishlist-btn.active {
      color: #e94560;
      background: #fff5f7;
    }
    
    .product-image {
      width: 100%;
      height: 260px;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
      position: relative;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.08);
    }
    
    .product-info {
      padding: 24px;
    }
    
    .product-category {
      font-size: 11px;
      color: #e94560;
      background: #fff5f7;
      padding: 6px 14px;
      border-radius: 14px;
      display: inline-block;
      margin-bottom: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
    }
    
    .product-tag {
      font-size: 10px;
      color: #718096;
      background: #f7fafc;
      padding: 4px 10px;
      border-radius: 10px;
      font-weight: 600;
    }
    
    .product-name {
      font-size: 18px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 12px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .product-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .stars {
      color: #fbbf24;
      letter-spacing: 2px;
    }
    
    .rating-value {
      font-weight: 600;
      color: #2d3748;
    }
    
    .review-count {
      color: #a0aec0;
      font-size: 13px;
    }
    
    .product-price {
      font-size: 26px;
      font-weight: 800;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
    }
    
    .product-actions {
      display: flex;
      gap: 10px;
    }
    
    .product-actions .btn {
      flex: 1;
    }
    
    /* List View */
    .product-card-list {
      display: flex;
      gap: 24px;
      border: 2px solid #f7fafc;
      border-radius: 20px;
      padding: 24px;
      transition: all 0.3s;
      background: white;
    }
    
    .product-card-list:hover {
      border-color: #e94560;
      box-shadow: 0 12px 32px rgba(233, 69, 96, 0.12);
    }
    
    .product-card-list .product-image {
      width: 220px;
      height: 220px;
      flex-shrink: 0;
      border-radius: 16px;
    }
    
    .product-card-list .product-info {
      flex: 1;
      padding: 0;
    }
    
    /* Admin Panel */
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 32px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(233, 69, 96, 0.3);
      transition: transform 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-6px);
    }
    
    .stat-card h3 {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }
    
    .stat-card .stat-value {
      font-size: 40px;
      font-weight: 800;
      margin-bottom: 8px;
    }
    
    .stat-card .stat-label {
      font-size: 13px;
      opacity: 0.85;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.75);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 24px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      position: relative;
      margin: auto;
    }
    
    .modal-content.large {
      max-width: 1000px;
    }
    
    .product-detail-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-bottom: 40px;
    }
    
    .detail-image {
      width: 100%;
      height: 420px;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 120px;
      overflow: hidden;
    }
    
    .detail-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .detail-info h2 {
      font-size: 32px;
      color: #2d3748;
      margin-bottom: 16px;
      line-height: 1.3;
      font-weight: 800;
    }
    
    .detail-price {
      font-size: 40px;
      font-weight: 800;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 24px;
    }
    
    .detail-section {
      margin-bottom: 32px;
      padding-bottom: 32px;
      border-bottom: 2px solid #f7fafc;
    }
    
    .detail-section:last-child {
      border-bottom: none;
    }
    
    .detail-section h3 {
      font-size: 20px;
      color: #2d3748;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
    }
    
    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      font-size: 15px;
    }
    
    .detail-row strong {
      color: #4a5568;
    }
    
    .detail-row span {
      color: #2d3748;
      font-weight: 600;
    }
    
    .process-timeline {
      position: relative;
      padding-left: 36px;
    }
    
    .process-step {
      position: relative;
      padding: 20px 0;
    }
    
    .process-step::before {
      content: '';
      position: absolute;
      left: -36px;
      top: 28px;
      width: 18px;
      height: 18px;
      background: #e94560;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 0 0 2px #e94560;
    }
    
    .process-step::after {
      content: '';
      position: absolute;
      left: -28px;
      top: 46px;
      width: 2px;
      height: calc(100% - 18px);
      background: #f7fafc;
    }
    
    .process-step:last-child::after {
      display: none;
    }
    
    .process-step h4 {
      font-size: 17px;
      color: #2d3748;
      margin-bottom: 8px;
      font-weight: 700;
    }
    
    .process-step p {
      font-size: 14px;
      color: #718096;
      line-height: 1.7;
    }
    
    .materials-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
    }
    
    .material-item {
      background: #f7fafc;
      padding: 14px;
      border-radius: 12px;
      font-size: 14px;
      color: #2d3748;
    }
    
    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #f56565;
      color: white;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    
    .modal-close:hover {
      transform: rotate(90deg);
      background: #e53e3e;
    }
    
    .image-upload-area {
      border: 3px dashed #cbd5e0;
      border-radius: 20px;
      padding: 56px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 24px;
      background: #f7fafc;
    }
    
    .image-upload-area:hover {
      border-color: #e94560;
      background: #fff5f7;
    }
    
    .image-upload-area.has-image {
      padding: 0;
      border: none;
      background: transparent;
    }
    
    .upload-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    
    .image-preview {
      width: 100%;
      max-height: 380px;
      object-fit: cover;
      border-radius: 20px;
      display: none;
    }
    
    .image-preview.active {
      display: block;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 120px 20px;
      color: #718096;
    }
    
    .empty-state-icon {
      font-size: 100px;
      margin-bottom: 28px;
      opacity: 0.5;
    }
    
    .empty-state h3 {
      font-size: 26px;
      margin-bottom: 14px;
      color: #2d3748;
      font-weight: 700;
    }
    
    .empty-state p {
      font-size: 16px;
      margin-bottom: 28px;
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 28px;
      right: 28px;
      background: #48bb78;
      color: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease;
      max-width: 420px;
      font-weight: 500;
    }
    
    .notification.active {
      display: block;
    }
    
    .notification.error {
      background: #f56565;
    }
    
    .notification.info {
      background: #4299e1;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 28px;
      color: #e94560;
      font-size: 16px;
      font-weight: 600;
    }
    
    .loading-spinner.active {
      display: block;
    }
    
    /* Cost Calculator */
    .calculator-section {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 40px;
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 12px 32px rgba(233, 69, 96, 0.3);
    }
    
    .calculator-section h3 {
      font-size: 28px;
      margin-bottom: 28px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
    }
    
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 24px;
      margin-bottom: 28px;
    }
    
    .calculator-input {
      background: rgba(255,255,255,0.12);
      border: 2px solid rgba(255,255,255,0.25);
      border-radius: 16px;
      padding: 20px;
    }
    
    .calculator-input label {
      display: block;
      font-size: 13px;
      margin-bottom: 10px;
      opacity: 0.95;
      font-weight: 600;
    }
    
    .calculator-input input,
    .calculator-input select {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      background: white;
      color: #2d3748;
      font-weight: 500;
    }
    
    .cost-result {
      background: rgba(255,255,255,0.18);
      border-radius: 16px;
      padding: 32px;
      text-align: center;
    }
    
    .cost-result h4 {
      font-size: 16px;
      margin-bottom: 16px;
      opacity: 0.95;
      font-weight: 600;
    }
    
    .cost-result .cost-value {
      font-size: 52px;
      font-weight: 800;
      margin-bottom: 12px;
    }
    
    .cost-breakdown {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 24px;
      font-size: 14px;
    }
    
    .cost-breakdown-item {
      background: rgba(255,255,255,0.12);
      padding: 16px;
      border-radius: 12px;
    }
    
    .cost-breakdown-item strong {
      display: block;
      margin-bottom: 6px;
      font-size: 12px;
      opacity: 0.85;
    }
    
    .cost-breakdown-item span {
      font-size: 20px;
      font-weight: 700;
    }
    
    /* Footer */
    footer {
      background: white;
      padding: 56px 40px 36px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      margin-top: 48px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 48px;
      margin-bottom: 40px;
    }
    
    .footer-brand {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .footer-logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .footer-logo {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);
      overflow: hidden;
    }
    
    .footer-logo::before {
      content: '';
      position: absolute;
      width: 35px;
      height: 35px;
      background: white;
      border-radius: 50%;
      top: 10px;
      left: 10px;
      opacity: 0.3;
    }
    
    .footer-logo::after {
      content: '‚ú®';
      position: absolute;
      font-size: 36px;
      z-index: 1;
    }
    
    .footer-brand h2 {
      font-size: 30px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
      font-weight: 800;
    }
    
    .footer-brand p {
      color: #718096;
      line-height: 1.8;
      font-size: 14px;
    }
    
    .footer-section h3 {
      font-size: 17px;
      color: #2d3748;
      margin-bottom: 20px;
      font-weight: 700;
    }
    
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .footer-links a {
      color: #718096;
      text-decoration: none;
      font-size: 14px;
      transition: color 0.3s;
      font-weight: 500;
    }
    
    .footer-links a:hover {
      color: #e94560;
    }
    
    .footer-contact {
      display: flex;
      flex-direction: column;
      gap: 14px;
      font-size: 14px;
      color: #718096;
    }
    
    .footer-contact-item {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .footer-bottom {
      border-top: 2px solid #f7fafc;
      padding-top: 28px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .footer-bottom p {
      color: #718096;
      font-size: 14px;
      margin: 0;
    }
    
    .footer-social {
      display: flex;
      gap: 14px;
    }
    
    .social-icon {
      width: 44px;
      height: 44px;
      background: #f7fafc;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .social-icon:hover {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      transform: translateY(-4px);
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .product-detail-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .header-top {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-container {
        width: 100%;
        max-width: none;
      }
      
      .header-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      }
      
      .view-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .view-controls {
        justify-content: space-between;
      }
      
      .calculator-grid {
        grid-template-columns: 1fr;
      }
      
      .cost-breakdown {
        grid-template-columns: 1fr;
      }
      
      .filter-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .filter-actions {
        margin-left: 0;
        width: 100%;
      }
      
      .footer-content {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-stats {
        grid-template-columns: 1fr;
      }
      
      .auth-box {
        margin: 0;
      }
      
      .materials-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Authentication Screen -->
  <div id="authScreen" class="auth-container" style="display: none;"><!-- Login Form -->
   <div id="loginForm" class="auth-box">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>EmbroiTech</h1>
     <p>Discover Beautiful Embroidery Designs</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleLogin(event)">
      <div class="form-group"><label for="loginEmail">Email Address</label> <input type="email" id="loginEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="loginPassword">Password</label> <input type="password" id="loginPassword" required placeholder="Enter your password" autocomplete="current-password">
      </div><button type="submit" class="btn btn-primary" id="loginBtn"> üîê Sign In </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Don't have an account? <a onclick="showSignup()">Create Account</a></p>
    </div>
   </div><!-- Signup Form -->
   <div id="signupForm" class="auth-box" style="display: none;">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>Create Account</h1>
     <p>Join EmbroiTech Today</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleSignup(event)">
      <div class="form-group"><label for="signupFullName">Full Name</label> <input type="text" id="signupFullName" required placeholder="John Doe" autocomplete="name">
      </div>
      <div class="form-group"><label for="signupEmail">Email Address</label> <input type="email" id="signupEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="signupPhone">Phone Number</label> <input type="tel" id="signupPhone" required placeholder="+91 98765 43210" autocomplete="tel">
      </div>
      <div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" required placeholder="Create a strong password" autocomplete="new-password" oninput="checkPasswordStrength()">
       <div class="password-strength">
        <div class="password-strength-bar" id="passwordStrengthBar"></div>
       </div>
      </div>
      <div class="form-group"><label for="signupAddress">Address (Optional)</label> <textarea id="signupAddress" placeholder="Your delivery address" autocomplete="street-address"></textarea>
      </div><button type="submit" class="btn btn-primary" id="signupBtn"> ‚ú® Create Account </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Already have an account? <a onclick="showLogin()">Sign In</a></p>
    </div>
   </div>
  </div><!-- Main Application -->
  <div id="mainApp" class="container" style="display: none;"><!-- Header -->
   <header>
    <div class="header-top">
     <div class="logo-section">
      <div class="logo"></div>
      <div class="brand-info">
       <h1>EmbroiTech</h1>
       <p>Premium Embroidery Designs</p>
      </div>
     </div>
     <div class="search-container">
      <div class="search-bar"><span style="font-size: 20px;">üîç</span> <input type="text" id="mainSearch" placeholder="Search designs: mirror work, kurti, choli, ghagra, bridal..." oninput="handleSearch()">
      </div>
     </div>
     <div class="header-actions"><button class="btn btn-outline btn-icon" onclick="showView('wishlist')"> <span>‚ù§Ô∏è</span> <span class="badge" id="wishlistCount">0</span> </button> <button class="btn btn-primary btn-icon" onclick="showView('cart')"> <span>üõí</span> <span class="badge" id="cartCount">0</span> </button>
      <div class="user-menu">
       <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">
        U
       </div>
       <div class="user-dropdown" id="userDropdown">
        <div class="user-dropdown-header"><strong id="userDisplayName">User</strong> <span id="userDisplayEmail">user@email.com</span>
        </div>
        <div class="user-dropdown-item" onclick="showView('profile')">
         üë§ My Profile
        </div>
        <div class="user-dropdown-item" onclick="showView('orders')">
         üì¶ My Orders
        </div>
        <div class="user-dropdown-item" onclick="showView('calculator')">
         üßÆ Cost Calculator
        </div>
        <div class="user-dropdown-item" onclick="showView('admin')" id="adminMenuItem" style="display: none;">
         ‚öôÔ∏è Admin Dashboard
        </div>
        <div class="user-dropdown-item" onclick="handleLogout()">
         üö™ Logout
        </div>
       </div>
      </div>
     </div>
    </div>
    <nav class="nav-tabs"><button class="nav-tab active" onclick="showView('browse')">üè† Home</button> <button class="nav-tab" onclick="showView('categories')">üìÇ Categories</button> <button class="nav-tab" onclick="showView('trending')">üî• Trending</button> <button class="nav-tab" onclick="showView('new')">‚ú® New Arrivals</button> <button class="nav-tab" onclick="showView('calculator')">üßÆ Cost Calculator</button>
    </nav>
   </header><!-- Filter Bar -->
   <div class="filter-bar" id="filterBar">
    <div class="filter-group"><label>Category:</label> <select id="categoryFilter" onchange="applyFilters()"> <option value="">All Categories</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
    </div>
    <div class="filter-group"><label>Min Price:</label> <input type="number" id="minPrice" placeholder="‚Çπ0" oninput="applyFilters()">
    </div>
    <div class="filter-group"><label>Max Price:</label> <input type="number" id="maxPrice" placeholder="‚Çπ10000" oninput="applyFilters()">
    </div>
    <div class="filter-group"><label>Rating:</label> <select id="ratingFilter" onchange="applyFilters()"> <option value="">All Ratings</option> <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 Stars</option> <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê 4+ Stars</option> <option value="3">‚≠ê‚≠ê‚≠ê 3+ Stars</option> </select>
    </div>
    <div class="filter-group"><label>Stock:</label> <select id="stockFilter" onchange="applyFilters()"> <option value="">All Items</option> <option value="in-stock">In Stock Only</option> </select>
    </div>
    <div class="filter-actions"><button class="btn btn-outline btn-small" onclick="clearFilters()"> Clear Filters </button>
    </div>
   </div><!-- Main Content Area -->
   <main class="content-area"><!-- Browse View -->
    <div id="browseView" class="view-content">
     <div class="view-header">
      <div>
       <h2>‚ú® All Designs <span class="results-count" id="resultsCount">(0 items)</span></h2>
      </div>
      <div class="view-controls"><select class="sort-select" id="sortSelect" onchange="applyFilters()"> <option value="newest">Newest First</option> <option value="price-low">Price: Low to High</option> <option value="price-high">Price: High to Low</option> <option value="rating">Highest Rated</option> <option value="popular">Most Popular</option> </select>
       <div class="view-toggle"><button class="active" onclick="setViewMode('grid')" id="gridViewBtn">‚äû</button> <button onclick="setViewMode('list')" id="listViewBtn">‚ò∞</button>
       </div>
      </div>
     </div>
     <div class="products-grid" id="productsGrid">
      <div class="empty-state">
       <div class="empty-state-icon">
        üé®
       </div>
       <h3>No designs available yet</h3>
       <p>Be the first to upload beautiful embroidery designs!</p>
      </div>
     </div>
    </div><!-- Cost Calculator View -->
    <div id="calculatorView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üßÆ Design Cost Calculator</h2>
     </div>
     <div class="calculator-section">
      <h3>üí∞ Calculate Your Design Cost</h3>
      <p style="opacity: 0.9; margin-bottom: 28px;">Enter the details of your embroidery design to estimate the cost and time required.</p>
      <div class="calculator-grid">
       <div class="calculator-input"><label>Design Type</label> <select id="calcDesignType" onchange="calculateCost()"> <option value="mirror">Mirror Work</option> <option value="hand">Hand Embroidery</option> <option value="zari">Zari Work</option> <option value="thread">Thread Work</option> <option value="sequin">Sequin Work</option> </select>
       </div>
       <div class="calculator-input"><label>Design Size (sq. inches)</label> <input type="number" id="calcSize" value="100" min="1" oninput="calculateCost()" placeholder="e.g., 100">
       </div>
       <div class="calculator-input"><label>Complexity Level</label> <select id="calcComplexity" onchange="calculateCost()"> <option value="simple">Simple</option> <option value="medium">Medium</option> <option value="complex">Complex</option> <option value="intricate">Intricate</option> </select>
       </div>
       <div class="calculator-input"><label>Number of Colors</label> <input type="number" id="calcColors" value="3" min="1" max="20" oninput="calculateCost()" placeholder="e.g., 3">
       </div>
       <div class="calculator-input"><label>Material Quality</label> <select id="calcMaterial" onchange="calculateCost()"> <option value="standard">Standard</option> <option value="premium">Premium</option> <option value="luxury">Luxury</option> </select>
       </div>
       <div class="calculator-input"><label>Quantity</label> <input type="number" id="calcQuantity" value="1" min="1" oninput="calculateCost()" placeholder="e.g., 1">
       </div>
      </div>
      <div class="cost-result">
       <h4>Estimated Total Cost</h4>
       <div class="cost-value">
        ‚Çπ<span id="totalCost">0</span>
       </div>
       <p style="opacity: 0.9; font-size: 14px;">Per piece: ‚Çπ<span id="perPieceCost">0</span></p>
       <div class="cost-breakdown">
        <div class="cost-breakdown-item"><strong>‚è±Ô∏è Time Required</strong> <span id="timeRequired">0 hrs</span>
        </div>
        <div class="cost-breakdown-item"><strong>üßµ Material Cost</strong> <span>‚Çπ<span id="materialCost">0</span></span>
        </div>
        <div class="cost-breakdown-item"><strong>üë®‚Äçüé® Labor Cost</strong> <span>‚Çπ<span id="laborCost">0</span></span>
        </div>
       </div>
      </div>
     </div>
     <div style="background: #f7fafc; padding: 32px; border-radius: 20px; margin-top: 28px;">
      <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 22px; font-weight: 700;">üìä Cost Breakdown Details</h3>
      <div style="display: grid; gap: 14px; color: #4a5568; font-size: 15px; line-height: 1.9;">
       <p><strong>Design Type:</strong> Different embroidery types have varying complexity and material costs.</p>
       <p><strong>Size:</strong> Larger designs require more materials and time.</p>
       <p><strong>Complexity:</strong> Intricate patterns take longer and require skilled artisans.</p>
       <p><strong>Colors:</strong> More colors mean more thread changes and precision work.</p>
       <p><strong>Material Quality:</strong> Premium materials increase the overall cost but ensure better durability.</p>
       <p><strong>Quantity:</strong> Bulk orders may qualify for discounts (applied automatically).</p>
      </div>
     </div>
    </div><!-- Categories View -->
    <div id="categoriesView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üìÇ Browse by Category</h2>
     </div>
     <div class="products-grid" id="categoriesGrid"></div>
    </div><!-- Trending View -->
    <div id="trendingView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üî• Trending Designs</h2>
     </div>
     <div class="products-grid" id="trendingGrid"></div>
    </div><!-- New Arrivals View -->
    <div id="newView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>‚ú® New Arrivals</h2>
     </div>
     <div class="products-grid" id="newGrid"></div>
    </div><!-- Wishlist View -->
    <div id="wishlistView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>‚ù§Ô∏è My Wishlist</h2>
     </div>
     <div class="products-grid" id="wishlistGrid"></div>
    </div><!-- Cart View -->
    <div id="cartView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üõí Shopping Cart</h2>
     </div>
     <div id="cartContent"></div>
    </div><!-- Profile View -->
    <div id="profileView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üë§ My Profile</h2>
     </div>
     <div style="max-width: 600px;">
      <form onsubmit="updateProfile(event)">
       <div class="form-group"><label for="profileName">Full Name</label> <input type="text" id="profileName" required>
       </div>
       <div class="form-group"><label for="profileEmail">Email</label> <input type="email" id="profileEmail" disabled>
       </div>
       <div class="form-group"><label for="profilePhone">Phone</label> <input type="tel" id="profilePhone" required>
       </div>
       <div class="form-group"><label for="profileAddress">Address</label> <textarea id="profileAddress"></textarea>
       </div><button type="submit" class="btn btn-primary">Update Profile</button>
      </form>
     </div>
    </div><!-- Orders View -->
    <div id="ordersView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üì¶ My Orders</h2>
     </div>
     <div id="ordersContent"></div>
    </div><!-- Admin View -->
    <div id="adminView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>‚öôÔ∏è Admin Dashboard</h2><button class="btn btn-secondary" onclick="openUploadModal()"> ‚ûï Upload Design </button>
     </div>
     <div class="admin-stats">
      <div class="stat-card">
       <h3>Total Designs</h3>
       <div class="stat-value" id="totalDesigns">
        0
       </div>
       <div class="stat-label">
        Uploaded designs
       </div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
       <h3>In Stock</h3>
       <div class="stat-value" id="inStockCount">
        0
       </div>
       <div class="stat-label">
        Available items
       </div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
       <h3>Categories</h3>
       <div class="stat-value" id="categoriesCount">
        5
       </div>
       <div class="stat-label">
        Design types
       </div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);">
       <h3>Total Users</h3>
       <div class="stat-value" id="totalUsers">
        0
       </div>
       <div class="stat-label">
        Registered users
       </div>
      </div>
     </div><!-- Analytics Section -->
     <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.08); margin-bottom: 28px;">
      <h3 style="font-size: 26px; color: #2d3748; margin-bottom: 28px; display: flex; align-items: center; gap: 12px; font-weight: 700;">üìä Website Analytics</h3>
      <div class="admin-stats" style="margin-bottom: 40px;">
       <div class="stat-card" style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);">
        <h3>Total Searches</h3>
        <div class="stat-value" id="totalSearches">
         0
        </div>
        <div class="stat-label">
         Search queries
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
        <h3>Total Purchases</h3>
        <div class="stat-value" id="totalPurchases">
         0
        </div>
        <div class="stat-label">
         Completed orders
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
        <h3>Items in Carts</h3>
        <div class="stat-value" id="totalCartItems">
         0
        </div>
        <div class="stat-label">
         Across all users
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);">
        <h3>Revenue</h3>
        <div class="stat-value">
         ‚Çπ<span id="totalRevenue">0</span>
        </div>
        <div class="stat-label">
         Total earnings
        </div>
       </div>
      </div><!-- Top Searches -->
      <div style="margin-bottom: 40px;">
       <h4 style="font-size: 20px; color: #2d3748; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 700;">üîç Top Search Terms</h4>
       <div id="topSearches" style="background: #f7fafc; padding: 24px; border-radius: 16px;"></div>
      </div><!-- Popular Products -->
      <div style="margin-bottom: 40px;">
       <h4 style="font-size: 20px; color: #2d3748; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 700;">üî• Most Added to Cart</h4>
       <div id="popularProducts" style="background: #f7fafc; padding: 24px; border-radius: 16px;"></div>
      </div><!-- Recent Activity -->
      <div>
       <h4 style="font-size: 20px; color: #2d3748; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 700;">üìà Recent Activity</h4>
       <div id="recentActivity" style="background: #f7fafc; padding: 24px; border-radius: 16px; max-height: 400px; overflow-y: auto;"></div>
      </div>
     </div>
     <h3 style="font-size: 22px; color: #2d3748; margin-bottom: 24px; font-weight: 700;">All Products</h3>
     <div class="products-grid" id="adminProductsGrid"></div>
    </div>
   </main><!-- Footer -->
   <footer>
    <div class="footer-content">
     <div class="footer-brand">
      <div class="footer-logo-section">
       <div class="footer-logo"></div>
       <h2>EmbroiTech</h2>
      </div>
      <p>Your premier destination for exquisite embroidery designs. We bring together traditional craftsmanship and modern technology to deliver stunning patterns for all your creative needs.</p>
      <p style="margin-top: 12px;"><strong>üé® Design. Create. Inspire.</strong></p>
     </div>
     <div class="footer-section">
      <h3>Quick Links</h3>
      <div class="footer-links"><a href="#" onclick="showView('browse'); return false;">Browse Designs</a> <a href="#" onclick="showView('categories'); return false;">Categories</a> <a href="#" onclick="showView('trending'); return false;">Trending</a> <a href="#" onclick="showView('new'); return false;">New Arrivals</a> <a href="#" onclick="showView('calculator'); return false;">Cost Calculator</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Customer Care</h3>
      <div class="footer-links"><a href="#" onclick="showView('profile'); return false;">My Account</a> <a href="#" onclick="showView('orders'); return false;">Order History</a> <a href="#" onclick="showView('wishlist'); return false;">Wishlist</a> <a href="#" onclick="showView('cart'); return false;">Shopping Cart</a> <a href="#">Help &amp; Support</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Contact Us</h3>
      <div class="footer-contact">
       <div class="footer-contact-item"><span>üìß</span> <span>info@embroitech.com</span>
       </div>
       <div class="footer-contact-item"><span>üìû</span> <span>+91 98765 43210</span>
       </div>
       <div class="footer-contact-item"><span>üìç</span> <span>Mumbai, India</span>
       </div>
       <div class="footer-contact-item"><span>‚è∞</span> <span>Mon-Sat: 9AM-6PM</span>
       </div>
      </div>
     </div>
    </div>
    <div class="footer-bottom">
     <p>¬© 2024 EmbroiTech. All rights reserved. Crafted with ‚ù§Ô∏è for embroidery enthusiasts.</p>
     <div class="footer-social">
      <div class="social-icon" title="Facebook">
       üìò
      </div>
      <div class="social-icon" title="Instagram">
       üì∑
      </div>
      <div class="social-icon" title="Twitter">
       üê¶
      </div>
      <div class="social-icon" title="Pinterest">
       üìå
      </div>
      <div class="social-icon" title="WhatsApp">
       üí¨
      </div>
     </div>
    </div>
   </footer>
  </div><!-- Upload Product Modal -->
  <div id="uploadModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closeUploadModal()">√ó</button>
    <h2 style="margin-bottom: 28px; color: #2d3748; font-weight: 800;">Upload New Design</h2>
    <div class="loading-spinner" id="uploadLoading">
     ‚è≥ Uploading...
    </div>
    <form id="uploadForm" onsubmit="handleUpload(event)">
     <div class="form-group"><label>Upload Image *</label>
      <div class="image-upload-area" id="uploadArea" onclick="document.getElementById('productImage').click()">
       <div class="upload-icon">
        üì∏
       </div>
       <p style="color: #718096; font-size: 16px; font-weight: 600;">Click to select image</p>
       <p style="color: #a0aec0; font-size: 13px; margin-top: 10px;">JPG, PNG, GIF (Max 5MB)</p>
      </div><input type="file" id="productImage" accept="image/*" style="display: none;" onchange="previewImage(event)" required> <img id="imagePreview" class="image-preview" alt="Preview">
     </div>
     <div class="form-group"><label for="productName">Design Name *</label> <input type="text" id="productName" required placeholder="e.g., Royal Mirror Work Pattern">
     </div>
     <div class="form-group"><label for="productCategory">Category *</label> <select id="productCategory" required> <option value="">Select Category</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
     </div>
     <div class="form-group"><label for="productTags">Search Tags (comma separated) *</label> <input type="text" id="productTags" required placeholder="e.g., mirror, bridal, traditional, golden, kurti, choli">
      <p style="font-size: 12px; color: #718096; margin-top: 6px;">Add keywords like: mirror work, hand design, kurti, choli, ghagra, bridal, traditional</p>
     </div>
     <div class="form-group"><label for="productPrice">Price (‚Çπ) *</label> <input type="number" id="productPrice" required min="0" step="0.01" placeholder="e.g., 1299">
     </div>
     <div class="form-group"><label for="productDescription">Description</label> <textarea id="productDescription" placeholder="Describe the design, materials, and special features..."></textarea>
     </div>
     <div class="form-group"><label for="productRating">Rating (1-5)</label> <input type="number" id="productRating" min="1" max="5" step="0.1" value="4.5">
     </div>
     <div class="form-group"><label for="productReviews">Number of Reviews</label> <input type="number" id="productReviews" min="0" value="0">
     </div>
     <div class="form-group"><label style="display: flex; align-items: center; gap: 12px; cursor: pointer;"> <input type="checkbox" id="productInStock" checked style="width: 24px; height: 24px; accent-color: #e94560;"> <span>In Stock</span> </label>
     </div><button type="submit" class="btn btn-primary"> Upload Design </button>
    </form>
   </div>
  </div><!-- Product Detail Modal -->
  <div id="productDetailModal" class="modal">
   <div class="modal-content large"><button class="modal-close" onclick="closeProductDetail()">√ó</button>
    <div id="productDetailContent"></div>
   </div>
  </div><!-- Payment Modal -->
  <div id="paymentModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closePaymentModal()">√ó</button>
    <h2 style="margin-bottom: 28px; color: #2d3748; font-weight: 800;">üí≥ Payment Details</h2>
    <div style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); color: white; padding: 28px; border-radius: 20px; margin-bottom: 28px; text-align: center;">
     <p style="font-size: 14px; opacity: 0.95; margin-bottom: 10px;">Total Amount</p>
     <p style="font-size: 40px; font-weight: 800;">‚Çπ<span id="paymentAmount">0.00</span></p>
    </div>
    <form id="paymentForm" onsubmit="processPayment(event)">
     <div class="form-group"><label for="cardNumber">Card Number *</label> <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
     </div>
     <div class="form-group"><label for="cardName">Cardholder Name *</label> <input type="text" id="cardName" required placeholder="John Doe">
     </div>
     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
      <div class="form-group"><label for="expiryDate">Expiry Date *</label> <input type="text" id="expiryDate" required placeholder="MM/YY" maxlength="5" oninput="formatExpiryDate(this)">
      </div>
      <div class="form-group"><label for="cvv">CVV *</label> <input type="text" id="cvv" required placeholder="123" maxlength="4" pattern="\d{3,4}">
      </div>
     </div><button type="submit" class="btn btn-primary" id="paymentBtn"> üí≥ Pay Now </button>
    </form>
    <div style="background: #f7fafc; padding: 20px; border-radius: 12px; margin-top: 24px;">
     <p style="font-size: 12px; color: #718096; text-align: center;">üîí Secure payment processing. Your card details are encrypted.</p>
    </div>
   </div>
  </div>
  <div id="notification" class="notification"></div>
  <script>
    // State
    let allRecords = [];
    let currentUser = null;
    let cartItems = [];
    let wishlistItems = [];
    let currentView = 'browse';
    let viewMode = 'grid';
    let searchTimeout = null;
    
    // Activity Tracking
    function trackActivity(activityType, data) {
      const activity = {
        __backendId: 'local_' + Date.now() + '_' + Math.random(),
        id: Date.now().toString() + '_' + Math.random(),
        type: 'activity',
        activityType: activityType,
        userId: currentUser ? currentUser.email : 'guest',
        timestamp: new Date().toISOString(),
        ...data
      };
      
      allRecords.push(activity);
      saveToLocalStorage();
    }

    // Initialize
    function init() {
      loadFromLocalStorage();
      seedInitialProducts();
      checkAuth();
      calculateCost();
    }
    
    // Seed initial products with realistic data
    function seedInitialProducts() {
      const existingProducts = allRecords.filter(r => r.type === 'product');
      if (existingProducts.length > 0) return;
      
      const sampleProducts = [
        {
          __backendId: 'seed_1',
          id: '1',
          type: 'product',
          productName: 'Royal Bridal Mirror Work Lehenga Design',
          category: 'Mirror Work',
          tags: 'mirror work, bridal, lehenga, wedding, traditional, red, golden',
          price: 2499,
          description: 'Exquisite mirror work design perfect for bridal lehengas. Features intricate patterns with traditional motifs and premium quality mirrors.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjRhNGE7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTIwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjMiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSIzMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIzMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48dGV4dCB4PSIyMDAiIHk9IjIyMCIgZm9udC1zaXplPSI2MCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIj7wn5qePC90ZXh0Pjwvc3ZnPg==',
          rating: 4.9,
          reviews: 156,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_2',
          id: '2',
          type: 'product',
          productName: 'Elegant Hand Embroidery Kurti Pattern',
          category: 'Hand Embroidery',
          tags: 'hand embroidery, kurti, casual, floral, cotton, daily wear',
          price: 899,
          description: 'Beautiful hand-embroidered floral pattern ideal for kurtis. Delicate threadwork with vibrant colors.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjk4YTA7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmNjZGQ7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iODAiIGZpbGw9IiNmZjY2OTkiIG9wYWNpdHk9IjAuNiIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjI1MCIgY3k9IjE1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjI1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjI1MCIgY3k9IjI1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjx0ZXh0IHg9IjIwMCIgeT0iMjIwIiBmb250LXNpemU9IjYwIiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiPuKcizwvdGV4dD48L3N2Zz4=',
          rating: 4.7,
          reviews: 89,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_3',
          id: '3',
          type: 'product',
          productName: 'Premium Zari Work Saree Border Design',
          category: 'Zari Work',
          tags: 'zari work, saree, border, golden, silk, wedding, festive',
          price: 3299,
          description: 'Luxurious golden zari work perfect for saree borders. Traditional craftsmanship with modern appeal.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmE1MDA7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxyZWN0IHg9IjUwIiB5PSIxNTAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjMiLz48cmVjdCB4PSI3MCIgeT0iMTcwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjUiLz48dGV4dCB4PSIyMDAiIHk9IjIyMCIgZm9udC1zaXplPSI2MCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIj7inKg8L3RleHQ+PC9zdmc+',
          rating: 4.8,
          reviews: 124,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_4',
          id: '4',
          type: 'product',
          productName: 'Colorful Thread Work Choli Design',
          category: 'Thread Work',
          tags: 'thread work, choli, colorful, navratri, garba, festive',
          price: 1299,
          description: 'Vibrant multi-colored thread work design perfect for cholis. Eye-catching patterns for festive occasions.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I2ZmNjY5OTtzdG9wLW9wYWNpdHk6MSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I2ZmY2MwMDtzdG9wLW9wYWNpdHk6MSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMzAwIiBjeT0iMTAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMzAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMzAwIiBjeT0iMzAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ci8+PHRleHQgeD0iMjAwIiB5PSIyMjAiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCI+8J+ntTwvdGV4dD48L3N2Zz4=',
          rating: 4.6,
          reviews: 67,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_5',
          id: '5',
          type: 'product',
          productName: 'Sparkling Sequin Work Ghagra Pattern',
          category: 'Sequin Work',
          tags: 'sequin work, ghagra, party wear, shimmer, dance, performance',
          price: 1899,
          description: 'Dazzling sequin work design for ghagras. Perfect for dance performances and party wear.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9ImciPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmY7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNjY2Y7c3RvcC1vcGFjaXR5OjEiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iIzY2N2VlYSIvPjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMjQwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMzIwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iODAiIGN5PSIxNjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMTYwIiByPSIyMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjE2MCIgcj0iMjAiIGZpbGw9InVybCgjZykiLz48Y2lyY2xlIGN4PSIzMjAiIGN5PSIxNjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iODAiIGN5PSIyNDAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMjQwIiByPSIyMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjI0MCIgcj0iMjAiIGZpbGw9InVybCgjZykiLz48Y2lyY2xlIGN4PSIzMjAiIGN5PSIyNDAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iODAiIGN5PSIzMjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMzIwIiByPSIyMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjMyMCIgcj0iMjAiIGZpbGw9InVybCgjZykiLz48Y2lyY2xlIGN4PSIzMjAiIGN5PSIzMjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PHRleHQgeD0iMjAwIiB5PSIyMjAiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCI+8J+SjjwvdGV4dD48L3N2Zz4=',
          rating: 4.5,
          reviews: 92,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_6',
          id: '6',
          type: 'product',
          productName: 'Traditional Mirror Work Kurti Neck Design',
          category: 'Mirror Work',
          tags: 'mirror work, kurti, neck design, traditional, ethnic, casual',
          price: 799,
          description: 'Classic mirror work neck design for kurtis. Simple yet elegant pattern for everyday wear.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjg4NTY7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmNjNjY7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iNjAiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuNSIvPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjIwMCIgcj0iMzAiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuNSIvPjxjaXJjbGUgY3g9IjI4MCIgY3k9IjIwMCIgcj0iMzAiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTcwIiBmb250LXNpemU9IjQwIiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiPvCfkqY8L3RleHQ+PC9zdmc+',
          rating: 4.4,
          reviews: 45,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_7',
          id: '7',
          type: 'product',
          productName: 'Delicate Hand Embroidery Dupatta Border',
          category: 'Hand Embroidery',
          tags: 'hand embroidery, dupatta, border, delicate, pastel, soft',
          price: 1099,
          description: 'Soft and delicate hand embroidery perfect for dupatta borders. Pastel colors with intricate detailing.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlMGM4ZmY7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmU0ZTQ7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxwYXRoIGQ9Ik01MCAxNTAgUTEwMCAxMjAgMTUwIDE1MCBUIDI1MCAxNTAgVCAzNTAgMTUwIiBzdHJva2U9IiNmZjk5Y2MiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik01MCAyNTAgUTEwMCAyMjAgMTUwIDI1MCBUIDI1MCAyNTAgVCAzNTAgMjUwIiBzdHJva2U9IiNmZjk5Y2MiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjIwIiBmb250LXNpemU9IjYwIiBmaWxsPSIjZmY5OWNjIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiPvCfjLg8L3RleHQ+PC9zdmc+',
          rating: 4.7,
          reviews: 78,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_8',
          id: '8',
          type: 'product',
          productName: 'Heavy Zari Work Bridal Blouse Design',
          category: 'Zari Work',
          tags: 'zari work, blouse, bridal, heavy work, wedding, golden',
          price: 4299,
          description: 'Opulent heavy zari work for bridal blouses. Intricate golden patterns with premium quality materials.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9ImciPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjg4MDA7c3RvcC1vcGFjaXR5OjEiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjIiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMDAiIHI9IjEwMCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC4zIi8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSI2MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PHRleHQgeD0iMjAwIiB5PSIyMjAiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCI+8J+RsDwvdGV4dD48L3N2Zz4=',
          rating: 4.9,
          reviews: 143,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString()
        }
      ];
      
      allRecords.push(...sampleProducts);
      saveToLocalStorage();
    }
    
    function loadFromLocalStorage() {
      const stored = localStorage.getItem('embroitech_data');
      if (stored) {
        try {
          allRecords = JSON.parse(stored);
        } catch (error) {
          console.error("Error loading data:", error);
          allRecords = [];
        }
      }
      updateUI();
    }
    
    function saveToLocalStorage() {
      try {
        localStorage.setItem('embroitech_data', JSON.stringify(allRecords));
      } catch (error) {
        console.error("Error saving data:", error);
      }
    }

    // Authentication
    function checkAuth() {
      const savedUser = localStorage.getItem('embroitech_user');
      const rememberMe = localStorage.getItem('embroitech_remember');
      
      if (savedUser && rememberMe === 'true') {
        currentUser = JSON.parse(savedUser);
        showMainApp();
      } else {
        showAuthScreen();
      }
    }

    function showAuthScreen() {
      document.getElementById('authScreen').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
    }

    function showMainApp() {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      const initials = currentUser.fullName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
      document.getElementById('userAvatar').textContent = initials;
      document.getElementById('userDisplayName').textContent = currentUser.fullName;
      document.getElementById('userDisplayEmail').textContent = currentUser.email;
      
      if (currentUser.isAdmin) {
        document.getElementById('adminMenuItem').style.display = 'flex';
      }
      
      loadUserProfile();
      updateUI();
    }

    function showLogin() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    }

    function showSignup() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value.trim().toLowerCase();
      const password = document.getElementById('loginPassword').value;
      
      const loginBtn = document.getElementById('loginBtn');
      loginBtn.disabled = true;
      loginBtn.textContent = 'üîÑ Signing in...';
      
      const users = allRecords.filter(r => r.type === 'user');
      const user = users.find(u => u.email === email && u.password === password);
      
      setTimeout(() => {
        if (user) {
          currentUser = user;
          localStorage.setItem('embroitech_user', JSON.stringify(user));
          localStorage.setItem('embroitech_remember', 'true');
          
          trackActivity('login', { userId: user.email, timestamp: new Date().toISOString() });
          
          showNotification('‚úÖ Welcome back, ' + user.fullName + '!');
          showMainApp();
        } else {
          showNotification('‚ùå Invalid email or password', 'error');
          loginBtn.disabled = false;
          loginBtn.textContent = 'üîê Sign In';
        }
      }, 500);
    }

    function handleSignup(event) {
      event.preventDefault();
      
      const fullName = document.getElementById('signupFullName').value.trim();
      const email = document.getElementById('signupEmail').value.trim().toLowerCase();
      const phone = document.getElementById('signupPhone').value.trim();
      const password = document.getElementById('signupPassword').value;
      const address = document.getElementById('signupAddress').value.trim();
      
      const users = allRecords.filter(r => r.type === 'user');
      if (users.find(u => u.email === email)) {
        showNotification('‚ùå Email already registered', 'error');
        return;
      }
      
      const signupBtn = document.getElementById('signupBtn');
      signupBtn.disabled = true;
      signupBtn.textContent = 'üîÑ Creating account...';
      
      const isFirstUser = users.length === 0;
      
      const newUser = {
        __backendId: 'local_' + Date.now(),
        id: Date.now().toString(),
        type: 'user',
        username: email.split('@')[0],
        email: email,
        password: password,
        fullName: fullName,
        phone: phone,
        address: address,
        isAdmin: isFirstUser,
        createdAt: new Date().toISOString()
      };
      
      setTimeout(() => {
        allRecords.push(newUser);
        saveToLocalStorage();
        showNotification('‚úÖ Account created! ' + (isFirstUser ? 'You are the admin!' : ''));
        showLogin();
        document.getElementById('loginEmail').value = email;
        signupBtn.disabled = false;
        signupBtn.textContent = '‚ú® Create Account';
      }, 500);
    }

    function handleLogout() {
      localStorage.removeItem('embroitech_user');
      localStorage.removeItem('embroitech_remember');
      currentUser = null;
      cartItems = [];
      wishlistItems = [];
      showNotification('üëã Logged out successfully');
      showAuthScreen();
      showLogin();
    }

    function checkPasswordStrength() {
      const password = document.getElementById('signupPassword').value;
      const bar = document.getElementById('passwordStrengthBar');
      
      let strength = 0;
      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
      if (/\d/.test(password)) strength++;
      if (/[^a-zA-Z\d]/.test(password)) strength++;
      
      bar.className = 'password-strength-bar';
      if (strength <= 1) bar.classList.add('weak');
      else if (strength <= 2) bar.classList.add('medium');
      else bar.classList.add('strong');
    }

    // UI Updates
    function updateUI() {
      updateStats();
      renderProducts();
      renderCategories();
      renderTrending();
      renderNewArrivals();
      renderWishlist();
      renderCart();
      renderAdminProducts();
      renderOrders();
    }

    function updateStats() {
      const products = allRecords.filter(r => r.type === 'product');
      const users = allRecords.filter(r => r.type === 'user');
      const activities = allRecords.filter(r => r.type === 'activity');
      const orders = allRecords.filter(r => r.type === 'order');
      
      document.getElementById('totalDesigns').textContent = products.length;
      document.getElementById('inStockCount').textContent = products.filter(p => p.inStock).length;
      document.getElementById('totalUsers').textContent = users.length;
      
      const searches = activities.filter(a => a.activityType === 'search');
      const purchases = activities.filter(a => a.activityType === 'purchase');
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      
      document.getElementById('totalSearches').textContent = searches.length;
      document.getElementById('totalPurchases').textContent = purchases.length;
      document.getElementById('totalCartItems').textContent = cartAdditions.length;
      
      const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
      document.getElementById('totalRevenue').textContent = Math.round(totalRevenue).toLocaleString('en-IN');
      
      renderAnalytics();
    }
    
    function renderAnalytics() {
      const activities = allRecords.filter(r => r.type === 'activity');
      
      const searches = activities.filter(a => a.activityType === 'search');
      const searchTerms = {};
      searches.forEach(s => {
        const term = s.searchTerm.toLowerCase();
        searchTerms[term] = (searchTerms[term] || 0) + 1;
      });
      
      const topSearches = Object.entries(searchTerms)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      const topSearchesEl = document.getElementById('topSearches');
      if (topSearches.length === 0) {
        topSearchesEl.innerHTML = '<p style="color: #718096; text-align: center;">No search data yet</p>';
      } else {
        topSearchesEl.innerHTML = topSearches.map(([term, count]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 14px; background: white; border-radius: 12px; margin-bottom: 10px;">
            <span style="font-weight: 600; color: #2d3748;">"${term}"</span>
            <span style="background: #e94560; color: white; padding: 6px 14px; border-radius: 14px; font-size: 13px; font-weight: 700;">${count} searches</span>
          </div>
        `).join('');
      }
      
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      const productCounts = {};
      cartAdditions.forEach(a => {
        const name = a.productName;
        if (!productCounts[name]) {
          productCounts[name] = { count: 0, price: a.price, category: a.category };
        }
        productCounts[name].count++;
      });
      
      const popularProducts = Object.entries(productCounts)
        .sort((a, b) => b[1].count - a[1].count)
        .slice(0, 10);
      
      const popularProductsEl = document.getElementById('popularProducts');
      if (popularProducts.length === 0) {
        popularProductsEl.innerHTML = '<p style="color: #718096; text-align: center;">No cart data yet</p>';
      } else {
        popularProductsEl.innerHTML = popularProducts.map(([name, data]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 14px; background: white; border-radius: 12px; margin-bottom: 10px;">
            <div>
              <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${name}</div>
              <div style="font-size: 13px; color: #718096;">${data.category} ‚Ä¢ ‚Çπ${data.price}</div>
            </div>
            <span style="background: #48bb78; color: white; padding: 6px 14px; border-radius: 14px; font-size: 13px; font-weight: 700;">${data.count} times</span>
          </div>
        `).join('');
      }
      
      const recentActivities = activities
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .slice(0, 20);
      
      const recentActivityEl = document.getElementById('recentActivity');
      if (recentActivities.length === 0) {
        recentActivityEl.innerHTML = '<p style="color: #718096; text-align: center;">No activity yet</p>';
      } else {
        recentActivityEl.innerHTML = recentActivities.map(activity => {
          const date = new Date(activity.timestamp);
          const timeStr = date.toLocaleString('en-IN', { 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit' 
          });
          
          let icon = 'üìä';
          let text = '';
          let color = '#718096';
          
          if (activity.activityType === 'search') {
            icon = 'üîç';
            text = `Searched for "${activity.searchTerm}" (${activity.resultsCount} results)`;
            color = '#4299e1';
          } else if (activity.activityType === 'add_to_cart') {
            icon = 'üõí';
            text = `Added "${activity.productName}" to cart`;
            color = '#f6ad55';
          } else if (activity.activityType === 'purchase') {
            icon = 'üí≥';
            text = `Purchased ${activity.itemCount} items for ‚Çπ${activity.total}`;
            color = '#48bb78';
          } else if (activity.activityType === 'login') {
            icon = 'üîê';
            text = `User logged in`;
            color = '#9f7aea';
          }
          
          return `
            <div style="display: flex; gap: 14px; padding: 14px; background: white; border-radius: 12px; margin-bottom: 10px; border-left: 4px solid ${color};">
              <span style="font-size: 26px;">${icon}</span>
              <div style="flex: 1;">
                <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${text}</div>
                <div style="font-size: 12px; color: #718096;">
                  ${activity.userId} ‚Ä¢ ${timeStr}
                </div>
              </div>
            </div>
          `;
        }).join('');
      }
    }

    // Search
    function handleSearch() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const searchTerm = document.getElementById('mainSearch').value.trim();
        if (searchTerm && currentUser) {
          trackActivity('search', { 
            searchTerm: searchTerm,
            resultsCount: getFilteredProducts().length
          });
        }
        applyFilters();
      }, 300);
    }

    // Filters
    function getFilteredProducts() {
      let products = allRecords.filter(r => r.type === 'product');
      
      const searchTerm = document.getElementById('mainSearch').value.toLowerCase().trim();
      if (searchTerm) {
        products = products.filter(p => 
          p.productName.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm) ||
          (p.tags && p.tags.toLowerCase().includes(searchTerm)) ||
          (p.description && p.description.toLowerCase().includes(searchTerm))
        );
      }
      
      const categoryFilter = document.getElementById('categoryFilter').value;
      if (categoryFilter) {
        products = products.filter(p => p.category === categoryFilter);
      }
      
      const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
      products = products.filter(p => p.price >= minPrice && p.price <= maxPrice);
      
      const ratingFilter = document.getElementById('ratingFilter').value;
      if (ratingFilter) {
        const minRating = parseFloat(ratingFilter);
        products = products.filter(p => p.rating >= minRating);
      }
      
      const stockFilter = document.getElementById('stockFilter').value;
      if (stockFilter === 'in-stock') {
        products = products.filter(p => p.inStock);
      }
      
      const sortBy = document.getElementById('sortSelect').value;
      if (sortBy === 'price-low') {
        products.sort((a, b) => a.price - b.price);
      } else if (sortBy === 'price-high') {
        products.sort((a, b) => b.price - a.price);
      } else if (sortBy === 'rating') {
        products.sort((a, b) => b.rating - a.rating);
      } else if (sortBy === 'popular') {
        products.sort((a, b) => b.reviews - a.reviews);
      } else {
        products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      }
      
      return products;
    }

    function applyFilters() {
      renderProducts();
    }

    function clearFilters() {
      document.getElementById('mainSearch').value = '';
      document.getElementById('categoryFilter').value = '';
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('ratingFilter').value = '';
      document.getElementById('stockFilter').value = '';
      document.getElementById('sortSelect').value = 'newest';
      applyFilters();
    }

    // Rendering
    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const products = getFilteredProducts();
      
      document.getElementById('resultsCount').textContent = `(${products.length} items)`;
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <h3>No designs found</h3>
            <p>Try adjusting your filters or search terms</p>
            <button class="btn btn-primary" onclick="clearFilters()" style="margin-top: 24px;">Clear Filters</button>
          </div>
        `;
        return;
      }
      
      grid.className = viewMode === 'grid' ? 'products-grid' : 'products-list';
      
      grid.innerHTML = products.map(p => renderProductCard(p, viewMode === 'list')).join('');
    }

    function renderProductCard(product, isList = false) {
      const isNew = (Date.now() - new Date(product.createdAt).getTime()) < 7 * 24 * 60 * 60 * 1000;
      const tags = product.tags ? product.tags.split(',').map(t => t.trim()).slice(0, 3) : [];
      
      const cardClass = isList ? 'product-card-list' : 'product-card';
      
      return `
        <div class="${cardClass}" data-product-id="${product.__backendId}" onclick="showProductDetail('${product.__backendId}')" style="cursor: pointer;">
          ${product.inStock ? 
            (isNew ? '<div class="product-badge new">New</div>' : '<div class="product-badge">In Stock</div>') : 
            '<div class="product-badge out-of-stock">Out of Stock</div>'}
          <button class="wishlist-btn ${isInWishlist(product.__backendId) ? 'active' : ''}" onclick="event.stopPropagation(); toggleWishlist('${product.__backendId}')">
            ${isInWishlist(product.__backendId) ? '‚ù§Ô∏è' : 'ü§ç'}
          </button>
          <div class="product-image">
            ${product.imageData ? `<img src="${product.imageData}" alt="${product.productName}">` : getEmojiForCategory(product.category)}
          </div>
          <div class="product-info">
            <span class="product-category">${product.category}</span>
            ${tags.length > 0 ? `
              <div class="product-tags">
                ${tags.map(tag => `<span class="product-tag">#${tag}</span>`).join('')}
              </div>
            ` : ''}
            <div class="product-name">${product.productName}</div>
            <div class="product-rating">
              <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span class="rating-value">${product.rating}</span>
              <span class="review-count">(${product.reviews} reviews)</span>
            </div>
            <div class="product-price">‚Çπ${product.price.toFixed(2)}</div>
            ${product.description ? `<p style="font-size: 13px; color: #718096; margin-bottom: 14px; line-height: 1.6;">${product.description.substring(0, 100)}${product.description.length > 100 ? '...' : ''}</p>` : ''}
            <div class="product-actions">
              <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); addToCart('${product.__backendId}')" ${!product.inStock ? 'disabled' : ''}>
                ${product.inStock ? 'üõí Add to Cart' : 'Out of Stock'}
              </button>
              ${currentUser && currentUser.isAdmin ? `
                <button class="btn btn-danger btn-small" onclick="event.stopPropagation(); deleteProduct('${product.__backendId}')">
                  üóëÔ∏è
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `;
    }

    function renderCategories() {
      const grid = document.getElementById('categoriesGrid');
      const categories = [
        { name: 'Mirror Work', emoji: 'ü™û', desc: 'Traditional mirror embroidery' },
        { name: 'Hand Embroidery', emoji: '‚úã', desc: 'Handcrafted designs' },
        { name: 'Zari Work', emoji: '‚ú®', desc: 'Golden zari patterns' },
        { name: 'Thread Work', emoji: 'üßµ', desc: 'Colorful thread art' },
        { name: 'Sequin Work', emoji: 'üíé', desc: 'Sparkling sequin designs' }
      ];
      
      grid.innerHTML = categories.map(cat => {
        const count = allRecords.filter(r => r.type === 'product' && r.category === cat.name).length;
        return `
          <div class="product-card" onclick="filterByCategory('${cat.name}')">
            <div class="product-image" style="font-size: 100px;">${cat.emoji}</div>
            <div class="product-info">
              <div class="product-name">${cat.name}</div>
              <p style="color: #718096; font-size: 14px; margin-bottom: 10px;">${cat.desc}</p>
              <p style="color: #e94560; font-weight: 700; font-size: 16px;">${count} designs available</p>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderTrending() {
      const grid = document.getElementById('trendingGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => b.reviews - a.reviews)
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üî•</div>
            <h3>No trending designs yet</h3>
            <p>Check back soon for popular items</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderNewArrivals() {
      const grid = document.getElementById('newGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ú®</div>
            <h3>No new arrivals yet</h3>
            <p>Be the first to upload designs</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderWishlist() {
      const grid = document.getElementById('wishlistGrid');
      const products = allRecords.filter(r => r.type === 'product' && isInWishlist(r.__backendId));
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ù§Ô∏è</div>
            <h3>Your wishlist is empty</h3>
            <p>Add designs you love to your wishlist</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 24px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderCart() {
      const container = document.getElementById('cartContent');
      
      if (cartItems.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üõí</div>
            <h3>Your cart is empty</h3>
            <p>Add some beautiful designs to get started</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 24px;">Start Shopping</button>
          </div>
        `;
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      container.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 24px;">
          ${cartItems.map(item => `
            <div style="display: flex; gap: 24px; padding: 24px; border: 2px solid #f7fafc; border-radius: 20px; align-items: center;">
              <div style="width: 130px; height: 130px; background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 52px; flex-shrink: 0; overflow: hidden;">
                ${item.imageData ? `<img src="${item.imageData}" alt="${item.productName}" style="width: 100%; height: 100%; object-fit: cover;">` : getEmojiForCategory(item.category)}
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 19px; margin-bottom: 6px;">${item.productName}</div>
                <div style="font-size: 13px; color: #718096; margin-bottom: 10px;">${item.category}</div>
                <div style="color: #e94560; font-weight: 800; font-size: 22px;">‚Çπ${item.price.toFixed(2)}</div>
              </div>
              <button class="btn btn-danger btn-small" onclick="removeFromCart('${item.__backendId}')">
                Remove
              </button>
            </div>
          `).join('')}
          
          <div style="background: #f7fafc; padding: 32px; border-radius: 20px; margin-top: 24px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 17px;">
              <span>Subtotal:</span>
              <span style="font-weight: 600;">‚Çπ${subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 17px;">
              <span>Shipping:</span>
              <span style="font-weight: 600;">${shipping === 0 ? 'FREE' : '‚Çπ' + shipping.toFixed(2)}</span>
            </div>
            ${shipping === 0 ? '<p style="font-size: 13px; color: #48bb78; margin-bottom: 20px;">üéâ You got free shipping!</p>' : '<p style="font-size: 13px; color: #718096; margin-bottom: 20px;">Free shipping on orders above ‚Çπ2000</p>'}
            <div style="display: flex; justify-content: space-between; font-size: 26px; font-weight: 800; color: #2d3748; padding-top: 24px; border-top: 2px solid #e2e8f0; margin-top: 16px;">
              <span>Total:</span>
              <span style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">‚Çπ${total.toFixed(2)}</span>
            </div>
          </div>
          
          <button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; font-size: 18px; padding: 20px;">
            üí≥ Proceed to Checkout
          </button>
        </div>
      `;
    }

    function renderOrders() {
      const container = document.getElementById('ordersContent');
      const orders = allRecords.filter(r => r.type === 'order' && r.userId === currentUser.email);
      
      if (orders.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No orders yet</h3>
            <p>Start shopping to see your orders here</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 24px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      orders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
      
      container.innerHTML = orders.map(order => {
        let orderItems = order.items;
        if (typeof orderItems === 'string') {
          try {
            orderItems = JSON.parse(orderItems);
          } catch (e) {
            orderItems = [];
          }
        }
        
        return `
        <div style="border: 2px solid #f7fafc; border-radius: 20px; padding: 28px; margin-bottom: 24px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 14px;">
            <div>
              <h3 style="font-size: 19px; color: #2d3748; margin-bottom: 6px; font-weight: 700;">Order #${order.id}</h3>
              <p style="font-size: 14px; color: #718096;">${new Date(order.orderDate).toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
            </div>
            <div style="background: #48bb78; color: white; padding: 10px 20px; border-radius: 24px; font-size: 13px; font-weight: 700;">
              ‚úÖ ${order.status}
            </div>
          </div>
          
          <div style="background: #f7fafc; padding: 24px; border-radius: 16px; margin-bottom: 20px;">
            ${orderItems.map(item => `
              <div style="display: flex; justify-content: space-between; margin-bottom: 14px;">
                <span style="color: #2d3748;">${item.productName}</span>
                <span style="font-weight: 600; color: #e94560;">‚Çπ${item.price.toFixed(2)}</span>
              </div>
            `).join('')}
            <div style="border-top: 2px solid #e2e8f0; margin-top: 20px; padding-top: 20px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #718096;">Subtotal:</span>
                <span style="font-weight: 600;">‚Çπ${order.subtotal.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #718096;">Shipping:</span>
                <span style="font-weight: 600;">${order.shipping === 0 ? 'FREE' : '‚Çπ' + order.shipping.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; font-size: 19px; font-weight: 700; color: #2d3748;">
                <span>Total:</span>
                <span style="color: #e94560;">‚Çπ${order.total.toFixed(2)}</span>
              </div>
            </div>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center; font-size: 14px; color: #718096;">
            <span>üí≥ ${order.paymentMethod}</span>
            <span>üìß Confirmation sent to ${currentUser.email}</span>
          </div>
        </div>
      `;
      }).join('');
    }

    function renderAdminProducts() {
      const grid = document.getElementById('adminProductsGrid');
      const products = allRecords.filter(r => r.type === 'product');
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No designs uploaded yet</h3>
            <p>Click "Upload Design" to add your first design</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    // View Management
    function showView(view) {
      currentView = view;
      document.querySelectorAll('.view-content').forEach(v => v.style.display = 'none');
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      
      const viewMap = {
        'browse': 'browseView',
        'calculator': 'calculatorView',
        'categories': 'categoriesView',
        'trending': 'trendingView',
        'new': 'newView',
        'wishlist': 'wishlistView',
        'cart': 'cartView',
        'profile': 'profileView',
        'orders': 'ordersView',
        'admin': 'adminView'
      };
      
      const viewId = viewMap[view];
      if (viewId) {
        document.getElementById(viewId).style.display = 'block';
      }
      
      // Show/hide filter bar
      const filterBar = document.getElementById('filterBar');
      if (view === 'browse') {
        filterBar.style.display = 'flex';
      } else {
        filterBar.style.display = 'none';
      }
      
      closeUserMenu();
    }

    function setViewMode(mode) {
      viewMode = mode;
      document.getElementById('gridViewBtn').classList.toggle('active', mode === 'grid');
      document.getElementById('listViewBtn').classList.toggle('active', mode === 'list');
      renderProducts();
    }

    function filterByCategory(category) {
      clearFilters();
      document.getElementById('categoryFilter').value = category;
      showView('browse');
      applyFilters();
    }

    // Cart & Wishlist
    function addToCart(backendId) {
      const product = allRecords.find(r => r.__backendId === backendId);
      if (!product || !product.inStock) return;
      
      if (cartItems.find(item => item.__backendId === backendId)) {
        showNotification('‚ÑπÔ∏è Item already in cart!', 'info');
        return;
      }
      
      cartItems.push(product);
      updateCartCount();
      
      if (currentUser) {
        trackActivity('add_to_cart', {
          productId: product.id,
          productName: product.productName,
          price: product.price,
          category: product.category
        });
      }
      
      showNotification('‚úÖ Added to cart!');
    }

    function removeFromCart(backendId) {
      cartItems = cartItems.filter(item => item.__backendId !== backendId);
      updateCartCount();
      renderCart();
      showNotification('üóëÔ∏è Removed from cart');
    }

    function updateCartCount() {
      document.getElementById('cartCount').textContent = cartItems.length;
    }

    function toggleWishlist(backendId) {
      const index = wishlistItems.indexOf(backendId);
      if (index > -1) {
        wishlistItems.splice(index, 1);
        showNotification('üíî Removed from wishlist');
      } else {
        wishlistItems.push(backendId);
        showNotification('‚ù§Ô∏è Added to wishlist');
      }
      updateWishlistCount();
      renderProducts();
      renderWishlist();
    }

    function isInWishlist(backendId) {
      return wishlistItems.includes(backendId);
    }

    function updateWishlistCount() {
      document.getElementById('wishlistCount').textContent = wishlistItems.length;
    }

    // Payment Functions
    function proceedToCheckout() {
      if (cartItems.length === 0) {
        showNotification('‚ùå Your cart is empty!', 'error');
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      openPaymentModal(total);
    }
    
    function openPaymentModal(amount) {
      document.getElementById('paymentModal').classList.add('active');
      document.getElementById('paymentAmount').textContent = amount.toFixed(2);
      document.getElementById('paymentForm').reset();
    }
    
    function closePaymentModal() {
      document.getElementById('paymentModal').classList.remove('active');
    }
    
    function processPayment(event) {
      event.preventDefault();
      
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardName = document.getElementById('cardName').value;
      const expiryDate = document.getElementById('expiryDate').value;
      const cvv = document.getElementById('cvv').value;
      
      if (!validateCardNumber(cardNumber)) {
        showNotification('‚ùå Invalid card number', 'error');
        return;
      }
      
      if (!validateExpiryDate(expiryDate)) {
        showNotification('‚ùå Invalid or expired card', 'error');
        return;
      }
      
      if (cvv.length < 3) {
        showNotification('‚ùå Invalid CVV', 'error');
        return;
      }
      
      const payBtn = document.getElementById('paymentBtn');
      payBtn.disabled = true;
      payBtn.textContent = 'üîÑ Processing Payment...';
      
      setTimeout(() => {
        const orderItems = [...cartItems];
        const subtotal = orderItems.reduce((sum, item) => sum + item.price, 0);
        const shipping = subtotal > 2000 ? 0 : 50;
        const total = subtotal + shipping;
        
        const order = {
          __backendId: 'local_' + Date.now(),
          id: Date.now().toString(),
          type: 'order',
          userId: currentUser.email,
          items: orderItems.map(item => ({
            productId: item.id,
            productName: item.productName,
            price: item.price,
            category: item.category
          })),
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          paymentMethod: 'Card ending in ' + cardNumber.slice(-4),
          status: 'Confirmed',
          orderDate: new Date().toISOString()
        };
        
        allRecords.push(order);
        
        trackActivity('purchase', {
          orderId: order.id,
          itemCount: orderItems.length,
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          products: orderItems.map(item => item.productName).join(', ')
        });
        
        saveToLocalStorage();
        updateUI();
        
        payBtn.disabled = false;
        payBtn.textContent = 'üí≥ Pay Now';
        
        showNotification('‚úÖ Payment successful! Order confirmed.');
        cartItems = [];
        updateCartCount();
        closePaymentModal();
        showView('orders');
      }, 2000);
    }
    
    function validateCardNumber(cardNumber) {
      if (</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b8601ec0468b0b',t:'MTc2MjYzOTU2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html><!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Premium Embroidery Marketplace</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      color: #1a202c;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }
    
    /* Authentication Screens */
    .auth-container {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }
    
    .auth-box {
      background: white;
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 480px;
      width: 100%;
      overflow: hidden;
    }
    
    .auth-header {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 40px 32px;
      text-align: center;
    }
    
    .auth-logo {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      margin: 0 auto 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
    
    .auth-header h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .auth-header p {
      font-size: 15px;
      opacity: 0.95;
    }
    
    .auth-body {
      padding: 40px 32px;
    }
    
    .form-group {
      margin-bottom: 24px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #2d3748;
      font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      transition: all 0.3s;
      background: #f7fafc;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #e94560;
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      white-space: nowrap;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      width: 100%;
      padding: 16px;
      font-size: 16px;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(233, 69, 96, 0.4);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-secondary {
      background: #48bb78;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #38a169;
      transform: translateY(-2px);
    }
    
    .btn-outline {
      background: white;
      color: #e94560;
      border: 2px solid #e94560;
    }
    
    .btn-outline:hover {
      background: #e94560;
      color: white;
    }
    
    .btn-danger {
      background: #f56565;
      color: white;
    }
    
    .btn-danger:hover {
      background: #e53e3e;
    }
    
    .btn-small {
      padding: 10px 16px;
      font-size: 13px;
    }
    
    .btn-icon {
      position: relative;
    }
    
    .auth-footer {
      text-align: center;
      padding: 24px 32px;
      background: #f7fafc;
      border-top: 1px solid #e2e8f0;
    }
    
    .auth-footer p {
      color: #718096;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: #e94560;
      text-decoration: none;
      font-weight: 600;
      cursor: pointer;
    }
    
    .auth-footer a:hover {
      text-decoration: underline;
    }
    
    .password-strength {
      height: 4px;
      background: #e2e8f0;
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .password-strength-bar {
      height: 100%;
      width: 0%;
      transition: all 0.3s;
      border-radius: 2px;
    }
    
    .password-strength-bar.weak {
      width: 33%;
      background: #f56565;
    }
    
    .password-strength-bar.medium {
      width: 66%;
      background: #f6ad55;
    }
    
    .password-strength-bar.strong {
      width: 100%;
      background: #48bb78;
    }
    
    /* Header Styles */
    header {
      background: white;
      padding: 24px 40px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
      margin-bottom: 28px;
      position: sticky;
      top: 20px;
      z-index: 100;
    }
    
    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);
      overflow: hidden;
    }
    
    .logo::before {
      content: '';
      position: absolute;
      width: 30px;
      height: 30px;
      background: white;
      border-radius: 50%;
      top: 8px;
      left: 8px;
      opacity: 0.3;
    }
    
    .logo::after {
      content: '‚ú®';
      position: absolute;
      font-size: 32px;
      z-index: 1;
    }
    
    .brand-info h1 {
      font-size: 26px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 2px;
      font-weight: 800;
      letter-spacing: -0.5px;
    }
    
    .brand-info p {
      font-size: 13px;
      color: #718096;
      font-weight: 500;
    }
    
    .search-container {
      flex: 1;
      max-width: 600px;
      min-width: 300px;
    }
    
    .search-bar {
      display: flex;
      align-items: center;
      background: #f7fafc;
      border-radius: 14px;
      padding: 14px 20px;
      gap: 12px;
      width: 100%;
      border: 2px solid #e2e8f0;
      transition: all 0.3s;
    }
    
    .search-bar:focus-within {
      border-color: #e94560;
      background: white;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .search-bar input {
      border: none;
      background: transparent;
      outline: none;
      flex: 1;
      font-size: 15px;
    }
    
    .header-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .user-menu {
      position: relative;
    }
    
    .user-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      border: 3px solid white;
      box-shadow: 0 4px 12px rgba(233, 69, 96, 0.3);
      transition: all 0.3s;
    }
    
    .user-avatar:hover {
      transform: scale(1.1);
    }
    
    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: white;
      border-radius: 16px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.15);
      margin-top: 12px;
      min-width: 240px;
      display: none;
      z-index: 1000;
    }
    
    .user-dropdown.active {
      display: block;
    }
    
    .user-dropdown-header {
      padding: 20px;
      border-bottom: 1px solid #e2e8f0;
    }
    
    .user-dropdown-header strong {
      display: block;
      color: #2d3748;
      margin-bottom: 4px;
      font-size: 15px;
    }
    
    .user-dropdown-header span {
      font-size: 13px;
      color: #718096;
    }
    
    .user-dropdown-item {
      padding: 14px 20px;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #2d3748;
      font-size: 14px;
      font-weight: 500;
    }
    
    .user-dropdown-item:hover {
      background: #f7fafc;
    }
    
    .user-dropdown-item:last-child {
      border-top: 1px solid #e2e8f0;
      color: #f56565;
    }
    
    .badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #e94560;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: bold;
      border: 2px solid white;
    }
    
    .nav-tabs {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    
    .nav-tabs::-webkit-scrollbar {
      height: 4px;
    }
    
    .nav-tabs::-webkit-scrollbar-thumb {
      background: #e2e8f0;
      border-radius: 4px;
    }
    
    .nav-tab {
      padding: 12px 24px;
      background: transparent;
      border: none;
      font-size: 14px;
      font-weight: 600;
      color: #718096;
      cursor: pointer;
      border-radius: 12px;
      transition: all 0.3s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .nav-tab:hover {
      background: #f7fafc;
      color: #e94560;
    }
    
    .nav-tab.active {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(233, 69, 96, 0.3);
    }
    
    /* Filter Bar */
    .filter-bar {
      background: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 24px;
      display: flex;
      gap: 16px;
      align-items: center;
      flex-wrap: wrap;
    }
    
    .filter-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .filter-group label {
      font-size: 13px;
      font-weight: 600;
      color: #4a5568;
      white-space: nowrap;
    }
    
    .filter-group select,
    .filter-group input {
      padding: 10px 14px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 14px;
      background: white;
      cursor: pointer;
      transition: all 0.3s;
      min-width: 140px;
    }
    
    .filter-group select:focus,
    .filter-group input:focus {
      outline: none;
      border-color: #e94560;
      box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.1);
    }
    
    .filter-group input[type="number"] {
      min-width: 100px;
    }
    
    .filter-actions {
      margin-left: auto;
      display: flex;
      gap: 10px;
    }
    
    /* Content Area */
    .content-area {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      min-height: 600px;
    }
    
    .view-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
      flex-wrap: wrap;
      gap: 20px;
      padding-bottom: 24px;
      border-bottom: 2px solid #f7fafc;
    }
    
    .view-header h2 {
      font-size: 32px;
      color: #2d3748;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
    }
    
    .results-count {
      font-size: 16px;
      color: #718096;
      font-weight: 400;
    }
    
    .view-controls {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .sort-select {
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 14px;
      cursor: pointer;
      background: white;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .sort-select:focus {
      outline: none;
      border-color: #e94560;
    }
    
    .view-toggle {
      display: flex;
      gap: 4px;
      background: #f7fafc;
      padding: 4px;
      border-radius: 10px;
    }
    
    .view-toggle button {
      padding: 10px 14px;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 8px;
      font-size: 18px;
      transition: all 0.2s;
    }
    
    .view-toggle button.active {
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    /* Product Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 28px;
    }
    
    .products-list {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    
    .product-card {
      background: white;
      border: 2px solid #f7fafc;
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }
    
    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 16px 40px rgba(233, 69, 96, 0.15);
      border-color: #e94560;
    }
    
    .product-badge {
      position: absolute;
      top: 16px;
      right: 16px;
      background: #48bb78;
      color: white;
      padding: 8px 16px;
      border-radius: 24px;
      font-size: 11px;
      font-weight: 700;
      z-index: 10;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
    }
    
    .product-badge.out-of-stock {
      background: #f56565;
    }
    
    .product-badge.new {
      background: #9f7aea;
    }
    
    .wishlist-btn {
      position: absolute;
      top: 16px;
      left: 16px;
      background: white;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 22px;
      z-index: 10;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .wishlist-btn:hover {
      transform: scale(1.15);
    }
    
    .wishlist-btn.active {
      color: #e94560;
      background: #fff5f7;
    }
    
    .product-image {
      width: 100%;
      height: 260px;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
      position: relative;
      overflow: hidden;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .product-card:hover .product-image img {
      transform: scale(1.08);
    }
    
    .product-info {
      padding: 24px;
    }
    
    .product-category {
      font-size: 11px;
      color: #e94560;
      background: #fff5f7;
      padding: 6px 14px;
      border-radius: 14px;
      display: inline-block;
      margin-bottom: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .product-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
    }
    
    .product-tag {
      font-size: 10px;
      color: #718096;
      background: #f7fafc;
      padding: 4px 10px;
      border-radius: 10px;
      font-weight: 600;
    }
    
    .product-name {
      font-size: 18px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 12px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    
    .product-rating {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .stars {
      color: #fbbf24;
      letter-spacing: 2px;
    }
    
    .rating-value {
      font-weight: 600;
      color: #2d3748;
    }
    
    .review-count {
      color: #a0aec0;
      font-size: 13px;
    }
    
    .product-price {
      font-size: 26px;
      font-weight: 800;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 20px;
    }
    
    .product-actions {
      display: flex;
      gap: 10px;
    }
    
    .product-actions .btn {
      flex: 1;
    }
    
    /* List View */
    .product-card-list {
      display: flex;
      gap: 24px;
      border: 2px solid #f7fafc;
      border-radius: 20px;
      padding: 24px;
      transition: all 0.3s;
      background: white;
    }
    
    .product-card-list:hover {
      border-color: #e94560;
      box-shadow: 0 12px 32px rgba(233, 69, 96, 0.12);
    }
    
    .product-card-list .product-image {
      width: 220px;
      height: 220px;
      flex-shrink: 0;
      border-radius: 16px;
    }
    
    .product-card-list .product-info {
      flex: 1;
      padding: 0;
    }
    
    /* Admin Panel */
    .admin-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 32px;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(233, 69, 96, 0.3);
      transition: transform 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-6px);
    }
    
    .stat-card h3 {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }
    
    .stat-card .stat-value {
      font-size: 40px;
      font-weight: 800;
      margin-bottom: 8px;
    }
    
    .stat-card .stat-label {
      font-size: 13px;
      opacity: 0.85;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.75);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 24px;
      padding: 40px;
      max-width: 600px;
      width: 100%;
      max-height: 90%;
      overflow-y: auto;
      position: relative;
      margin: auto;
    }
    
    .modal-content.large {
      max-width: 1000px;
    }
    
    .product-detail-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-bottom: 40px;
    }
    
    .detail-image {
      width: 100%;
      height: 420px;
      background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 120px;
      overflow: hidden;
    }
    
    .detail-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .detail-info h2 {
      font-size: 32px;
      color: #2d3748;
      margin-bottom: 16px;
      line-height: 1.3;
      font-weight: 800;
    }
    
    .detail-price {
      font-size: 40px;
      font-weight: 800;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 24px;
    }
    
    .detail-section {
      margin-bottom: 32px;
      padding-bottom: 32px;
      border-bottom: 2px solid #f7fafc;
    }
    
    .detail-section:last-child {
      border-bottom: none;
    }
    
    .detail-section h3 {
      font-size: 20px;
      color: #2d3748;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
    }
    
    .detail-row {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      font-size: 15px;
    }
    
    .detail-row strong {
      color: #4a5568;
    }
    
    .detail-row span {
      color: #2d3748;
      font-weight: 600;
    }
    
    .process-timeline {
      position: relative;
      padding-left: 36px;
    }
    
    .process-step {
      position: relative;
      padding: 20px 0;
    }
    
    .process-step::before {
      content: '';
      position: absolute;
      left: -36px;
      top: 28px;
      width: 18px;
      height: 18px;
      background: #e94560;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 0 0 2px #e94560;
    }
    
    .process-step::after {
      content: '';
      position: absolute;
      left: -28px;
      top: 46px;
      width: 2px;
      height: calc(100% - 18px);
      background: #f7fafc;
    }
    
    .process-step:last-child::after {
      display: none;
    }
    
    .process-step h4 {
      font-size: 17px;
      color: #2d3748;
      margin-bottom: 8px;
      font-weight: 700;
    }
    
    .process-step p {
      font-size: 14px;
      color: #718096;
      line-height: 1.7;
    }
    
    .materials-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 14px;
    }
    
    .material-item {
      background: #f7fafc;
      padding: 14px;
      border-radius: 12px;
      font-size: 14px;
      color: #2d3748;
    }
    
    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #f56565;
      color: white;
      border: none;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    
    .modal-close:hover {
      transform: rotate(90deg);
      background: #e53e3e;
    }
    
    .image-upload-area {
      border: 3px dashed #cbd5e0;
      border-radius: 20px;
      padding: 56px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 24px;
      background: #f7fafc;
    }
    
    .image-upload-area:hover {
      border-color: #e94560;
      background: #fff5f7;
    }
    
    .image-upload-area.has-image {
      padding: 0;
      border: none;
      background: transparent;
    }
    
    .upload-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    
    .image-preview {
      width: 100%;
      max-height: 380px;
      object-fit: cover;
      border-radius: 20px;
      display: none;
    }
    
    .image-preview.active {
      display: block;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 120px 20px;
      color: #718096;
    }
    
    .empty-state-icon {
      font-size: 100px;
      margin-bottom: 28px;
      opacity: 0.5;
    }
    
    .empty-state h3 {
      font-size: 26px;
      margin-bottom: 14px;
      color: #2d3748;
      font-weight: 700;
    }
    
    .empty-state p {
      font-size: 16px;
      margin-bottom: 28px;
    }
    
    /* Notification */
    .notification {
      position: fixed;
      top: 28px;
      right: 28px;
      background: #48bb78;
      color: white;
      padding: 20px 32px;
      border-radius: 16px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.3);
      z-index: 2000;
      display: none;
      animation: slideIn 0.3s ease;
      max-width: 420px;
      font-weight: 500;
    }
    
    .notification.active {
      display: block;
    }
    
    .notification.error {
      background: #f56565;
    }
    
    .notification.info {
      background: #4299e1;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .loading-spinner {
      display: none;
      text-align: center;
      padding: 28px;
      color: #e94560;
      font-size: 16px;
      font-weight: 600;
    }
    
    .loading-spinner.active {
      display: block;
    }
    
    /* Cost Calculator */
    .calculator-section {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      color: white;
      padding: 40px;
      border-radius: 20px;
      margin-bottom: 40px;
      box-shadow: 0 12px 32px rgba(233, 69, 96, 0.3);
    }
    
    .calculator-section h3 {
      font-size: 28px;
      margin-bottom: 28px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
    }
    
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 24px;
      margin-bottom: 28px;
    }
    
    .calculator-input {
      background: rgba(255,255,255,0.12);
      border: 2px solid rgba(255,255,255,0.25);
      border-radius: 16px;
      padding: 20px;
    }
    
    .calculator-input label {
      display: block;
      font-size: 13px;
      margin-bottom: 10px;
      opacity: 0.95;
      font-weight: 600;
    }
    
    .calculator-input input,
    .calculator-input select {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      background: white;
      color: #2d3748;
      font-weight: 500;
    }
    
    .cost-result {
      background: rgba(255,255,255,0.18);
      border-radius: 16px;
      padding: 32px;
      text-align: center;
    }
    
    .cost-result h4 {
      font-size: 16px;
      margin-bottom: 16px;
      opacity: 0.95;
      font-weight: 600;
    }
    
    .cost-result .cost-value {
      font-size: 52px;
      font-weight: 800;
      margin-bottom: 12px;
    }
    
    .cost-breakdown {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 24px;
      font-size: 14px;
    }
    
    .cost-breakdown-item {
      background: rgba(255,255,255,0.12);
      padding: 16px;
      border-radius: 12px;
    }
    
    .cost-breakdown-item strong {
      display: block;
      margin-bottom: 6px;
      font-size: 12px;
      opacity: 0.85;
    }
    
    .cost-breakdown-item span {
      font-size: 20px;
      font-weight: 700;
    }
    
    /* Footer */
    footer {
      background: white;
      padding: 56px 40px 36px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      margin-top: 48px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 48px;
      margin-bottom: 40px;
    }
    
    .footer-brand {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .footer-logo-section {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .footer-logo {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: 0 6px 20px rgba(233, 69, 96, 0.4);
      overflow: hidden;
    }
    
    .footer-logo::before {
      content: '';
      position: absolute;
      width: 35px;
      height: 35px;
      background: white;
      border-radius: 50%;
      top: 10px;
      left: 10px;
      opacity: 0.3;
    }
    
    .footer-logo::after {
      content: '‚ú®';
      position: absolute;
      font-size: 36px;
      z-index: 1;
    }
    
    .footer-brand h2 {
      font-size: 30px;
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
      font-weight: 800;
    }
    
    .footer-brand p {
      color: #718096;
      line-height: 1.8;
      font-size: 14px;
    }
    
    .footer-section h3 {
      font-size: 17px;
      color: #2d3748;
      margin-bottom: 20px;
      font-weight: 700;
    }
    
    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .footer-links a {
      color: #718096;
      text-decoration: none;
      font-size: 14px;
      transition: color 0.3s;
      font-weight: 500;
    }
    
    .footer-links a:hover {
      color: #e94560;
    }
    
    .footer-contact {
      display: flex;
      flex-direction: column;
      gap: 14px;
      font-size: 14px;
      color: #718096;
    }
    
    .footer-contact-item {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .footer-bottom {
      border-top: 2px solid #f7fafc;
      padding-top: 28px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .footer-bottom p {
      color: #718096;
      font-size: 14px;
      margin: 0;
    }
    
    .footer-social {
      display: flex;
      gap: 14px;
    }
    
    .social-icon {
      width: 44px;
      height: 44px;
      background: #f7fafc;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .social-icon:hover {
      background: linear-gradient(135deg, #e94560 0%, #533483 100%);
      transform: translateY(-4px);
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .product-detail-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .header-top {
        flex-direction: column;
        align-items: stretch;
      }
      
      .search-container {
        width: 100%;
        max-width: none;
      }
      
      .header-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      }
      
      .view-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .view-controls {
        justify-content: space-between;
      }
      
      .calculator-grid {
        grid-template-columns: 1fr;
      }
      
      .cost-breakdown {
        grid-template-columns: 1fr;
      }
      
      .filter-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .filter-actions {
        margin-left: 0;
        width: 100%;
      }
      
      .footer-content {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .admin-stats {
        grid-template-columns: 1fr;
      }
      
      .auth-box {
        margin: 0;
      }
      
      .materials-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Authentication Screen -->
  <div id="authScreen" class="auth-container" style="display: none;"><!-- Login Form -->
   <div id="loginForm" class="auth-box">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>EmbroiTech</h1>
     <p>Discover Beautiful Embroidery Designs</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleLogin(event)">
      <div class="form-group"><label for="loginEmail">Email Address</label> <input type="email" id="loginEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="loginPassword">Password</label> <input type="password" id="loginPassword" required placeholder="Enter your password" autocomplete="current-password">
      </div><button type="submit" class="btn btn-primary" id="loginBtn"> üîê Sign In </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Don't have an account? <a onclick="showSignup()">Create Account</a></p>
    </div>
   </div><!-- Signup Form -->
   <div id="signupForm" class="auth-box" style="display: none;">
    <div class="auth-header">
     <div class="auth-logo">
      üßµ
     </div>
     <h1>Create Account</h1>
     <p>Join EmbroiTech Today</p>
    </div>
    <div class="auth-body">
     <form onsubmit="handleSignup(event)">
      <div class="form-group"><label for="signupFullName">Full Name</label> <input type="text" id="signupFullName" required placeholder="John Doe" autocomplete="name">
      </div>
      <div class="form-group"><label for="signupEmail">Email Address</label> <input type="email" id="signupEmail" required placeholder="your@email.com" autocomplete="email">
      </div>
      <div class="form-group"><label for="signupPhone">Phone Number</label> <input type="tel" id="signupPhone" required placeholder="+91 98765 43210" autocomplete="tel">
      </div>
      <div class="form-group"><label for="signupPassword">Password</label> <input type="password" id="signupPassword" required placeholder="Create a strong password" autocomplete="new-password" oninput="checkPasswordStrength()">
       <div class="password-strength">
        <div class="password-strength-bar" id="passwordStrengthBar"></div>
       </div>
      </div>
      <div class="form-group"><label for="signupAddress">Address (Optional)</label> <textarea id="signupAddress" placeholder="Your delivery address" autocomplete="street-address"></textarea>
      </div><button type="submit" class="btn btn-primary" id="signupBtn"> ‚ú® Create Account </button>
     </form>
    </div>
    <div class="auth-footer">
     <p>Already have an account? <a onclick="showLogin()">Sign In</a></p>
    </div>
   </div>
  </div><!-- Main Application -->
  <div id="mainApp" class="container" style="display: none;"><!-- Header -->
   <header>
    <div class="header-top">
     <div class="logo-section">
      <div class="logo"></div>
      <div class="brand-info">
       <h1>EmbroiTech</h1>
       <p>Premium Embroidery Designs</p>
      </div>
     </div>
     <div class="search-container">
      <div class="search-bar"><span style="font-size: 20px;">üîç</span> <input type="text" id="mainSearch" placeholder="Search designs: mirror work, kurti, choli, ghagra, bridal..." oninput="handleSearch()">
      </div>
     </div>
     <div class="header-actions"><button class="btn btn-outline btn-icon" onclick="showView('wishlist')"> <span>‚ù§Ô∏è</span> <span class="badge" id="wishlistCount">0</span> </button> <button class="btn btn-primary btn-icon" onclick="showView('cart')"> <span>üõí</span> <span class="badge" id="cartCount">0</span> </button>
      <div class="user-menu">
       <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">
        U
       </div>
       <div class="user-dropdown" id="userDropdown">
        <div class="user-dropdown-header"><strong id="userDisplayName">User</strong> <span id="userDisplayEmail">user@email.com</span>
        </div>
        <div class="user-dropdown-item" onclick="showView('profile')">
         üë§ My Profile
        </div>
        <div class="user-dropdown-item" onclick="showView('orders')">
         üì¶ My Orders
        </div>
        <div class="user-dropdown-item" onclick="showView('calculator')">
         üßÆ Cost Calculator
        </div>
        <div class="user-dropdown-item" onclick="showView('admin')" id="adminMenuItem" style="display: none;">
         ‚öôÔ∏è Admin Dashboard
        </div>
        <div class="user-dropdown-item" onclick="handleLogout()">
         üö™ Logout
        </div>
       </div>
      </div>
     </div>
    </div>
    <nav class="nav-tabs"><button class="nav-tab active" onclick="showView('browse')">üè† Home</button> <button class="nav-tab" onclick="showView('categories')">üìÇ Categories</button> <button class="nav-tab" onclick="showView('trending')">üî• Trending</button> <button class="nav-tab" onclick="showView('new')">‚ú® New Arrivals</button> <button class="nav-tab" onclick="showView('calculator')">üßÆ Cost Calculator</button>
    </nav>
   </header><!-- Filter Bar -->
   <div class="filter-bar" id="filterBar">
    <div class="filter-group"><label>Category:</label> <select id="categoryFilter" onchange="applyFilters()"> <option value="">All Categories</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
    </div>
    <div class="filter-group"><label>Min Price:</label> <input type="number" id="minPrice" placeholder="‚Çπ0" oninput="applyFilters()">
    </div>
    <div class="filter-group"><label>Max Price:</label> <input type="number" id="maxPrice" placeholder="‚Çπ10000" oninput="applyFilters()">
    </div>
    <div class="filter-group"><label>Rating:</label> <select id="ratingFilter" onchange="applyFilters()"> <option value="">All Ratings</option> <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 Stars</option> <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê 4+ Stars</option> <option value="3">‚≠ê‚≠ê‚≠ê 3+ Stars</option> </select>
    </div>
    <div class="filter-group"><label>Stock:</label> <select id="stockFilter" onchange="applyFilters()"> <option value="">All Items</option> <option value="in-stock">In Stock Only</option> </select>
    </div>
    <div class="filter-actions"><button class="btn btn-outline btn-small" onclick="clearFilters()"> Clear Filters </button>
    </div>
   </div><!-- Main Content Area -->
   <main class="content-area"><!-- Browse View -->
    <div id="browseView" class="view-content">
     <div class="view-header">
      <div>
       <h2>‚ú® All Designs <span class="results-count" id="resultsCount">(0 items)</span></h2>
      </div>
      <div class="view-controls"><select class="sort-select" id="sortSelect" onchange="applyFilters()"> <option value="newest">Newest First</option> <option value="price-low">Price: Low to High</option> <option value="price-high">Price: High to Low</option> <option value="rating">Highest Rated</option> <option value="popular">Most Popular</option> </select>
       <div class="view-toggle"><button class="active" onclick="setViewMode('grid')" id="gridViewBtn">‚äû</button> <button onclick="setViewMode('list')" id="listViewBtn">‚ò∞</button>
       </div>
      </div>
     </div>
     <div class="products-grid" id="productsGrid">
      <div class="empty-state">
       <div class="empty-state-icon">
        üé®
       </div>
       <h3>No designs available yet</h3>
       <p>Be the first to upload beautiful embroidery designs!</p>
      </div>
     </div>
    </div><!-- Cost Calculator View -->
    <div id="calculatorView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üßÆ Design Cost Calculator</h2>
     </div>
     <div class="calculator-section">
      <h3>üí∞ Calculate Your Design Cost</h3>
      <p style="opacity: 0.9; margin-bottom: 28px;">Enter the details of your embroidery design to estimate the cost and time required.</p>
      <div class="calculator-grid">
       <div class="calculator-input"><label>Design Type</label> <select id="calcDesignType" onchange="calculateCost()"> <option value="mirror">Mirror Work</option> <option value="hand">Hand Embroidery</option> <option value="zari">Zari Work</option> <option value="thread">Thread Work</option> <option value="sequin">Sequin Work</option> </select>
       </div>
       <div class="calculator-input"><label>Design Size (sq. inches)</label> <input type="number" id="calcSize" value="100" min="1" oninput="calculateCost()" placeholder="e.g., 100">
       </div>
       <div class="calculator-input"><label>Complexity Level</label> <select id="calcComplexity" onchange="calculateCost()"> <option value="simple">Simple</option> <option value="medium">Medium</option> <option value="complex">Complex</option> <option value="intricate">Intricate</option> </select>
       </div>
       <div class="calculator-input"><label>Number of Colors</label> <input type="number" id="calcColors" value="3" min="1" max="20" oninput="calculateCost()" placeholder="e.g., 3">
       </div>
       <div class="calculator-input"><label>Material Quality</label> <select id="calcMaterial" onchange="calculateCost()"> <option value="standard">Standard</option> <option value="premium">Premium</option> <option value="luxury">Luxury</option> </select>
       </div>
       <div class="calculator-input"><label>Quantity</label> <input type="number" id="calcQuantity" value="1" min="1" oninput="calculateCost()" placeholder="e.g., 1">
       </div>
      </div>
      <div class="cost-result">
       <h4>Estimated Total Cost</h4>
       <div class="cost-value">
        ‚Çπ<span id="totalCost">0</span>
       </div>
       <p style="opacity: 0.9; font-size: 14px;">Per piece: ‚Çπ<span id="perPieceCost">0</span></p>
       <div class="cost-breakdown">
        <div class="cost-breakdown-item"><strong>‚è±Ô∏è Time Required</strong> <span id="timeRequired">0 hrs</span>
        </div>
        <div class="cost-breakdown-item"><strong>üßµ Material Cost</strong> <span>‚Çπ<span id="materialCost">0</span></span>
        </div>
        <div class="cost-breakdown-item"><strong>üë®‚Äçüé® Labor Cost</strong> <span>‚Çπ<span id="laborCost">0</span></span>
        </div>
       </div>
      </div>
     </div>
     <div style="background: #f7fafc; padding: 32px; border-radius: 20px; margin-top: 28px;">
      <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 22px; font-weight: 700;">üìä Cost Breakdown Details</h3>
      <div style="display: grid; gap: 14px; color: #4a5568; font-size: 15px; line-height: 1.9;">
       <p><strong>Design Type:</strong> Different embroidery types have varying complexity and material costs.</p>
       <p><strong>Size:</strong> Larger designs require more materials and time.</p>
       <p><strong>Complexity:</strong> Intricate patterns take longer and require skilled artisans.</p>
       <p><strong>Colors:</strong> More colors mean more thread changes and precision work.</p>
       <p><strong>Material Quality:</strong> Premium materials increase the overall cost but ensure better durability.</p>
       <p><strong>Quantity:</strong> Bulk orders may qualify for discounts (applied automatically).</p>
      </div>
     </div>
    </div><!-- Categories View -->
    <div id="categoriesView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üìÇ Browse by Category</h2>
     </div>
     <div class="products-grid" id="categoriesGrid"></div>
    </div><!-- Trending View -->
    <div id="trendingView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üî• Trending Designs</h2>
     </div>
     <div class="products-grid" id="trendingGrid"></div>
    </div><!-- New Arrivals View -->
    <div id="newView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>‚ú® New Arrivals</h2>
     </div>
     <div class="products-grid" id="newGrid"></div>
    </div><!-- Wishlist View -->
    <div id="wishlistView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>‚ù§Ô∏è My Wishlist</h2>
     </div>
     <div class="products-grid" id="wishlistGrid"></div>
    </div><!-- Cart View -->
    <div id="cartView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üõí Shopping Cart</h2>
     </div>
     <div id="cartContent"></div>
    </div><!-- Profile View -->
    <div id="profileView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üë§ My Profile</h2>
     </div>
     <div style="max-width: 600px;">
      <form onsubmit="updateProfile(event)">
       <div class="form-group"><label for="profileName">Full Name</label> <input type="text" id="profileName" required>
       </div>
       <div class="form-group"><label for="profileEmail">Email</label> <input type="email" id="profileEmail" disabled>
       </div>
       <div class="form-group"><label for="profilePhone">Phone</label> <input type="tel" id="profilePhone" required>
       </div>
       <div class="form-group"><label for="profileAddress">Address</label> <textarea id="profileAddress"></textarea>
       </div><button type="submit" class="btn btn-primary">Update Profile</button>
      </form>
     </div>
    </div><!-- Orders View -->
    <div id="ordersView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>üì¶ My Orders</h2>
     </div>
     <div id="ordersContent"></div>
    </div><!-- Admin View -->
    <div id="adminView" class="view-content" style="display: none;">
     <div class="view-header">
      <h2>‚öôÔ∏è Admin Dashboard</h2><button class="btn btn-secondary" onclick="openUploadModal()"> ‚ûï Upload Design </button>
     </div>
     <div class="admin-stats">
      <div class="stat-card">
       <h3>Total Designs</h3>
       <div class="stat-value" id="totalDesigns">
        0
       </div>
       <div class="stat-label">
        Uploaded designs
       </div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
       <h3>In Stock</h3>
       <div class="stat-value" id="inStockCount">
        0
       </div>
       <div class="stat-label">
        Available items
       </div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
       <h3>Categories</h3>
       <div class="stat-value" id="categoriesCount">
        5
       </div>
       <div class="stat-label">
        Design types
       </div>
      </div>
      <div class="stat-card" style="background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);">
       <h3>Total Users</h3>
       <div class="stat-value" id="totalUsers">
        0
       </div>
       <div class="stat-label">
        Registered users
       </div>
      </div>
     </div><!-- Analytics Section -->
     <div style="background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.08); margin-bottom: 28px;">
      <h3 style="font-size: 26px; color: #2d3748; margin-bottom: 28px; display: flex; align-items: center; gap: 12px; font-weight: 700;">üìä Website Analytics</h3>
      <div class="admin-stats" style="margin-bottom: 40px;">
       <div class="stat-card" style="background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);">
        <h3>Total Searches</h3>
        <div class="stat-value" id="totalSearches">
         0
        </div>
        <div class="stat-label">
         Search queries
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
        <h3>Total Purchases</h3>
        <div class="stat-value" id="totalPurchases">
         0
        </div>
        <div class="stat-label">
         Completed orders
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
        <h3>Items in Carts</h3>
        <div class="stat-value" id="totalCartItems">
         0
        </div>
        <div class="stat-label">
         Across all users
        </div>
       </div>
       <div class="stat-card" style="background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);">
        <h3>Revenue</h3>
        <div class="stat-value">
         ‚Çπ<span id="totalRevenue">0</span>
        </div>
        <div class="stat-label">
         Total earnings
        </div>
       </div>
      </div><!-- Top Searches -->
      <div style="margin-bottom: 40px;">
       <h4 style="font-size: 20px; color: #2d3748; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 700;">üîç Top Search Terms</h4>
       <div id="topSearches" style="background: #f7fafc; padding: 24px; border-radius: 16px;"></div>
      </div><!-- Popular Products -->
      <div style="margin-bottom: 40px;">
       <h4 style="font-size: 20px; color: #2d3748; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 700;">üî• Most Added to Cart</h4>
       <div id="popularProducts" style="background: #f7fafc; padding: 24px; border-radius: 16px;"></div>
      </div><!-- Recent Activity -->
      <div>
       <h4 style="font-size: 20px; color: #2d3748; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 700;">üìà Recent Activity</h4>
       <div id="recentActivity" style="background: #f7fafc; padding: 24px; border-radius: 16px; max-height: 400px; overflow-y: auto;"></div>
      </div>
     </div>
     <h3 style="font-size: 22px; color: #2d3748; margin-bottom: 24px; font-weight: 700;">All Products</h3>
     <div class="products-grid" id="adminProductsGrid"></div>
    </div>
   </main><!-- Footer -->
   <footer>
    <div class="footer-content">
     <div class="footer-brand">
      <div class="footer-logo-section">
       <div class="footer-logo"></div>
       <h2>EmbroiTech</h2>
      </div>
      <p>Your premier destination for exquisite embroidery designs. We bring together traditional craftsmanship and modern technology to deliver stunning patterns for all your creative needs.</p>
      <p style="margin-top: 12px;"><strong>üé® Design. Create. Inspire.</strong></p>
     </div>
     <div class="footer-section">
      <h3>Quick Links</h3>
      <div class="footer-links"><a href="#" onclick="showView('browse'); return false;">Browse Designs</a> <a href="#" onclick="showView('categories'); return false;">Categories</a> <a href="#" onclick="showView('trending'); return false;">Trending</a> <a href="#" onclick="showView('new'); return false;">New Arrivals</a> <a href="#" onclick="showView('calculator'); return false;">Cost Calculator</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Customer Care</h3>
      <div class="footer-links"><a href="#" onclick="showView('profile'); return false;">My Account</a> <a href="#" onclick="showView('orders'); return false;">Order History</a> <a href="#" onclick="showView('wishlist'); return false;">Wishlist</a> <a href="#" onclick="showView('cart'); return false;">Shopping Cart</a> <a href="#">Help &amp; Support</a>
      </div>
     </div>
     <div class="footer-section">
      <h3>Contact Us</h3>
      <div class="footer-contact">
       <div class="footer-contact-item"><span>üìß</span> <span>info@embroitech.com</span>
       </div>
       <div class="footer-contact-item"><span>üìû</span> <span>+91 98765 43210</span>
       </div>
       <div class="footer-contact-item"><span>üìç</span> <span>Mumbai, India</span>
       </div>
       <div class="footer-contact-item"><span>‚è∞</span> <span>Mon-Sat: 9AM-6PM</span>
       </div>
      </div>
     </div>
    </div>
    <div class="footer-bottom">
     <p>¬© 2024 EmbroiTech. All rights reserved. Crafted with ‚ù§Ô∏è for embroidery enthusiasts.</p>
     <div class="footer-social">
      <div class="social-icon" title="Facebook">
       üìò
      </div>
      <div class="social-icon" title="Instagram">
       üì∑
      </div>
      <div class="social-icon" title="Twitter">
       üê¶
      </div>
      <div class="social-icon" title="Pinterest">
       üìå
      </div>
      <div class="social-icon" title="WhatsApp">
       üí¨
      </div>
     </div>
    </div>
   </footer>
  </div><!-- Upload Product Modal -->
  <div id="uploadModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closeUploadModal()">√ó</button>
    <h2 style="margin-bottom: 28px; color: #2d3748; font-weight: 800;">Upload New Design</h2>
    <div class="loading-spinner" id="uploadLoading">
     ‚è≥ Uploading...
    </div>
    <form id="uploadForm" onsubmit="handleUpload(event)">
     <div class="form-group"><label>Upload Image *</label>
      <div class="image-upload-area" id="uploadArea" onclick="document.getElementById('productImage').click()">
       <div class="upload-icon">
        üì∏
       </div>
       <p style="color: #718096; font-size: 16px; font-weight: 600;">Click to select image</p>
       <p style="color: #a0aec0; font-size: 13px; margin-top: 10px;">JPG, PNG, GIF (Max 5MB)</p>
      </div><input type="file" id="productImage" accept="image/*" style="display: none;" onchange="previewImage(event)" required> <img id="imagePreview" class="image-preview" alt="Preview">
     </div>
     <div class="form-group"><label for="productName">Design Name *</label> <input type="text" id="productName" required placeholder="e.g., Royal Mirror Work Pattern">
     </div>
     <div class="form-group"><label for="productCategory">Category *</label> <select id="productCategory" required> <option value="">Select Category</option> <option value="Mirror Work">Mirror Work</option> <option value="Hand Embroidery">Hand Embroidery</option> <option value="Zari Work">Zari Work</option> <option value="Thread Work">Thread Work</option> <option value="Sequin Work">Sequin Work</option> </select>
     </div>
     <div class="form-group"><label for="productTags">Search Tags (comma separated) *</label> <input type="text" id="productTags" required placeholder="e.g., mirror, bridal, traditional, golden, kurti, choli">
      <p style="font-size: 12px; color: #718096; margin-top: 6px;">Add keywords like: mirror work, hand design, kurti, choli, ghagra, bridal, traditional</p>
     </div>
     <div class="form-group"><label for="productPrice">Price (‚Çπ) *</label> <input type="number" id="productPrice" required min="0" step="0.01" placeholder="e.g., 1299">
     </div>
     <div class="form-group"><label for="productDescription">Description</label> <textarea id="productDescription" placeholder="Describe the design, materials, and special features..."></textarea>
     </div>
     <div class="form-group"><label for="productRating">Rating (1-5)</label> <input type="number" id="productRating" min="1" max="5" step="0.1" value="4.5">
     </div>
     <div class="form-group"><label for="productReviews">Number of Reviews</label> <input type="number" id="productReviews" min="0" value="0">
     </div>
     <div class="form-group"><label style="display: flex; align-items: center; gap: 12px; cursor: pointer;"> <input type="checkbox" id="productInStock" checked style="width: 24px; height: 24px; accent-color: #e94560;"> <span>In Stock</span> </label>
     </div><button type="submit" class="btn btn-primary"> Upload Design </button>
    </form>
   </div>
  </div><!-- Product Detail Modal -->
  <div id="productDetailModal" class="modal">
   <div class="modal-content large"><button class="modal-close" onclick="closeProductDetail()">√ó</button>
    <div id="productDetailContent"></div>
   </div>
  </div><!-- Payment Modal -->
  <div id="paymentModal" class="modal">
   <div class="modal-content"><button class="modal-close" onclick="closePaymentModal()">√ó</button>
    <h2 style="margin-bottom: 28px; color: #2d3748; font-weight: 800;">üí≥ Payment Details</h2>
    <div style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); color: white; padding: 28px; border-radius: 20px; margin-bottom: 28px; text-align: center;">
     <p style="font-size: 14px; opacity: 0.95; margin-bottom: 10px;">Total Amount</p>
     <p style="font-size: 40px; font-weight: 800;">‚Çπ<span id="paymentAmount">0.00</span></p>
    </div>
    <form id="paymentForm" onsubmit="processPayment(event)">
     <div class="form-group"><label for="cardNumber">Card Number *</label> <input type="text" id="cardNumber" required placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
     </div>
     <div class="form-group"><label for="cardName">Cardholder Name *</label> <input type="text" id="cardName" required placeholder="John Doe">
     </div>
     <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
      <div class="form-group"><label for="expiryDate">Expiry Date *</label> <input type="text" id="expiryDate" required placeholder="MM/YY" maxlength="5" oninput="formatExpiryDate(this)">
      </div>
      <div class="form-group"><label for="cvv">CVV *</label> <input type="text" id="cvv" required placeholder="123" maxlength="4" pattern="\d{3,4}">
      </div>
     </div><button type="submit" class="btn btn-primary" id="paymentBtn"> üí≥ Pay Now </button>
    </form>
    <div style="background: #f7fafc; padding: 20px; border-radius: 12px; margin-top: 24px;">
     <p style="font-size: 12px; color: #718096; text-align: center;">üîí Secure payment processing. Your card details are encrypted.</p>
    </div>
   </div>
  </div>
  <div id="notification" class="notification"></div>
  <script>
    // State
    let allRecords = [];
    let currentUser = null;
    let cartItems = [];
    let wishlistItems = [];
    let currentView = 'browse';
    let viewMode = 'grid';
    let searchTimeout = null;
    
    // Activity Tracking
    function trackActivity(activityType, data) {
      const activity = {
        __backendId: 'local_' + Date.now() + '_' + Math.random(),
        id: Date.now().toString() + '_' + Math.random(),
        type: 'activity',
        activityType: activityType,
        userId: currentUser ? currentUser.email : 'guest',
        timestamp: new Date().toISOString(),
        ...data
      };
      
      allRecords.push(activity);
      saveToLocalStorage();
    }

    // Initialize
    function init() {
      loadFromLocalStorage();
      seedInitialProducts();
      checkAuth();
      calculateCost();
    }
    
    // Seed initial products with realistic data
    function seedInitialProducts() {
      const existingProducts = allRecords.filter(r => r.type === 'product');
      if (existingProducts.length > 0) return;
      
      const sampleProducts = [
        {
          __backendId: 'seed_1',
          id: '1',
          type: 'product',
          productName: 'Royal Bridal Mirror Work Lehenga Design',
          category: 'Mirror Work',
          tags: 'mirror work, bridal, lehenga, wedding, traditional, red, golden',
          price: 2499,
          description: 'Exquisite mirror work design perfect for bridal lehengas. Features intricate patterns with traditional motifs and premium quality mirrors.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjRhNGE7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTIwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjMiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIxMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48Y2lyY2xlIGN4PSIxMDAiIGN5PSIzMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48Y2lyY2xlIGN4PSIzMDAiIGN5PSIzMDAiIHI9IjQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjQiLz48dGV4dCB4PSIyMDAiIHk9IjIyMCIgZm9udC1zaXplPSI2MCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIj7wn5qePC90ZXh0Pjwvc3ZnPg==',
          rating: 4.9,
          reviews: 156,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_2',
          id: '2',
          type: 'product',
          productName: 'Elegant Hand Embroidery Kurti Pattern',
          category: 'Hand Embroidery',
          tags: 'hand embroidery, kurti, casual, floral, cotton, daily wear',
          price: 899,
          description: 'Beautiful hand-embroidered floral pattern ideal for kurtis. Delicate threadwork with vibrant colors.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjk4YTA7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmNjZGQ7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iODAiIGZpbGw9IiNmZjY2OTkiIG9wYWNpdHk9IjAuNiIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjI1MCIgY3k9IjE1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjE1MCIgY3k9IjI1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjxjaXJjbGUgY3g9IjI1MCIgY3k9IjI1MCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiIG9wYWNpdHk9IjAuOCIvPjx0ZXh0IHg9IjIwMCIgeT0iMjIwIiBmb250LXNpemU9IjYwIiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiPuKcizwvdGV4dD48L3N2Zz4=',
          rating: 4.7,
          reviews: 89,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_3',
          id: '3',
          type: 'product',
          productName: 'Premium Zari Work Saree Border Design',
          category: 'Zari Work',
          tags: 'zari work, saree, border, golden, silk, wedding, festive',
          price: 3299,
          description: 'Luxurious golden zari work perfect for saree borders. Traditional craftsmanship with modern appeal.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmE1MDA7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxyZWN0IHg9IjUwIiB5PSIxNTAiIHdpZHRoPSIzMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjMiLz48cmVjdCB4PSI3MCIgeT0iMTcwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjUiLz48dGV4dCB4PSIyMDAiIHk9IjIyMCIgZm9udC1zaXplPSI2MCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIj7inKg8L3RleHQ+PC9zdmc+',
          rating: 4.8,
          reviews: 124,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_4',
          id: '4',
          type: 'product',
          productName: 'Colorful Thread Work Choli Design',
          category: 'Thread Work',
          tags: 'thread work, choli, colorful, navratri, garba, festive',
          price: 1299,
          description: 'Vibrant multi-colored thread work design perfect for cholis. Eye-catching patterns for festive occasions.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM2NjdlZWE7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6I2ZmNjY5OTtzdG9wLW9wYWNpdHk6MSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6I2ZmY2MwMDtzdG9wLW9wYWNpdHk6MSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMzAwIiBjeT0iMTAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMzAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PGNpcmNsZSBjeD0iMzAwIiBjeT0iMzAwIiByPSI1MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ci8+PHRleHQgeD0iMjAwIiB5PSIyMjAiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCI+8J+ntTwvdGV4dD48L3N2Zz4=',
          rating: 4.6,
          reviews: 67,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_5',
          id: '5',
          type: 'product',
          productName: 'Sparkling Sequin Work Ghagra Pattern',
          category: 'Sequin Work',
          tags: 'sequin work, ghagra, party wear, shimmer, dance, performance',
          price: 1899,
          description: 'Dazzling sequin work design for ghagras. Perfect for dance performances and party wear.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9ImciPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmY7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNjY2Y7c3RvcC1vcGFjaXR5OjEiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iIzY2N2VlYSIvPjxjaXJjbGUgY3g9IjgwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMjQwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMzIwIiBjeT0iODAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iODAiIGN5PSIxNjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMTYwIiByPSIyMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjE2MCIgcj0iMjAiIGZpbGw9InVybCgjZykiLz48Y2lyY2xlIGN4PSIzMjAiIGN5PSIxNjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iODAiIGN5PSIyNDAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMjQwIiByPSIyMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjI0MCIgcj0iMjAiIGZpbGw9InVybCgjZykiLz48Y2lyY2xlIGN4PSIzMjAiIGN5PSIyNDAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iODAiIGN5PSIzMjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PGNpcmNsZSBjeD0iMTYwIiBjeT0iMzIwIiByPSIyMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjI0MCIgY3k9IjMyMCIgcj0iMjAiIGZpbGw9InVybCgjZykiLz48Y2lyY2xlIGN4PSIzMjAiIGN5PSIzMjAiIHI9IjIwIiBmaWxsPSJ1cmwoI2cpIi8+PHRleHQgeD0iMjAwIiB5PSIyMjAiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCI+8J+SjjwvdGV4dD48L3N2Zz4=',
          rating: 4.5,
          reviews: 92,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_6',
          id: '6',
          type: 'product',
          productName: 'Traditional Mirror Work Kurti Neck Design',
          category: 'Mirror Work',
          tags: 'mirror work, kurti, neck design, traditional, ethnic, casual',
          price: 799,
          description: 'Classic mirror work neck design for kurtis. Simple yet elegant pattern for everyday wear.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjg4NTY7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmNjNjY7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjE1MCIgcj0iNjAiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuNSIvPjxjaXJjbGUgY3g9IjEyMCIgY3k9IjIwMCIgcj0iMzAiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuNSIvPjxjaXJjbGUgY3g9IjI4MCIgY3k9IjIwMCIgcj0iMzAiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuNSIvPjx0ZXh0IHg9IjIwMCIgeT0iMTcwIiBmb250LXNpemU9IjQwIiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiPvCfkqY8L3RleHQ+PC9zdmc+',
          rating: 4.4,
          reviews: 45,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_7',
          id: '7',
          type: 'product',
          productName: 'Delicate Hand Embroidery Dupatta Border',
          category: 'Hand Embroidery',
          tags: 'hand embroidery, dupatta, border, delicate, pastel, soft',
          price: 1099,
          description: 'Soft and delicate hand embroidery perfect for dupatta borders. Pastel colors with intricate detailing.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlMGM4ZmY7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmU0ZTQ7c3RvcC1vcGFjaXR5OjEiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxwYXRoIGQ9Ik01MCAxNTAgUTEwMCAxMjAgMTUwIDE1MCBUIDI1MCAxNTAgVCAzNTAgMTUwIiBzdHJva2U9IiNmZjk5Y2MiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik01MCAyNTAgUTEwMCAyMjAgMTUwIDI1MCBUIDI1MCAyNTAgVCAzNTAgMjUwIiBzdHJva2U9IiNmZjk5Y2MiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPjx0ZXh0IHg9IjIwMCIgeT0iMjIwIiBmb250LXNpemU9IjYwIiBmaWxsPSIjZmY5OWNjIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiPvCfjLg8L3RleHQ+PC9zdmc+',
          rating: 4.7,
          reviews: 78,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()
        },
        {
          __backendId: 'seed_8',
          id: '8',
          type: 'product',
          productName: 'Heavy Zari Work Bridal Blouse Design',
          category: 'Zari Work',
          tags: 'zari work, blouse, bridal, heavy work, wedding, golden',
          price: 4299,
          description: 'Opulent heavy zari work for bridal blouses. Intricate golden patterns with premium quality materials.',
          imageData: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cmFkaWFsR3JhZGllbnQgaWQ9ImciPjxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmQ3MDA7c3RvcC1vcGFjaXR5OjEiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmZjg4MDA7c3RvcC1vcGFjaXR5OjEiLz48L3JhZGlhbEdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNnKSIvPjxjaXJjbGUgY3g9IjIwMCIgY3k9IjIwMCIgcj0iMTQwIiBmaWxsPSIjZmZmIiBvcGFjaXR5PSIwLjIiLz48Y2lyY2xlIGN4PSIyMDAiIGN5PSIyMDAiIHI9IjEwMCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC4zIi8+PGNpcmNsZSBjeD0iMjAwIiBjeT0iMjAwIiByPSI2MCIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40Ii8+PHRleHQgeD0iMjAwIiB5PSIyMjAiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCI+8J+RsDwvdGV4dD48L3N2Zz4=',
          rating: 4.9,
          reviews: 143,
          inStock: true,
          uploadedBy: 'admin',
          createdAt: new Date(Date.now() - 8 * 24 * 60 * 60 * 1000).toISOString()
        }
      ];
      
      allRecords.push(...sampleProducts);
      saveToLocalStorage();
    }
    
    function loadFromLocalStorage() {
      const stored = localStorage.getItem('embroitech_data');
      if (stored) {
        try {
          allRecords = JSON.parse(stored);
        } catch (error) {
          console.error("Error loading data:", error);
          allRecords = [];
        }
      }
      updateUI();
    }
    
    function saveToLocalStorage() {
      try {
        localStorage.setItem('embroitech_data', JSON.stringify(allRecords));
      } catch (error) {
        console.error("Error saving data:", error);
      }
    }

    // Authentication
    function checkAuth() {
      const savedUser = localStorage.getItem('embroitech_user');
      const rememberMe = localStorage.getItem('embroitech_remember');
      
      if (savedUser && rememberMe === 'true') {
        currentUser = JSON.parse(savedUser);
        showMainApp();
      } else {
        showAuthScreen();
      }
    }

    function showAuthScreen() {
      document.getElementById('authScreen').style.display = 'flex';
      document.getElementById('mainApp').style.display = 'none';
    }

    function showMainApp() {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'block';
      
      const initials = currentUser.fullName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
      document.getElementById('userAvatar').textContent = initials;
      document.getElementById('userDisplayName').textContent = currentUser.fullName;
      document.getElementById('userDisplayEmail').textContent = currentUser.email;
      
      if (currentUser.isAdmin) {
        document.getElementById('adminMenuItem').style.display = 'flex';
      }
      
      loadUserProfile();
      updateUI();
    }

    function showLogin() {
      document.getElementById('loginForm').style.display = 'block';
      document.getElementById('signupForm').style.display = 'none';
    }

    function showSignup() {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const email = document.getElementById('loginEmail').value.trim().toLowerCase();
      const password = document.getElementById('loginPassword').value;
      
      const loginBtn = document.getElementById('loginBtn');
      loginBtn.disabled = true;
      loginBtn.textContent = 'üîÑ Signing in...';
      
      const users = allRecords.filter(r => r.type === 'user');
      const user = users.find(u => u.email === email && u.password === password);
      
      setTimeout(() => {
        if (user) {
          currentUser = user;
          localStorage.setItem('embroitech_user', JSON.stringify(user));
          localStorage.setItem('embroitech_remember', 'true');
          
          trackActivity('login', { userId: user.email, timestamp: new Date().toISOString() });
          
          showNotification('‚úÖ Welcome back, ' + user.fullName + '!');
          showMainApp();
        } else {
          showNotification('‚ùå Invalid email or password', 'error');
          loginBtn.disabled = false;
          loginBtn.textContent = 'üîê Sign In';
        }
      }, 500);
    }

    function handleSignup(event) {
      event.preventDefault();
      
      const fullName = document.getElementById('signupFullName').value.trim();
      const email = document.getElementById('signupEmail').value.trim().toLowerCase();
      const phone = document.getElementById('signupPhone').value.trim();
      const password = document.getElementById('signupPassword').value;
      const address = document.getElementById('signupAddress').value.trim();
      
      const users = allRecords.filter(r => r.type === 'user');
      if (users.find(u => u.email === email)) {
        showNotification('‚ùå Email already registered', 'error');
        return;
      }
      
      const signupBtn = document.getElementById('signupBtn');
      signupBtn.disabled = true;
      signupBtn.textContent = 'üîÑ Creating account...';
      
      const isFirstUser = users.length === 0;
      
      const newUser = {
        __backendId: 'local_' + Date.now(),
        id: Date.now().toString(),
        type: 'user',
        username: email.split('@')[0],
        email: email,
        password: password,
        fullName: fullName,
        phone: phone,
        address: address,
        isAdmin: isFirstUser,
        createdAt: new Date().toISOString()
      };
      
      setTimeout(() => {
        allRecords.push(newUser);
        saveToLocalStorage();
        showNotification('‚úÖ Account created! ' + (isFirstUser ? 'You are the admin!' : ''));
        showLogin();
        document.getElementById('loginEmail').value = email;
        signupBtn.disabled = false;
        signupBtn.textContent = '‚ú® Create Account';
      }, 500);
    }

    function handleLogout() {
      localStorage.removeItem('embroitech_user');
      localStorage.removeItem('embroitech_remember');
      currentUser = null;
      cartItems = [];
      wishlistItems = [];
      showNotification('üëã Logged out successfully');
      showAuthScreen();
      showLogin();
    }

    function checkPasswordStrength() {
      const password = document.getElementById('signupPassword').value;
      const bar = document.getElementById('passwordStrengthBar');
      
      let strength = 0;
      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
      if (/\d/.test(password)) strength++;
      if (/[^a-zA-Z\d]/.test(password)) strength++;
      
      bar.className = 'password-strength-bar';
      if (strength <= 1) bar.classList.add('weak');
      else if (strength <= 2) bar.classList.add('medium');
      else bar.classList.add('strong');
    }

    // UI Updates
    function updateUI() {
      updateStats();
      renderProducts();
      renderCategories();
      renderTrending();
      renderNewArrivals();
      renderWishlist();
      renderCart();
      renderAdminProducts();
      renderOrders();
    }

    function updateStats() {
      const products = allRecords.filter(r => r.type === 'product');
      const users = allRecords.filter(r => r.type === 'user');
      const activities = allRecords.filter(r => r.type === 'activity');
      const orders = allRecords.filter(r => r.type === 'order');
      
      document.getElementById('totalDesigns').textContent = products.length;
      document.getElementById('inStockCount').textContent = products.filter(p => p.inStock).length;
      document.getElementById('totalUsers').textContent = users.length;
      
      const searches = activities.filter(a => a.activityType === 'search');
      const purchases = activities.filter(a => a.activityType === 'purchase');
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      
      document.getElementById('totalSearches').textContent = searches.length;
      document.getElementById('totalPurchases').textContent = purchases.length;
      document.getElementById('totalCartItems').textContent = cartAdditions.length;
      
      const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
      document.getElementById('totalRevenue').textContent = Math.round(totalRevenue).toLocaleString('en-IN');
      
      renderAnalytics();
    }
    
    function renderAnalytics() {
      const activities = allRecords.filter(r => r.type === 'activity');
      
      const searches = activities.filter(a => a.activityType === 'search');
      const searchTerms = {};
      searches.forEach(s => {
        const term = s.searchTerm.toLowerCase();
        searchTerms[term] = (searchTerms[term] || 0) + 1;
      });
      
      const topSearches = Object.entries(searchTerms)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);
      
      const topSearchesEl = document.getElementById('topSearches');
      if (topSearches.length === 0) {
        topSearchesEl.innerHTML = '<p style="color: #718096; text-align: center;">No search data yet</p>';
      } else {
        topSearchesEl.innerHTML = topSearches.map(([term, count]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 14px; background: white; border-radius: 12px; margin-bottom: 10px;">
            <span style="font-weight: 600; color: #2d3748;">"${term}"</span>
            <span style="background: #e94560; color: white; padding: 6px 14px; border-radius: 14px; font-size: 13px; font-weight: 700;">${count} searches</span>
          </div>
        `).join('');
      }
      
      const cartAdditions = activities.filter(a => a.activityType === 'add_to_cart');
      const productCounts = {};
      cartAdditions.forEach(a => {
        const name = a.productName;
        if (!productCounts[name]) {
          productCounts[name] = { count: 0, price: a.price, category: a.category };
        }
        productCounts[name].count++;
      });
      
      const popularProducts = Object.entries(productCounts)
        .sort((a, b) => b[1].count - a[1].count)
        .slice(0, 10);
      
      const popularProductsEl = document.getElementById('popularProducts');
      if (popularProducts.length === 0) {
        popularProductsEl.innerHTML = '<p style="color: #718096; text-align: center;">No cart data yet</p>';
      } else {
        popularProductsEl.innerHTML = popularProducts.map(([name, data]) => `
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 14px; background: white; border-radius: 12px; margin-bottom: 10px;">
            <div>
              <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${name}</div>
              <div style="font-size: 13px; color: #718096;">${data.category} ‚Ä¢ ‚Çπ${data.price}</div>
            </div>
            <span style="background: #48bb78; color: white; padding: 6px 14px; border-radius: 14px; font-size: 13px; font-weight: 700;">${data.count} times</span>
          </div>
        `).join('');
      }
      
      const recentActivities = activities
        .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
        .slice(0, 20);
      
      const recentActivityEl = document.getElementById('recentActivity');
      if (recentActivities.length === 0) {
        recentActivityEl.innerHTML = '<p style="color: #718096; text-align: center;">No activity yet</p>';
      } else {
        recentActivityEl.innerHTML = recentActivities.map(activity => {
          const date = new Date(activity.timestamp);
          const timeStr = date.toLocaleString('en-IN', { 
            month: 'short', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit' 
          });
          
          let icon = 'üìä';
          let text = '';
          let color = '#718096';
          
          if (activity.activityType === 'search') {
            icon = 'üîç';
            text = `Searched for "${activity.searchTerm}" (${activity.resultsCount} results)`;
            color = '#4299e1';
          } else if (activity.activityType === 'add_to_cart') {
            icon = 'üõí';
            text = `Added "${activity.productName}" to cart`;
            color = '#f6ad55';
          } else if (activity.activityType === 'purchase') {
            icon = 'üí≥';
            text = `Purchased ${activity.itemCount} items for ‚Çπ${activity.total}`;
            color = '#48bb78';
          } else if (activity.activityType === 'login') {
            icon = 'üîê';
            text = `User logged in`;
            color = '#9f7aea';
          }
          
          return `
            <div style="display: flex; gap: 14px; padding: 14px; background: white; border-radius: 12px; margin-bottom: 10px; border-left: 4px solid ${color};">
              <span style="font-size: 26px;">${icon}</span>
              <div style="flex: 1;">
                <div style="font-weight: 600; color: #2d3748; margin-bottom: 4px;">${text}</div>
                <div style="font-size: 12px; color: #718096;">
                  ${activity.userId} ‚Ä¢ ${timeStr}
                </div>
              </div>
            </div>
          `;
        }).join('');
      }
    }

    // Search
    function handleSearch() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const searchTerm = document.getElementById('mainSearch').value.trim();
        if (searchTerm && currentUser) {
          trackActivity('search', { 
            searchTerm: searchTerm,
            resultsCount: getFilteredProducts().length
          });
        }
        applyFilters();
      }, 300);
    }

    // Filters
    function getFilteredProducts() {
      let products = allRecords.filter(r => r.type === 'product');
      
      const searchTerm = document.getElementById('mainSearch').value.toLowerCase().trim();
      if (searchTerm) {
        products = products.filter(p => 
          p.productName.toLowerCase().includes(searchTerm) ||
          p.category.toLowerCase().includes(searchTerm) ||
          (p.tags && p.tags.toLowerCase().includes(searchTerm)) ||
          (p.description && p.description.toLowerCase().includes(searchTerm))
        );
      }
      
      const categoryFilter = document.getElementById('categoryFilter').value;
      if (categoryFilter) {
        products = products.filter(p => p.category === categoryFilter);
      }
      
      const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
      const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
      products = products.filter(p => p.price >= minPrice && p.price <= maxPrice);
      
      const ratingFilter = document.getElementById('ratingFilter').value;
      if (ratingFilter) {
        const minRating = parseFloat(ratingFilter);
        products = products.filter(p => p.rating >= minRating);
      }
      
      const stockFilter = document.getElementById('stockFilter').value;
      if (stockFilter === 'in-stock') {
        products = products.filter(p => p.inStock);
      }
      
      const sortBy = document.getElementById('sortSelect').value;
      if (sortBy === 'price-low') {
        products.sort((a, b) => a.price - b.price);
      } else if (sortBy === 'price-high') {
        products.sort((a, b) => b.price - a.price);
      } else if (sortBy === 'rating') {
        products.sort((a, b) => b.rating - a.rating);
      } else if (sortBy === 'popular') {
        products.sort((a, b) => b.reviews - a.reviews);
      } else {
        products.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
      }
      
      return products;
    }

    function applyFilters() {
      renderProducts();
    }

    function clearFilters() {
      document.getElementById('mainSearch').value = '';
      document.getElementById('categoryFilter').value = '';
      document.getElementById('minPrice').value = '';
      document.getElementById('maxPrice').value = '';
      document.getElementById('ratingFilter').value = '';
      document.getElementById('stockFilter').value = '';
      document.getElementById('sortSelect').value = 'newest';
      applyFilters();
    }

    // Rendering
    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const products = getFilteredProducts();
      
      document.getElementById('resultsCount').textContent = `(${products.length} items)`;
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üîç</div>
            <h3>No designs found</h3>
            <p>Try adjusting your filters or search terms</p>
            <button class="btn btn-primary" onclick="clearFilters()" style="margin-top: 24px;">Clear Filters</button>
          </div>
        `;
        return;
      }
      
      grid.className = viewMode === 'grid' ? 'products-grid' : 'products-list';
      
      grid.innerHTML = products.map(p => renderProductCard(p, viewMode === 'list')).join('');
    }

    function renderProductCard(product, isList = false) {
      const isNew = (Date.now() - new Date(product.createdAt).getTime()) < 7 * 24 * 60 * 60 * 1000;
      const tags = product.tags ? product.tags.split(',').map(t => t.trim()).slice(0, 3) : [];
      
      const cardClass = isList ? 'product-card-list' : 'product-card';
      
      return `
        <div class="${cardClass}" data-product-id="${product.__backendId}" onclick="showProductDetail('${product.__backendId}')" style="cursor: pointer;">
          ${product.inStock ? 
            (isNew ? '<div class="product-badge new">New</div>' : '<div class="product-badge">In Stock</div>') : 
            '<div class="product-badge out-of-stock">Out of Stock</div>'}
          <button class="wishlist-btn ${isInWishlist(product.__backendId) ? 'active' : ''}" onclick="event.stopPropagation(); toggleWishlist('${product.__backendId}')">
            ${isInWishlist(product.__backendId) ? '‚ù§Ô∏è' : 'ü§ç'}
          </button>
          <div class="product-image">
            ${product.imageData ? `<img src="${product.imageData}" alt="${product.productName}">` : getEmojiForCategory(product.category)}
          </div>
          <div class="product-info">
            <span class="product-category">${product.category}</span>
            ${tags.length > 0 ? `
              <div class="product-tags">
                ${tags.map(tag => `<span class="product-tag">#${tag}</span>`).join('')}
              </div>
            ` : ''}
            <div class="product-name">${product.productName}</div>
            <div class="product-rating">
              <span class="stars">${'‚≠ê'.repeat(Math.floor(product.rating))}</span>
              <span class="rating-value">${product.rating}</span>
              <span class="review-count">(${product.reviews} reviews)</span>
            </div>
            <div class="product-price">‚Çπ${product.price.toFixed(2)}</div>
            ${product.description ? `<p style="font-size: 13px; color: #718096; margin-bottom: 14px; line-height: 1.6;">${product.description.substring(0, 100)}${product.description.length > 100 ? '...' : ''}</p>` : ''}
            <div class="product-actions">
              <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); addToCart('${product.__backendId}')" ${!product.inStock ? 'disabled' : ''}>
                ${product.inStock ? 'üõí Add to Cart' : 'Out of Stock'}
              </button>
              ${currentUser && currentUser.isAdmin ? `
                <button class="btn btn-danger btn-small" onclick="event.stopPropagation(); deleteProduct('${product.__backendId}')">
                  üóëÔ∏è
                </button>
              ` : ''}
            </div>
          </div>
        </div>
      `;
    }

    function renderCategories() {
      const grid = document.getElementById('categoriesGrid');
      const categories = [
        { name: 'Mirror Work', emoji: 'ü™û', desc: 'Traditional mirror embroidery' },
        { name: 'Hand Embroidery', emoji: '‚úã', desc: 'Handcrafted designs' },
        { name: 'Zari Work', emoji: '‚ú®', desc: 'Golden zari patterns' },
        { name: 'Thread Work', emoji: 'üßµ', desc: 'Colorful thread art' },
        { name: 'Sequin Work', emoji: 'üíé', desc: 'Sparkling sequin designs' }
      ];
      
      grid.innerHTML = categories.map(cat => {
        const count = allRecords.filter(r => r.type === 'product' && r.category === cat.name).length;
        return `
          <div class="product-card" onclick="filterByCategory('${cat.name}')">
            <div class="product-image" style="font-size: 100px;">${cat.emoji}</div>
            <div class="product-info">
              <div class="product-name">${cat.name}</div>
              <p style="color: #718096; font-size: 14px; margin-bottom: 10px;">${cat.desc}</p>
              <p style="color: #e94560; font-weight: 700; font-size: 16px;">${count} designs available</p>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderTrending() {
      const grid = document.getElementById('trendingGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => b.reviews - a.reviews)
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üî•</div>
            <h3>No trending designs yet</h3>
            <p>Check back soon for popular items</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderNewArrivals() {
      const grid = document.getElementById('newGrid');
      const products = allRecords
        .filter(r => r.type === 'product')
        .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
        .slice(0, 12);
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ú®</div>
            <h3>No new arrivals yet</h3>
            <p>Be the first to upload designs</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderWishlist() {
      const grid = document.getElementById('wishlistGrid');
      const products = allRecords.filter(r => r.type === 'product' && isInWishlist(r.__backendId));
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">‚ù§Ô∏è</div>
            <h3>Your wishlist is empty</h3>
            <p>Add designs you love to your wishlist</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 24px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    function renderCart() {
      const container = document.getElementById('cartContent');
      
      if (cartItems.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üõí</div>
            <h3>Your cart is empty</h3>
            <p>Add some beautiful designs to get started</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 24px;">Start Shopping</button>
          </div>
        `;
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      container.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 24px;">
          ${cartItems.map(item => `
            <div style="display: flex; gap: 24px; padding: 24px; border: 2px solid #f7fafc; border-radius: 20px; align-items: center;">
              <div style="width: 130px; height: 130px; background: linear-gradient(135deg, #f5f7fa 0%, #e8eaf6 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; font-size: 52px; flex-shrink: 0; overflow: hidden;">
                ${item.imageData ? `<img src="${item.imageData}" alt="${item.productName}" style="width: 100%; height: 100%; object-fit: cover;">` : getEmojiForCategory(item.category)}
              </div>
              <div style="flex: 1;">
                <div style="font-weight: 700; font-size: 19px; margin-bottom: 6px;">${item.productName}</div>
                <div style="font-size: 13px; color: #718096; margin-bottom: 10px;">${item.category}</div>
                <div style="color: #e94560; font-weight: 800; font-size: 22px;">‚Çπ${item.price.toFixed(2)}</div>
              </div>
              <button class="btn btn-danger btn-small" onclick="removeFromCart('${item.__backendId}')">
                Remove
              </button>
            </div>
          `).join('')}
          
          <div style="background: #f7fafc; padding: 32px; border-radius: 20px; margin-top: 24px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 17px;">
              <span>Subtotal:</span>
              <span style="font-weight: 600;">‚Çπ${subtotal.toFixed(2)}</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 17px;">
              <span>Shipping:</span>
              <span style="font-weight: 600;">${shipping === 0 ? 'FREE' : '‚Çπ' + shipping.toFixed(2)}</span>
            </div>
            ${shipping === 0 ? '<p style="font-size: 13px; color: #48bb78; margin-bottom: 20px;">üéâ You got free shipping!</p>' : '<p style="font-size: 13px; color: #718096; margin-bottom: 20px;">Free shipping on orders above ‚Çπ2000</p>'}
            <div style="display: flex; justify-content: space-between; font-size: 26px; font-weight: 800; color: #2d3748; padding-top: 24px; border-top: 2px solid #e2e8f0; margin-top: 16px;">
              <span>Total:</span>
              <span style="background: linear-gradient(135deg, #e94560 0%, #533483 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">‚Çπ${total.toFixed(2)}</span>
            </div>
          </div>
          
          <button class="btn btn-primary" onclick="proceedToCheckout()" style="width: 100%; font-size: 18px; padding: 20px;">
            üí≥ Proceed to Checkout
          </button>
        </div>
      `;
    }

    function renderOrders() {
      const container = document.getElementById('ordersContent');
      const orders = allRecords.filter(r => r.type === 'order' && r.userId === currentUser.email);
      
      if (orders.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No orders yet</h3>
            <p>Start shopping to see your orders here</p>
            <button class="btn btn-primary" onclick="showView('browse')" style="margin-top: 24px;">Browse Designs</button>
          </div>
        `;
        return;
      }
      
      orders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
      
      container.innerHTML = orders.map(order => {
        let orderItems = order.items;
        if (typeof orderItems === 'string') {
          try {
            orderItems = JSON.parse(orderItems);
          } catch (e) {
            orderItems = [];
          }
        }
        
        return `
        <div style="border: 2px solid #f7fafc; border-radius: 20px; padding: 28px; margin-bottom: 24px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; flex-wrap: wrap; gap: 14px;">
            <div>
              <h3 style="font-size: 19px; color: #2d3748; margin-bottom: 6px; font-weight: 700;">Order #${order.id}</h3>
              <p style="font-size: 14px; color: #718096;">${new Date(order.orderDate).toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
            </div>
            <div style="background: #48bb78; color: white; padding: 10px 20px; border-radius: 24px; font-size: 13px; font-weight: 700;">
              ‚úÖ ${order.status}
            </div>
          </div>
          
          <div style="background: #f7fafc; padding: 24px; border-radius: 16px; margin-bottom: 20px;">
            ${orderItems.map(item => `
              <div style="display: flex; justify-content: space-between; margin-bottom: 14px;">
                <span style="color: #2d3748;">${item.productName}</span>
                <span style="font-weight: 600; color: #e94560;">‚Çπ${item.price.toFixed(2)}</span>
              </div>
            `).join('')}
            <div style="border-top: 2px solid #e2e8f0; margin-top: 20px; padding-top: 20px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #718096;">Subtotal:</span>
                <span style="font-weight: 600;">‚Çπ${order.subtotal.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span style="color: #718096;">Shipping:</span>
                <span style="font-weight: 600;">${order.shipping === 0 ? 'FREE' : '‚Çπ' + order.shipping.toFixed(2)}</span>
              </div>
              <div style="display: flex; justify-content: space-between; font-size: 19px; font-weight: 700; color: #2d3748;">
                <span>Total:</span>
                <span style="color: #e94560;">‚Çπ${order.total.toFixed(2)}</span>
              </div>
            </div>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center; font-size: 14px; color: #718096;">
            <span>üí≥ ${order.paymentMethod}</span>
            <span>üìß Confirmation sent to ${currentUser.email}</span>
          </div>
        </div>
      `;
      }).join('');
    }

    function renderAdminProducts() {
      const grid = document.getElementById('adminProductsGrid');
      const products = allRecords.filter(r => r.type === 'product');
      
      if (products.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>No designs uploaded yet</h3>
            <p>Click "Upload Design" to add your first design</p>
          </div>
        `;
        return;
      }
      
      grid.innerHTML = products.map(p => renderProductCard(p)).join('');
    }

    // View Management
    function showView(view) {
      currentView = view;
      document.querySelectorAll('.view-content').forEach(v => v.style.display = 'none');
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      
      const viewMap = {
        'browse': 'browseView',
        'calculator': 'calculatorView',
        'categories': 'categoriesView',
        'trending': 'trendingView',
        'new': 'newView',
        'wishlist': 'wishlistView',
        'cart': 'cartView',
        'profile': 'profileView',
        'orders': 'ordersView',
        'admin': 'adminView'
      };
      
      const viewId = viewMap[view];
      if (viewId) {
        document.getElementById(viewId).style.display = 'block';
      }
      
      // Show/hide filter bar
      const filterBar = document.getElementById('filterBar');
      if (view === 'browse') {
        filterBar.style.display = 'flex';
      } else {
        filterBar.style.display = 'none';
      }
      
      closeUserMenu();
    }

    function setViewMode(mode) {
      viewMode = mode;
      document.getElementById('gridViewBtn').classList.toggle('active', mode === 'grid');
      document.getElementById('listViewBtn').classList.toggle('active', mode === 'list');
      renderProducts();
    }

    function filterByCategory(category) {
      clearFilters();
      document.getElementById('categoryFilter').value = category;
      showView('browse');
      applyFilters();
    }

    // Cart & Wishlist
    function addToCart(backendId) {
      const product = allRecords.find(r => r.__backendId === backendId);
      if (!product || !product.inStock) return;
      
      if (cartItems.find(item => item.__backendId === backendId)) {
        showNotification('‚ÑπÔ∏è Item already in cart!', 'info');
        return;
      }
      
      cartItems.push(product);
      updateCartCount();
      
      if (currentUser) {
        trackActivity('add_to_cart', {
          productId: product.id,
          productName: product.productName,
          price: product.price,
          category: product.category
        });
      }
      
      showNotification('‚úÖ Added to cart!');
    }

    function removeFromCart(backendId) {
      cartItems = cartItems.filter(item => item.__backendId !== backendId);
      updateCartCount();
      renderCart();
      showNotification('üóëÔ∏è Removed from cart');
    }

    function updateCartCount() {
      document.getElementById('cartCount').textContent = cartItems.length;
    }

    function toggleWishlist(backendId) {
      const index = wishlistItems.indexOf(backendId);
      if (index > -1) {
        wishlistItems.splice(index, 1);
        showNotification('üíî Removed from wishlist');
      } else {
        wishlistItems.push(backendId);
        showNotification('‚ù§Ô∏è Added to wishlist');
      }
      updateWishlistCount();
      renderProducts();
      renderWishlist();
    }

    function isInWishlist(backendId) {
      return wishlistItems.includes(backendId);
    }

    function updateWishlistCount() {
      document.getElementById('wishlistCount').textContent = wishlistItems.length;
    }

    // Payment Functions
    function proceedToCheckout() {
      if (cartItems.length === 0) {
        showNotification('‚ùå Your cart is empty!', 'error');
        return;
      }
      
      const subtotal = cartItems.reduce((sum, item) => sum + item.price, 0);
      const shipping = subtotal > 2000 ? 0 : 50;
      const total = subtotal + shipping;
      
      openPaymentModal(total);
    }
    
    function openPaymentModal(amount) {
      document.getElementById('paymentModal').classList.add('active');
      document.getElementById('paymentAmount').textContent = amount.toFixed(2);
      document.getElementById('paymentForm').reset();
    }
    
    function closePaymentModal() {
      document.getElementById('paymentModal').classList.remove('active');
    }
    
    function processPayment(event) {
      event.preventDefault();
      
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardName = document.getElementById('cardName').value;
      const expiryDate = document.getElementById('expiryDate').value;
      const cvv = document.getElementById('cvv').value;
      
      if (!validateCardNumber(cardNumber)) {
        showNotification('‚ùå Invalid card number', 'error');
        return;
      }
      
      if (!validateExpiryDate(expiryDate)) {
        showNotification('‚ùå Invalid or expired card', 'error');
        return;
      }
      
      if (cvv.length < 3) {
        showNotification('‚ùå Invalid CVV', 'error');
        return;
      }
      
      const payBtn = document.getElementById('paymentBtn');
      payBtn.disabled = true;
      payBtn.textContent = 'üîÑ Processing Payment...';
      
      setTimeout(() => {
        const orderItems = [...cartItems];
        const subtotal = orderItems.reduce((sum, item) => sum + item.price, 0);
        const shipping = subtotal > 2000 ? 0 : 50;
        const total = subtotal + shipping;
        
        const order = {
          __backendId: 'local_' + Date.now(),
          id: Date.now().toString(),
          type: 'order',
          userId: currentUser.email,
          items: orderItems.map(item => ({
            productId: item.id,
            productName: item.productName,
            price: item.price,
            category: item.category
          })),
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          paymentMethod: 'Card ending in ' + cardNumber.slice(-4),
          status: 'Confirmed',
          orderDate: new Date().toISOString()
        };
        
        allRecords.push(order);
        
        trackActivity('purchase', {
          orderId: order.id,
          itemCount: orderItems.length,
          subtotal: subtotal,
          shipping: shipping,
          total: total,
          products: orderItems.map(item => item.productName).join(', ')
        });
        
        saveToLocalStorage();
        updateUI();
        
        payBtn.disabled = false;
        payBtn.textContent = 'üí≥ Pay Now';
        
        showNotification('‚úÖ Payment successful! Order confirmed.');
        cartItems = [];
        updateCartCount();
        closePaymentModal();
        showView('orders');
      }, 2000);
    }
    
    function validateCardNumber(cardNumber) {
      if (</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b8601ec0468b0b',t:'MTc2MjYzOTU2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
  </html>
