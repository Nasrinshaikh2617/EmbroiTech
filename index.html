<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EmbroiTech - Modernizing Embroidery Design</title>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: #2d3748;
      min-height: 100vh;
      overflow-x: hidden;
    }

    * {
      box-sizing: border-box;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    header {
      text-align: center;
      padding: 3rem 1rem;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      margin-bottom: 2rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }

    h1 {
      font-size: 3rem;
      margin: 0 0 0.5rem 0;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .tagline {
      font-size: 1.25rem;
      color: #718096;
      margin-bottom: 2rem;
    }

    .nav-tabs {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 2rem;
    }

    .tab-btn {
      padding: 0.75rem 2rem;
      border: none;
      background: rgba(255, 255, 255, 0.9);
      color: #f5576c;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .tab-btn:hover {
      background: #f5576c;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
    }

    .tab-btn.active {
      background: #f5576c;
      color: white;
    }

    .tab-content {
      display: none;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      margin-bottom: 2rem;
    }

    .tab-content.active {
      display: block;
    }

    .design-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .design-card {
      background: white;
      border-radius: 15px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    }

    .design-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(245, 87, 108, 0.3);
      border-color: #f5576c;
    }

    .design-icon {
      font-size: 4rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .design-name {
      font-weight: 600;
      font-size: 1.1rem;
      text-align: center;
      color: #2d3748;
      margin-bottom: 0.5rem;
    }

    .design-category {
      text-align: center;
      color: #718096;
      font-size: 0.9rem;
    }

    .btn {
      padding: 1rem 2rem;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .btn-primary {
      background: #f5576c;
      color: white;
    }

    .btn-primary:hover {
      background: #e04458;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
    }

    .btn-secondary {
      background: #e2e8f0;
      color: #2d3748;
    }

    .btn-secondary:hover {
      background: #cbd5e0;
    }

    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: #48bb78;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      display: none;
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .toast.show {
      display: block;
    }

    .login-container {
      display: none;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 2rem;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10000;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      overflow: hidden;
    }

    .login-container.show {
      display: flex;
    }

    .login-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 3rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 400px;
      text-align: center;
    }

    .login-title {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .login-subtitle {
      color: #718096;
      margin-bottom: 2rem;
      font-size: 1.1rem;
    }

    .login-form {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .form-group {
      text-align: left;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #2d3748;
    }

    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 1rem;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
      outline: none;
      border-color: #f5576c;
      box-shadow: 0 0 0 3px rgba(245, 87, 108, 0.1);
    }

    .login-btn {
      width: 100%;
      padding: 1rem;
      background: #f5576c;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    .login-btn:hover {
      background: #e04458;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 87, 108, 0.4);
    }

    .login-btn:disabled {
      background: #cbd5e0;
      cursor: not-allowed;
      transform: none;
    }

    .demo-credentials {
      background: #f7fafc;
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1.5rem;
      font-size: 0.9rem;
      color: #4a5568;
    }

    .demo-credentials strong {
      color: #2d3748;
    }

    .main-app {
      display: none;
      position: relative;
      z-index: 1;
    }

    .main-app.show {
      display: block;
    }
    
    body.logged-in {
      overflow-y: auto;
    }
    
    body.login-active {
      overflow: hidden;
    }

    h2 {
      font-size: 1.75rem;
      margin-bottom: 1rem;
      color: #2d3748;
    }

    h3 {
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
      color: #2d3748;
    }

    .fabric-upload-area {
      border: 2px dashed #cbd5e0;
      border-radius: 10px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 1rem;
    }

    .fabric-upload-area:hover {
      border-color: #f5576c;
      background: rgba(245, 87, 108, 0.05);
    }

    .fabric-upload-area.dragover {
      border-color: #f5576c;
      background: rgba(245, 87, 108, 0.1);
    }

    .upload-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.6;
    }

    .upload-text {
      color: #718096;
      font-size: 0.9rem;
    }

    .canvas-container {
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
      background: white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
    }

    .drawing-tools {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
      padding: 1rem;
      background: white;
      border-radius: 10px;
    }

    .tool-btn {
      padding: 0.5rem 1rem;
      border: 2px solid #e2e8f0;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .tool-btn:hover, .tool-btn.active {
      border-color: #f5576c;
      background: #f5576c;
      color: white;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }
      
      .nav-tabs {
        gap: 0.5rem;
      }
      
      .tab-btn {
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Login Page -->
  <div class="login-container show" id="login-page">
   <div class="login-card">
    <h1 class="login-title">üßµ</h1>
    <h2 class="login-title">EmbroiTech</h2>
    <p class="login-subtitle">Sign in to modernize your embroidery design experience</p>
    <form class="login-form" id="login-form">
     <div class="form-group"><label for="login-email">Email Address</label> <input type="email" id="login-email" placeholder="Enter your email" required>
     </div>
     <div class="form-group"><label for="login-password">Password</label> <input type="password" id="login-password" placeholder="Enter your password" required>
     </div><button type="submit" class="login-btn" id="login-btn">Sign In</button>
    </form>
    <div class="demo-credentials"><strong>Demo Credentials:</strong><br>
      Email: demo@embroidery.com<br>
      Password: demo123
    </div>
   </div>
  </div><!-- Main Application -->
  <div class="main-app" id="main-app">
   <div class="container">
    <header>
     <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
      <div style="flex: 1;"></div>
      <div style="text-align: center; flex: 2;">
       <h1>EmbroiTech</h1>
       <p class="tagline">Modernizing Embroidery Design &amp; Visualization</p>
      </div>
      <div style="flex: 1; text-align: right;"><button class="btn btn-secondary" id="logout-btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;"> üö™ Logout </button>
      </div>
     </div>
     <nav class="nav-tabs"><button class="tab-btn active" data-tab="home">üè† Home</button> <button class="tab-btn" data-tab="discover">üåç Discover</button> <button class="tab-btn" data-tab="customize">‚ú® Customize</button> <button class="tab-btn" data-tab="draw">üé® Draw</button> <button class="tab-btn" data-tab="gallery">üì∏ Gallery</button> <button class="tab-btn" data-tab="contact">üí¨ Contact</button>
     </nav>
    </header><!-- Home Tab -->
    <main id="home" class="tab-content active">
     <div style="text-align: center; padding: 2rem 0;">
      <h2>Welcome to EmbroiTech Platform</h2>
      <p style="color: #718096; font-size: 1.2rem; margin-bottom: 3rem;">Modernizing embroidery design visualization, customization, and ordering for traditional Indian garments</p>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
       <div style="background: white; border-radius: 15px; padding: 2rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
        <div style="font-size: 3rem; margin-bottom: 1rem;">
         üßµ
        </div>
        <h3>Traditional Design Library</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Browse authentic embroidery patterns for kurti, anarkali, saree, lehenga and more traditional garments</p><button class="btn btn-primary" onclick="switchTab('discover')">Explore Designs</button>
       </div>
       <div style="background: white; border-radius: 15px; padding: 2rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
        <div style="font-size: 3rem; margin-bottom: 1rem;">
         üì±
        </div>
        <h3>AI-Powered Visualization</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Upload your fabric photos and see realistic previews of how embroidery will look before ordering</p><button class="btn btn-primary" onclick="switchTab('customize')">Start Visualizing</button>
       </div>
       <div style="background: white; border-radius: 15px; padding: 2rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
        <div style="font-size: 3rem; margin-bottom: 1rem;">
         üé®
        </div>
        <h3>Custom Design Studio</h3>
        <p style="color: #718096; margin-bottom: 1.5rem;">Create your own embroidery patterns with professional drawing tools and save them for future use</p><button class="btn btn-primary" onclick="switchTab('draw')">Start Creating</button>
       </div>
      </div>
      <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border-radius: 20px; padding: 3rem; margin: 2rem 0;">
       <h3 style="color: white; margin-bottom: 1rem;">Why Choose EmbroiTech?</h3>
       <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; text-align: left;">
        <div>
         <h4 style="color: white;">üßµ Traditional Expertise</h4>
         <p>Authentic patterns for kurti, anarkali, saree, lehenga with traditional techniques like chikankari, zardozi, mirror work</p>
        </div>
        <div>
         <h4 style="color: white;">üì± Digital Innovation</h4>
         <p>AI-powered fabric visualization lets you see exactly how embroidery will look before ordering</p>
        </div>
        <div>
         <h4 style="color: white;">üé® Complete Customization</h4>
         <p>Adjust colors, placement, size and create custom designs with professional drawing tools</p>
        </div>
        <div>
         <h4 style="color: white;">üí¨ Expert Support</h4>
         <p>Chat with embroidery specialists who understand traditional techniques and modern requirements</p>
        </div>
       </div>
      </div>
     </div>
    </main><!-- Discover Tab -->
    <div id="discover" class="tab-content">
     <h2>Browse Traditional Embroidery Designs</h2>
     <p style="color: #718096; margin-bottom: 1rem;">Discover authentic patterns for kurti, anarkali, saree, lehenga and more. Select a design to start customizing.</p>
     <div style="display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap;"><button class="btn btn-secondary filter-btn active" data-filter="all">All Designs</button> <button class="btn btn-secondary filter-btn" data-filter="Traditional">Traditional</button> <button class="btn btn-secondary filter-btn" data-filter="Floral">Floral</button> <button class="btn btn-secondary filter-btn" data-filter="Mirror Work">Mirror Work</button> <button class="btn btn-secondary filter-btn" data-filter="Chikankari">Chikankari</button> <button class="btn btn-secondary filter-btn" data-filter="Zardozi">Zardozi</button>
     </div>
     <div class="design-grid" id="design-grid"></div>
    </div><!-- Customize Tab -->
    <div id="customize" class="tab-content">
     <h2>Customize Your Design</h2>
     <p style="color: #718096; margin-bottom: 2rem;">Select colors, placement, and see how it looks on your fabric</p>
     <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
      <div>
       <h3>Design Preview</h3>
       <div style="background: #f7fafc; border-radius: 15px; padding: 2rem; min-height: 400px; display: flex; align-items: center; justify-content: center; border: 2px dashed #cbd5e0;">
        <div style="text-align: center;">
         <div style="font-size: 8rem; margin-bottom: 1rem;">
          üå∏
         </div>
         <p style="color: #718096;">Your customized design preview</p>
        </div>
       </div>
      </div>
      <div>
       <h3>Customization Options</h3>
       <div style="display: flex; flex-direction: column; gap: 1.5rem;">
        <div class="form-group"><label>Design Pattern</label> <select id="design-select"> <option>Paisley Border</option> <option>Floral Vine</option> <option>Mirror Work Mandala</option> <option>Peacock Motif</option> </select>
        </div>
        <div class="form-group"><label>Thread Color</label> <input type="color" value="#f5576c" style="width: 100%; height: 60px; cursor: pointer;">
        </div>
        <div class="form-group"><label>Placement</label> <select> <option>Neckline</option> <option>Sleeves</option> <option>Border</option> <option>Full Front</option> <option>Back</option> </select>
        </div>
        <div class="form-group"><label>Size</label> <select> <option>Small</option> <option>Medium</option> <option>Large</option> <option>Extra Large</option> </select>
        </div><button class="btn btn-primary" onclick="showToast('Design saved to your gallery! üéâ')">Save Design</button>
       </div>
      </div>
     </div>
    </div><!-- Draw Tab -->
    <div id="draw" class="tab-content">
     <h2>Draw Your Custom Design</h2>
     <p style="color: #718096; margin-bottom: 2rem;">Create your own embroidery pattern using our drawing tools</p>
     <div class="drawing-tools"><button class="tool-btn active" onclick="setTool('pen')">‚úèÔ∏è Pen</button> <button class="tool-btn" onclick="setTool('eraser')">üßπ Eraser</button> <button class="tool-btn" onclick="setTool('line')">üìè Line</button> <button class="tool-btn" onclick="setTool('circle')">‚≠ï Circle</button> <button class="tool-btn" onclick="setTool('rectangle')">‚ñ≠ Rectangle</button> <input type="color" id="draw-color" value="#f5576c" style="height: 40px; width: 60px; border-radius: 8px; cursor: pointer; border: 2px solid #e2e8f0;"> <button class="btn btn-secondary" onclick="clearCanvas()" style="padding: 0.5rem 1rem;">Clear</button> <button class="btn btn-primary" onclick="saveDrawing()" style="padding: 0.5rem 1rem;">Save Drawing</button>
     </div>
     <div class="canvas-container">
      <canvas id="drawing-canvas" width="800" height="600" style="display: block; width: 100%; cursor: crosshair;"></canvas>
     </div>
    </div><!-- Gallery Tab -->
    <div id="gallery" class="tab-content">
     <h2>üì∏ Your Design Gallery</h2>
     <p style="color: #718096; margin-bottom: 2rem;">Upload and manage your embroidery design images</p>
     <div style="max-width: 800px; margin: 0 auto;">
      <div class="fabric-upload-area" id="gallery-upload-area">
       <div class="upload-icon">
        üì±
       </div>
       <div class="upload-text"><strong>Click to upload from Gallery</strong> or drag &amp; drop<br><small>JPG, PNG, GIF up to 10MB</small>
       </div>
      </div><input type="file" id="gallery-image-upload" accept="image/*" multiple style="display: none;">
      <div id="uploaded-images-gallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 2rem;"></div>
     </div>
    </div><!-- Contact Tab -->
    <div id="contact" class="tab-content">
     <h2>üí¨ Contact Our Team</h2>
     <p style="color: #718096; margin-bottom: 2rem;">Have questions? Get in touch with our embroidery specialists</p>
     <div style="max-width: 600px; margin: 0 auto;">
      <form id="contact-form" style="display: flex; flex-direction: column; gap: 1.5rem;">
       <div class="form-group"><label>Your Name</label> <input type="text" placeholder="Enter your name" required>
       </div>
       <div class="form-group"><label>Email Address</label> <input type="email" placeholder="Enter your email" required>
       </div>
       <div class="form-group"><label>Subject</label> <input type="text" placeholder="What's this about?" required>
       </div>
       <div class="form-group"><label>Message</label> <textarea rows="6" placeholder="Tell us more..." required></textarea>
       </div><button type="submit" class="btn btn-primary">Send Message</button>
      </form>
     </div>
    </div>
   </div>
  </div>
  <div class="toast" id="toast"></div>
  <script>
    const designs = [
      { id: 'd1', name: 'Paisley Border', icon: 'üåø', category: 'Traditional', garment: 'Kurti' },
      { id: 'd2', name: 'Mirror Work Mandala', icon: '‚ú®', category: 'Mirror Work', garment: 'Anarkali' },
      { id: 'd3', name: 'Floral Vine', icon: 'üå∏', category: 'Floral', garment: 'Saree' },
      { id: 'd4', name: 'Geometric Pattern', icon: 'üî∑', category: 'Geometric', garment: 'Lehenga' },
      { id: 'd5', name: 'Peacock Motif', icon: 'ü¶ö', category: 'Traditional', garment: 'Saree' },
      { id: 'd6', name: 'Rose Bouquet', icon: 'üåπ', category: 'Floral', garment: 'Kurti' },
      { id: 'd7', name: 'Lotus Chain', icon: 'ü™∑', category: 'Traditional', garment: 'Anarkali' },
      { id: 'd8', name: 'Zardozi Border', icon: 'üëë', category: 'Zardozi', garment: 'Lehenga' },
      { id: 'd9', name: 'Butterfly Garden', icon: 'ü¶ã', category: 'Floral', garment: 'Kurti' },
      { id: 'd10', name: 'Rajasthani Mirror', icon: 'ü™û', category: 'Mirror Work', garment: 'Lehenga' },
      { id: 'd11', name: 'Mogul Arch', icon: 'üïå', category: 'Traditional', garment: 'Anarkali' },
      { id: 'd12', name: 'Marigold Border', icon: 'üåº', category: 'Floral', garment: 'Saree' },
      { id: 'd13', name: 'Chikankari Vine', icon: 'üå±', category: 'Chikankari', garment: 'Kurti' },
      { id: 'd14', name: 'Phulkari Bloom', icon: 'üå∫', category: 'Phulkari', garment: 'Dupatta' },
      { id: 'd15', name: 'Kantha Stitch', icon: 'üßµ', category: 'Kantha', garment: 'Saree' },
      { id: 'd16', name: 'Gota Work Border', icon: '‚ú®', category: 'Gota Work', garment: 'Lehenga' }
    ];

    let uploadedImages = [];
    let currentTool = 'pen';
    let isDrawing = false;
    let canvas, ctx;

    function showLoginPage() {
      document.body.classList.add('login-active');
      document.body.classList.remove('logged-in');
      document.getElementById('login-page').classList.add('show');
      document.getElementById('main-app').classList.remove('show');
    }

    function showMainApp() {
      document.body.classList.remove('login-active');
      document.body.classList.add('logged-in');
      document.getElementById('login-page').classList.remove('show');
      document.getElementById('main-app').classList.add('show');
    }

    function handleLogin(e) {
      e.preventDefault();
      
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value.trim();
      const loginBtn = document.getElementById('login-btn');

      if (!email || !password) {
        showToast('Please enter both email and password', false);
        return;
      }

      loginBtn.disabled = true;
      loginBtn.textContent = 'Signing In...';

      setTimeout(() => {
        if (email === 'demo@embroidery.com' && password === 'demo123') {
          localStorage.setItem('embroidery_login', 'true');
          showToast('Welcome to EmbroiTech! üéâ');
          showMainApp();
        } else {
          showToast('Invalid credentials. Please use demo@embroidery.com / demo123', false);
        }
        
        loginBtn.disabled = false;
        loginBtn.textContent = 'Sign In';
      }, 1000);
    }

    function handleLogout() {
      localStorage.removeItem('embroidery_login');
      document.getElementById('login-email').value = '';
      document.getElementById('login-password').value = '';
      showToast('Logged out successfully');
      showLoginPage();
    }

    function switchTab(tabName) {
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.tab === tabName) {
          btn.classList.add('active');
        }
      });

      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(tabName).classList.add('active');
    }

    function renderDesigns(filter = 'all') {
      const grid = document.getElementById('design-grid');
      const filteredDesigns = filter === 'all' ? designs : designs.filter(d => d.category === filter);
      
      grid.innerHTML = filteredDesigns.map(design => `
        <div class="design-card" data-design-id="${design.id}">
          <div class="design-icon">${design.icon}</div>
          <div class="design-name">${design.name}</div>
          <div class="design-category">${design.category}</div>
          <div style="font-size: 0.8rem; color: #9ca3af; margin-top: 0.25rem;">For ${design.garment}</div>
        </div>
      `).join('');

      document.querySelectorAll('.design-card').forEach(card => {
        card.addEventListener('click', () => {
          switchTab('customize');
          showToast('Design selected! Customize it now üé®');
        });
      });
    }

    function showToast(message, success = true) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.style.background = success ? '#48bb78' : '#f56565';
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    function setupImageUpload() {
      const uploadArea = document.getElementById('gallery-upload-area');
      const fileInput = document.getElementById('gallery-image-upload');
      
      uploadArea.addEventListener('click', () => fileInput.click());
      fileInput.addEventListener('change', handleImageUpload);
      
      uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
      });
      
      uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('dragover');
      });
      
      uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        const files = Array.from(e.dataTransfer.files);
        files.forEach(file => handleImageFile(file));
      });
    }
    
    function handleImageUpload(e) {
      const files = Array.from(e.target.files);
      files.forEach(file => handleImageFile(file));
    }
    
    function handleImageFile(file) {
      if (file.size > 10 * 1024 * 1024) {
        showToast('File size must be less than 10MB', false);
        return;
      }
      
      if (!file.type.startsWith('image/')) {
        showToast('Please upload an image file', false);
        return;
      }
      
      const reader = new FileReader();
      reader.onload = (e) => {
        const imageData = {
          id: 'img-' + Date.now() + '-' + Math.random(),
          dataURL: e.target.result,
          name: file.name,
          timestamp: new Date().toISOString()
        };
        
        uploadedImages.push(imageData);
        localStorage.setItem('uploaded_images', JSON.stringify(uploadedImages));
        renderUploadedImages();
        showToast('Image uploaded successfully! üì∏');
      };
      reader.readAsDataURL(file);
    }
    
    function renderUploadedImages() {
      const gallery = document.getElementById('uploaded-images-gallery');
      
      if (uploadedImages.length === 0) {
        gallery.innerHTML = '<p style="text-align: center; color: #718096; grid-column: 1/-1; padding: 3rem;">No images uploaded yet. Click above to add your first design!</p>';
        return;
      }
      
      gallery.innerHTML = uploadedImages.map(img => `
        <div style="position: relative; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); background: white;">
          <img src="${img.dataURL}" alt="${img.name}" style="width: 100%; height: 200px; object-fit: cover;">
          <button onclick="deleteImage('${img.id}')" style="position: absolute; top: 8px; right: 8px; background: rgba(245, 87, 108, 0.95); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 1.3rem; display: flex; align-items: center; justify-content: center; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">√ó</button>
          <div style="padding: 0.75rem; font-size: 0.85rem; color: #4a5568; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;" title="${img.name}">${img.name}</div>
        </div>
      `).join('');
    }
    
    function deleteImage(imageId) {
      uploadedImages = uploadedImages.filter(img => img.id !== imageId);
      localStorage.setItem('uploaded_images', JSON.stringify(uploadedImages));
      renderUploadedImages();
      showToast('Image deleted');
    }
    
    function loadUploadedImages() {
      const saved = localStorage.getItem('uploaded_images');
      if (saved) {
        try {
          uploadedImages = JSON.parse(saved);
          renderUploadedImages();
        } catch (e) {
          uploadedImages = [];
        }
      }
    }

    function initCanvas() {
      canvas = document.getElementById('drawing-canvas');
      if (!canvas) return;
      
      ctx = canvas.getContext('2d');
      ctx.lineWidth = 3;
      ctx.lineCap = 'round';
      ctx.strokeStyle = '#f5576c';
      
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);
      
      canvas.addEventListener('touchstart', handleTouch);
      canvas.addEventListener('touchmove', handleTouch);
      canvas.addEventListener('touchend', stopDrawing);
    }
    
    function startDrawing(e) {
      isDrawing = true;
      const rect = canvas.getBoundingClientRect();
      ctx.beginPath();
      ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }
    
    function draw(e) {
      if (!isDrawing) return;
      const rect = canvas.getBoundingClientRect();
      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
      ctx.stroke();
    }
    
    function stopDrawing() {
      isDrawing = false;
    }
    
    function handleTouch(e) {
      e.preventDefault();
      const touch = e.touches[0];
      const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 'mousemove', {
        clientX: touch.clientX,
        clientY: touch.clientY
      });
      canvas.dispatchEvent(mouseEvent);
    }
    
    function setTool(tool) {
      currentTool = tool;
      document.querySelectorAll('.tool-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      const color = document.getElementById('draw-color').value;
      ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : color;
      ctx.lineWidth = tool === 'eraser' ? 20 : 3;
    }
    
    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      showToast('Canvas cleared');
    }
    
    function saveDrawing() {
      const dataURL = canvas.toDataURL('image/png');
      const link = document.createElement('a');
      link.download = 'embroidery-design-' + Date.now() + '.png';
      link.href = dataURL;
      link.click();
      showToast('Drawing saved! üé®');
    }

    function initializeApp() {
      const savedLogin = localStorage.getItem('embroidery_login');
      if (savedLogin) {
        showMainApp();
      } else {
        showLoginPage();
      }

      document.getElementById('login-form').addEventListener('submit', handleLogin);
      document.getElementById('logout-btn').addEventListener('click', handleLogout);
      
      document.getElementById('contact-form').addEventListener('submit', (e) => {
        e.preventDefault();
        showToast('Message sent! We\'ll get back to you soon üìß');
        e.target.reset();
      });
      
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => switchTab(btn.dataset.tab));
      });
      
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          renderDesigns(btn.dataset.filter);
        });
      });
      
      document.getElementById('draw-color').addEventListener('change', (e) => {
        if (ctx) ctx.strokeStyle = e.target.value;
      });

      renderDesigns();
      setupImageUpload();
      loadUploadedImages();
      initCanvas();
    }

    window.switchTab = switchTab;
    window.deleteImage = deleteImage;
    window.setTool = setTool;
    window.clearCanvas = clearCanvas;
    window.saveDrawing = saveDrawing;
    window.showToast = showToast;

    document.addEventListener('DOMContentLoaded', initializeApp);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99d3a1ece21b1710',t:'MTc2MjkyNTM3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
